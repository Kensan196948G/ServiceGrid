<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ITSMÊ∫ñÊã†ITÈÅãÁî®„Ç∑„Çπ„ÉÜ„É†„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É† - ITIL„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØÂØæÂøú„ÅÆÁµ±ÂêàITÈÅãÁî®ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†">
  <meta name="keywords" content="ITSM, ITIL, ITÈÅãÁî®, „Ç§„É≥„Ç∑„Éá„É≥„ÉàÁÆ°ÁêÜ, Ë≥áÁî£ÁÆ°ÁêÜ, „Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç">
  <title>ServiceGrid - ITSMÈÅãÁî®„Ç∑„Çπ„ÉÜ„É†„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†</title>
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- React 17 (stable) -->
  <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  
  <!-- React Router DOM v5 (compatible with React 17) -->
  <script src="https://unpkg.com/react-router-dom@5.3.4/umd/react-router-dom.min.js"></script>
  
  <!-- Babel Standalone -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Recharts for data visualization -->
  <script crossorigin src="https://unpkg.com/recharts@2.5.0/umd/Recharts.js"></script>
  
  <!-- Tailwind Configuration -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#eff6ff',
              500: '#3b82f6',
              600: '#2563eb',
              700: '#1d4ed8'
            }
          }
        }
      }
    }
  </script>
  
  <style>
    .loading-spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 2s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* „Çπ„ÇØ„É≠„Éº„É´„Éê„Éº„Ç´„Çπ„Çø„Éû„Ç§„Ç∫ */
    .custom-scrollbar::-webkit-scrollbar {
      width: 6px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 3px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #555;
    }
  </style>
</head>
<body class="bg-slate-100 font-sans antialiased">
  <div id="root"></div>
  
  <script type="text/babel">
    const { 
      useState, 
      useEffect, 
      useContext, 
      createContext, 
      useCallback, 
      useMemo, 
      memo,
      useRef
    } = React;
    
    const {
      BrowserRouter: Router,
      Switch,
      Route,
      Link,
      NavLink,
      useHistory,
      useLocation,
      Redirect
    } = ReactRouterDOM;
    
    // ==========================================
    // Constants & Types
    // ==========================================
    
    const APP_NAME = 'ServiceGrid ITSM Platform';
    
    const UserRole = {
      ADMIN: 'administrator',
      OPERATOR: 'operator', 
      USER: 'user',
      READ_ONLY: 'readonly'
    };
    
    const ItemStatus = {
      OPEN: 'Open',
      IN_PROGRESS: 'In Progress', 
      RESOLVED: 'Resolved',
      CLOSED: 'Closed',
      PENDING: 'Pending',
      APPROVED: 'Approved',
      REJECTED: 'Rejected',
      NEW: 'New',
      PENDING_APPROVAL: 'Pending Approval',
      SCHEDULED: 'Scheduled',
      IMPLEMENTED: 'Implemented',
      PLANNED: 'Planned',
      BUILDING: 'Building',
      TESTING: 'Testing',
      DEPLOYED: 'Deployed',
      ROLLED_BACK: 'Rolled Back'
    };
    
    // Navigation Items (15 ITSM Pages)
    const NAVIGATION_ITEMS = [
      { path: '/dashboard', label: '„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ', icon: 'üìä', description: '„Ç∑„Çπ„ÉÜ„É†Ê¶ÇË¶Å„Å®KPI' },
      { path: '/incidents', label: '„Ç§„É≥„Ç∑„Éá„É≥„ÉàÁÆ°ÁêÜ', icon: 'üö®', description: '„Ç§„É≥„Ç∑„Éá„É≥„Éà„É©„Ç§„Éï„Çµ„Ç§„ÇØ„É´ÁÆ°ÁêÜ' },
      { path: '/requests', label: '„Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç', icon: 'üìù', description: '„É¶„Éº„Ç∂„ÉºÁî≥Ë´ã„ÉªË¶ÅÊ±ÇÁÆ°ÁêÜ' },
      { path: '/assets', label: 'Ë≥áÁî£ÁÆ°ÁêÜ', icon: 'üíª', description: 'ÊßãÊàêÁÆ°ÁêÜ„Éá„Éº„Çø„Éô„Éº„Çπ (CMDB)' },
      { path: '/change-management', label: 'Â§âÊõ¥ÁÆ°ÁêÜ', icon: 'üîÑ', description: 'Â§âÊõ¥Ë¶ÅÊ±Ç„ÉªÊâøË™ç„ÉØ„Éº„ÇØ„Éï„É≠„Éº' },
      { path: '/release-management', label: '„É™„É™„Éº„ÇπÁÆ°ÁêÜ', icon: 'üöÄ', description: '„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢Â±ïÈñã„ÉªËøΩË∑°' },
      { path: '/problem-management', label: 'ÂïèÈ°åÁÆ°ÁêÜ', icon: 'üîç', description: 'Ê†πÊú¨ÂéüÂõ†ÂàÜÊûê„ÉªÂÜçÁô∫Èò≤Ê≠¢' },
      { path: '/knowledge', label: '„Éä„É¨„ÉÉ„Ç∏ÁÆ°ÁêÜ', icon: 'üìö', description: 'ÊÉÖÂ†±„ÉªÊâãÈ†ÜÊõ∏ËìÑÁ©ç' },
      { path: '/service-level-management', label: 'SLAÁÆ°ÁêÜ', icon: 'üìà', description: 'KPI„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„ÉªÁõ£Ë¶ñ' },
      { path: '/capacity-management', label: '„Ç≠„É£„Éë„Ç∑„ÉÜ„Ç£ÁÆ°ÁêÜ', icon: '‚öñÔ∏è', description: '„É™„ÇΩ„Éº„Çπ‰ΩøÁî®Áéá„ÉªË®àÁîª' },
      { path: '/availability-management', label: 'ÂèØÁî®ÊÄßÁÆ°ÁêÜ', icon: 'üîß', description: '„Çµ„Éº„Éì„ÇπÁ®ºÂÉçÁéá„ÉªËøΩË∑°' },
      { path: '/security-management', label: '„Çª„Ç≠„É•„É™„ÉÜ„Ç£ÁÆ°ÁêÜ', icon: 'üîí', description: '„Çª„Ç≠„É•„É™„ÉÜ„Ç£„Ç§„É≥„Ç∑„Éá„É≥„Éà„ÉªËÑÜÂº±ÊÄß' },
      { path: '/compliance-management', label: '„Ç≥„É≥„Éó„É©„Ç§„Ç¢„É≥„ÇπÁÆ°ÁêÜ', icon: '‚úÖ', description: 'ISOÊ∫ñÊã†„ÉªÁõ£ÊüªËøΩË∑°' },
      { path: '/audit-log', label: 'Áõ£Êüª„É≠„Ç∞', icon: 'üìã', description: '„Ç∑„Çπ„ÉÜ„É†Áõ£ÊüªË®ºË∑°„Éª„É¶„Éº„Ç∂„ÉºÊ¥ªÂãï' },
      { path: '/settings', label: '„Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö', icon: '‚öôÔ∏è', description: '„É¶„Éº„Ç∂„Éº„Éª„É≠„Éº„É´ÁÆ°ÁêÜ' }
    ];
    
    // ==========================================
    // Context Providers
    // ==========================================
    
    // Authentication Context
    const AuthContext = createContext();
    
    const AuthProvider = ({ children }) => {
      const [user, setUser] = useState(null);
      const [isLoading, setIsLoading] = useState(true);
      const [error, setError] = useState(null);
      
      useEffect(() => {
        try {
          const savedUser = sessionStorage.getItem('servicegrid_auth');
          if (savedUser) {
            const authData = JSON.parse(savedUser);
            if (authData.user && authData.timestamp) {
              const now = Date.now();
              const maxAge = 24 * 60 * 60 * 1000; // 24ÊôÇÈñì
              
              if (now - authData.timestamp < maxAge) {
                setUser(authData.user);
              } else {
                sessionStorage.removeItem('servicegrid_auth');
              }
            }
          }
        } catch (e) {
          console.warn('„Çª„ÉÉ„Ç∑„Éß„É≥Âæ©ÂÖÉ„Ç®„É©„Éº:', e);
          sessionStorage.removeItem('servicegrid_auth');
        } finally {
          setIsLoading(false);
        }
      }, []);
      
      const login = useCallback(async (username, password) => {
        setError(null);
        setIsLoading(true);
        
        try {
          const testUsers = {
            'admin': { password: 'admin123', role: UserRole.ADMIN, displayName: 'ÁÆ°ÁêÜËÄÖ' },
            'operator': { password: 'operator123', role: UserRole.OPERATOR, displayName: '„Ç™„Éö„É¨„Éº„Çø„Éº' },
            'user': { password: 'user123', role: UserRole.USER, displayName: '„É¶„Éº„Ç∂„Éº' }
          };
          
          const testUser = testUsers[username];
          if (testUser && testUser.password === password) {
            const userData = {
              id: Date.now().toString(),
              username,
              displayName: testUser.displayName,
              role: testUser.role,
              loginTime: new Date().toISOString()
            };
            
            setUser(userData);
            
            const authData = {
              user: userData,
              timestamp: Date.now()
            };
            sessionStorage.setItem('servicegrid_auth', JSON.stringify(authData));
            
            setIsLoading(false);
            return true;
          } else {
            setError('„É¶„Éº„Ç∂„ÉºÂêç„Åæ„Åü„ÅØ„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì');
            setIsLoading(false);
            return false;
          }
        } catch (err) {
          setError('„É≠„Ç∞„Ç§„É≥„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ' + err.message);
          setIsLoading(false);
          return false;
        }
      }, []);
      
      const logout = useCallback(() => {
        setUser(null);
        sessionStorage.removeItem('servicegrid_auth');
      }, []);
      
      const contextValue = useMemo(() => ({
        user,
        isLoading, 
        error,
        login,
        logout
      }), [user, isLoading, error, login, logout]);
      
      return (
        <AuthContext.Provider value={contextValue}>
          {children}
        </AuthContext.Provider>
      );
    };
    
    const useAuth = () => {
      const context = useContext(AuthContext);
      if (!context) {
        throw new Error('useAuth must be used within AuthProvider');
      }
      return context;
    };
    
    // Toast Context
    const ToastContext = createContext();
    
    const ToastProvider = ({ children }) => {
      const [toasts, setToasts] = useState([]);
      
      const addToast = useCallback((toast) => {
        const id = Math.random().toString(36).substr(2, 9);
        const newToast = { ...toast, id };
        setToasts(prev => [...prev, newToast]);
        
        if (toast.duration !== 0) {
          setTimeout(() => {
            removeToast(id);
          }, toast.duration || 5000);
        }
      }, []);
      
      const removeToast = useCallback((id) => {
        setToasts(prev => prev.filter(toast => toast.id !== id));
      }, []);
      
      const showSuccess = useCallback((message) => {
        addToast({ message, type: 'success' });
      }, [addToast]);
      
      const showError = useCallback((message) => {
        addToast({ message, type: 'error' });
      }, [addToast]);
      
      const showWarning = useCallback((message) => {
        addToast({ message, type: 'warning' });
      }, [addToast]);
      
      const showInfo = useCallback((message) => {
        addToast({ message, type: 'info' });
      }, [addToast]);
      
      const contextValue = useMemo(() => ({
        toasts,
        addToast,
        removeToast,
        showSuccess,
        showError,
        showWarning,
        showInfo
      }), [toasts, addToast, removeToast, showSuccess, showError, showWarning, showInfo]);
      
      return (
        <ToastContext.Provider value={contextValue}>
          {children}
        </ToastContext.Provider>
      );
    };
    
    const useToast = () => {
      const context = useContext(ToastContext);
      if (!context) {
        throw new Error('useToast must be used within ToastProvider');
      }
      return context;
    };
    
    // ==========================================
    // Common UI Components
    // ==========================================
    
    // Button Component
    const Button = memo(({ 
      variant = 'primary', 
      size = 'md', 
      isLoading = false, 
      disabled = false, 
      onClick, 
      children, 
      className = '',
      ...props 
    }) => {
      const baseStyles = 'inline-flex items-center justify-center font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors';
      
      const variants = {
        primary: 'bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500',
        secondary: 'bg-slate-200 hover:bg-slate-300 text-slate-800 focus:ring-slate-500',
        danger: 'bg-red-600 hover:bg-red-700 text-white focus:ring-red-500',
        ghost: 'bg-transparent hover:bg-slate-100 text-slate-600 focus:ring-slate-500'
      };
      
      const sizes = {
        sm: 'px-3 py-2 text-sm',
        md: 'px-4 py-2 text-sm',
        lg: 'px-6 py-3 text-base'
      };
      
      const finalClassName = [
        baseStyles, 
        variants[variant], 
        sizes[size], 
        disabled || isLoading ? 'opacity-50 cursor-not-allowed' : '',
        className
      ].filter(Boolean).join(' ');
      
      return (
        <button
          className={finalClassName}
          onClick={disabled || isLoading ? undefined : onClick}
          disabled={disabled || isLoading}
          {...props}
        >
          {isLoading && (
            <div className="loading-spinner mr-2" style={{ width: '16px', height: '16px', borderWidth: '2px' }} />
          )}
          {children}
        </button>
      );
    });
    
    // Card Component
    const Card = memo(({ title, actions, className = '', children }) => {
      return (
        <div className={`bg-white border border-slate-200 rounded-lg shadow-sm ${className}`}>
          {(title || actions) && (
            <div className="px-6 py-4 border-b border-slate-200 flex justify-between items-center">
              {title && (
                <h3 className="text-lg font-semibold text-slate-800">{title}</h3>
              )}
              {actions}
            </div>
          )}
          <div className="p-6">
            {children}
          </div>
        </div>
      );
    });
    
    // Modal Component
    const Modal = memo(({ isOpen, onClose, title, size = 'md', children }) => {
      useEffect(() => {
        if (isOpen) {
          document.body.style.overflow = 'hidden';
          return () => {
            document.body.style.overflow = 'unset';
          };
        }
      }, [isOpen]);
      
      if (!isOpen) return null;
      
      const sizes = {
        sm: 'max-w-md',
        md: 'max-w-lg',
        lg: 'max-w-2xl',
        xl: 'max-w-4xl'
      };
      
      return (
        <div className="fixed inset-0 z-50 overflow-y-auto">
          <div className="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div className="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" onClick={onClose}></div>
            
            <span className="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            
            <div className={`inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle ${sizes[size]} sm:w-full`}>
              <div className="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <div className="flex justify-between items-center mb-4">
                  <h3 className="text-lg font-medium text-gray-900">{title}</h3>
                  <button
                    onClick={onClose}
                    className="text-gray-400 hover:text-gray-600 focus:outline-none"
                  >
                    <span className="sr-only">Èñâ„Åò„Çã</span>
                    <svg className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
                {children}
              </div>
            </div>
          </div>
        </div>
      );
    });
    
    // Input Component
    const Input = memo(({ 
      label, 
      error, 
      required = false,
      className = '',
      ...props 
    }) => {
      return (
        <div className="mb-4">
          {label && (
            <label className="block text-sm font-medium text-gray-700 mb-1">
              {label}
              {required && <span className="text-red-500 ml-1">*</span>}
            </label>
          )}
          <input
            className={`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${
              error ? 'border-red-500' : ''
            } ${className}`}
            {...props}
          />
          {error && (
            <p className="mt-1 text-sm text-red-600">{error}</p>
          )}
        </div>
      );
    });
    
    // Textarea Component
    const Textarea = memo(({ 
      label, 
      error, 
      required = false,
      rows = 3,
      className = '',
      ...props 
    }) => {
      return (
        <div className="mb-4">
          {label && (
            <label className="block text-sm font-medium text-gray-700 mb-1">
              {label}
              {required && <span className="text-red-500 ml-1">*</span>}
            </label>
          )}
          <textarea
            rows={rows}
            className={`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${
              error ? 'border-red-500' : ''
            } ${className}`}
            {...props}
          />
          {error && (
            <p className="mt-1 text-sm text-red-600">{error}</p>
          )}
        </div>
      );
    });
    
    // Select Component
    const Select = memo(({ 
      label, 
      options = [], 
      error, 
      required = false,
      placeholder = 'ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
      className = '',
      ...props 
    }) => {
      return (
        <div className="mb-4">
          {label && (
            <label className="block text-sm font-medium text-gray-700 mb-1">
              {label}
              {required && <span className="text-red-500 ml-1">*</span>}
            </label>
          )}
          <select
            className={`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${
              error ? 'border-red-500' : ''
            } ${className}`}
            {...props}
          >
            <option value="">{placeholder}</option>
            {options.map((option, index) => (
              <option key={index} value={option.value}>
                {option.label}
              </option>
            ))}
          </select>
          {error && (
            <p className="mt-1 text-sm text-red-600">{error}</p>
          )}
        </div>
      );
    });
    
    // LoadingSpinner Component
    const LoadingSpinner = memo(({ size = 'md', className = '' }) => {
      const sizes = {
        sm: 'h-4 w-4',
        md: 'h-8 w-8', 
        lg: 'h-16 w-16'
      };
      
      return (
        <div className={`loading-spinner ${sizes[size]} ${className}`} />
      );
    });
    
    // ==========================================
    // Layout Components
    // ==========================================
    
    // Header Component
    const Header = memo(() => {
      const { user, logout } = useAuth();
      const history = useHistory();
      const [dropdownOpen, setDropdownOpen] = useState(false);
      const dropdownRef = useRef(null);
      
      const handleLogout = useCallback(() => {
        logout();
        history.push('/login');
      }, [logout, history]);
      
      const roleToJapanese = (role) => {
        const roleMap = {
          [UserRole.ADMIN]: 'ÁÆ°ÁêÜËÄÖ',
          [UserRole.OPERATOR]: '„Ç™„Éö„É¨„Éº„Çø„Éº',
          [UserRole.USER]: '„É¶„Éº„Ç∂„Éº',
          [UserRole.READ_ONLY]: 'Èñ≤Ë¶ßÂ∞ÇÁî®'
        };
        return roleMap[role] || role;
      };
      
      // Close dropdown when clicking outside
      useEffect(() => {
        const handleClickOutside = (event) => {
          if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
            setDropdownOpen(false);
          }
        };
        
        if (dropdownOpen) {
          document.addEventListener('mousedown', handleClickOutside);
          return () => document.removeEventListener('mousedown', handleClickOutside);
        }
      }, [dropdownOpen]);
      
      return (
        <header className="bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-10">
          <h1 className="text-xl font-semibold text-slate-800">
            {APP_NAME}
          </h1>
          
          <div className="relative" ref={dropdownRef}>
            <button
              onClick={() => setDropdownOpen(!dropdownOpen)}
              className="flex items-center text-slate-600 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md p-1"
              aria-expanded={dropdownOpen}
              aria-haspopup="menu"
            >
              <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold mr-2">
                {user?.username?.charAt(0)?.toUpperCase() || 'U'}
              </div>
              <span className="hidden md:inline">
                {user ? `${user.displayName} (${roleToJapanese(user.role)})` : '„Ç≤„Çπ„Éà'}
              </span>
              <svg 
                className="w-5 h-5 ml-1 hidden md:inline"
                fill="currentColor" 
                viewBox="0 0 20 20"
              >
                <path fillRule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clipRule="evenodd" />
              </svg>
            </button>
            
            {dropdownOpen && (
              <div className="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20 border border-slate-200">
                <button
                  onClick={() => { history.push('/settings'); setDropdownOpen(false); }}
                  className="block w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-100"
                >
                  „Éó„É≠„Éï„Ç°„Ç§„É´Ë®≠ÂÆö
                </button>
                <button
                  onClick={handleLogout}
                  className="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50"
                >
                  „É≠„Ç∞„Ç¢„Ç¶„Éà
                </button>
              </div>
            )}
          </div>
        </header>
      );
    });
    
    // Sidebar Component
    const Sidebar = memo(({ isOpen, toggleSidebar }) => {
      const location = useLocation();
      
      return (
        <>
          {/* Overlay for mobile */}
          {isOpen && (
            <div 
              className="fixed inset-0 z-20 bg-black opacity-50 lg:hidden" 
              onClick={toggleSidebar}
            />
          )}
          
          <aside 
            className={`fixed lg:static inset-y-0 left-0 z-30 w-72 bg-slate-800 text-slate-100 p-4 transform ${
              isOpen ? 'translate-x-0' : '-translate-x-full'
            } lg:translate-x-0 transition-transform duration-300 ease-in-out flex flex-col`}
          >
            <div className="text-2xl font-bold mb-6 text-center text-white">
              ServiceGrid
            </div>
            
            <nav className="flex-grow overflow-y-auto custom-scrollbar">
              <ul className="space-y-1">
                {NAVIGATION_ITEMS.map((item, index) => {
                  const isActive = location.pathname === item.path;
                  return (
                    <li key={item.path}>
                      <NavLink
                        to={item.path}
                        onClick={() => {
                          if (window.innerWidth < 1024) {
                            toggleSidebar();
                          }
                        }}
                        className={`flex items-start p-3 rounded-md hover:bg-slate-700 focus:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset transition-colors ${
                          isActive ? 'bg-blue-600 text-white font-semibold' : 'text-slate-300 hover:text-white'
                        }`}
                        aria-current={isActive ? 'page' : undefined}
                      >
                        <span className="flex-shrink-0 mr-3" aria-hidden="true">
                          {item.icon}
                        </span>
                        <div className="flex-1 min-w-0">
                          <span className="block text-sm leading-tight truncate">
                            {item.label}
                          </span>
                          {item.description && (
                            <span className="block text-xs text-slate-400 mt-0.5 leading-tight truncate">
                              {item.description}
                            </span>
                          )}
                        </div>
                      </NavLink>
                    </li>
                  );
                })}
              </ul>
            </nav>
            
            <footer className="mt-auto pt-4">
              <p className="text-xs text-slate-400 text-center">
                &copy; {new Date().getFullYear()} ITSM „Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†
              </p>
            </footer>
          </aside>
        </>
      );
    });
    
    // MainLayout Component
    const MainLayout = memo(({ children }) => {
      const [sidebarOpen, setSidebarOpen] = useState(false);
      
      const toggleSidebar = useCallback(() => {
        setSidebarOpen(prev => !prev);
      }, []);
      
      // Close sidebar when screen size changes to desktop
      useEffect(() => {
        const handleResize = () => {
          if (window.innerWidth >= 1024 && sidebarOpen) {
            setSidebarOpen(false);
          }
        };
        
        window.addEventListener('resize', handleResize);
        return () => window.removeEventListener('resize', handleResize);
      }, [sidebarOpen]);
      
      return (
        <div className="flex h-screen bg-slate-100">
          <Sidebar isOpen={sidebarOpen} toggleSidebar={toggleSidebar} />
          <div className="flex-1 flex flex-col overflow-hidden">
            {/* Mobile header */}
            <div className="lg:hidden bg-white p-4 border-b">
              <button
                onClick={toggleSidebar}
                className="text-slate-600 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
                aria-label="„É°„Éã„É•„Éº„ÇíÈñã„Åè"
              >
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                </svg>
                <span className="ml-2">„É°„Éã„É•„Éº</span>
              </button>
            </div>
            
            <Header />
            <main className="flex-1 overflow-x-hidden overflow-y-auto bg-slate-100 p-6 custom-scrollbar">
              {children}
            </main>
          </div>
        </div>
      );
    });
    
    // ==========================================
    // Toast Container Component
    // ==========================================
    
    const ToastContainer = () => {
      const { toasts, removeToast } = useToast();
      
      return (
        <div className="fixed top-4 right-4 z-50 space-y-2">
          {toasts.map(toast => (
            <div
              key={toast.id}
              className={`max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden transform transition-all duration-300 ${
                toast.type === 'success' ? 'border-l-4 border-green-500' :
                toast.type === 'error' ? 'border-l-4 border-red-500' :
                toast.type === 'warning' ? 'border-l-4 border-yellow-500' :
                'border-l-4 border-blue-500'
              }`}
            >
              <div className="p-4">
                <div className="flex items-start">
                  <div className="flex-1">
                    <p className="text-sm font-medium text-gray-900">
                      {toast.message}
                    </p>
                  </div>
                  <button
                    onClick={() => removeToast(toast.id)}
                    className="ml-4 text-gray-400 hover:text-gray-500 focus:outline-none"
                  >
                    <span className="sr-only">Èñâ„Åò„Çã</span>
                    <svg className="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                      <path fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd" />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          ))}
        </div>
      );
    };
    
    // ==========================================
    // Page Components
    // ==========================================
    
    // Login Page
    const LoginPage = () => {
      const [username, setUsername] = useState('');
      const [password, setPassword] = useState('');
      const { login, error, isLoading } = useAuth();
      const history = useHistory();
      
      const handleSubmit = async (e) => {
        e.preventDefault();
        const success = await login(username, password);
        if (success) {
          history.push('/dashboard');
        }
      };
      
      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4">
          <div className="max-w-md w-full">
            <Card title="ServiceGrid ITSM">
              <form onSubmit={handleSubmit} className="space-y-4">
                <Input
                  type="text"
                  required
                  label="„É¶„Éº„Ç∂„ÉºÂêç"
                  placeholder="„É¶„Éº„Ç∂„ÉºÂêç„ÇíÂÖ•Âäõ"
                  value={username}
                  onChange={(e) => setUsername(e.target.value)}
                />
                
                <Input
                  type="password"
                  required
                  label="„Éë„Çπ„ÉØ„Éº„Éâ"
                  placeholder="„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                />
                
                {error && (
                  <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
                    {error}
                  </div>
                )}
                
                <Button
                  type="submit"
                  isLoading={isLoading}
                  className="w-full"
                >
                  {isLoading ? '„É≠„Ç∞„Ç§„É≥‰∏≠...' : '„É≠„Ç∞„Ç§„É≥'}
                </Button>
                
                <div className="text-sm text-gray-600 text-center space-y-1 mt-4">
                  <p className="font-semibold">üîë „ÉÜ„Çπ„ÉàÁî®„Ç¢„Ç´„Ç¶„É≥„Éà:</p>
                  <p>admin / admin123 (ÁÆ°ÁêÜËÄÖ)</p>
                  <p>operator / operator123 („Ç™„Éö„É¨„Éº„Çø„Éº)</p>
                  <p>user / user123 („É¶„Éº„Ç∂„Éº)</p>
                </div>
              </form>
            </Card>
          </div>
        </div>
      );
    };
    
    // Dashboard Page
    const DashboardPage = () => {
      const { user } = useAuth();
      const { showSuccess } = useToast();
      const [stats, setStats] = useState({
        systemUptime: 99.8,
        totalAssets: 1247,
        activeIncidents: 12,
        pendingRequests: 8
      });
      const [loading, setLoading] = useState(true);
      
      const fetchDashboardData = useCallback(async () => {
        try {
          setLoading(true);
          
          // „Éê„ÉÉ„ÇØ„Ç®„É≥„ÉâAPI„Åã„ÇâÁµ±Ë®à„Éá„Éº„Çø„ÇíÂèñÂæóÔºà„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ‰ªò„ÅçÔºâ
          const controller = new AbortController();
          const timeoutId = setTimeout(() => controller.abort(), 5000);
          
          const [assetsResponse, incidentsResponse] = await Promise.allSettled([
            fetch('http://localhost:8082/api/assets/stats', { signal: controller.signal })
              .then(r => r.ok ? r.json() : { total: 1247 }),
            fetch('http://localhost:8082/api/incidents/stats', { signal: controller.signal })
              .then(r => r.ok ? r.json() : { active: 12 })
          ]);
          
          clearTimeout(timeoutId);
          
          const assetStats = assetsResponse.status === 'fulfilled' ? assetsResponse.value : { total: 1247 };
          const incidentStats = incidentsResponse.status === 'fulfilled' ? incidentsResponse.value : { active: 12 };
          
          setStats({
            systemUptime: 99.8,
            totalAssets: assetStats.total || 1247,
            activeIncidents: incidentStats.active || 12,
            pendingRequests: 8
          });
        } catch (error) {
          console.warn('„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Éá„Éº„ÇøÂèñÂæóÂ§±Êïó„ÄÅ„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ„Éá„Éº„Çø„Çí‰ΩøÁî®:', error);
          setStats({
            systemUptime: 99.8,
            totalAssets: 1247,
            activeIncidents: 12,
            pendingRequests: 8
          });
        } finally {
          setLoading(false);
        }
      }, []);
      
      useEffect(() => {
        fetchDashboardData();
        const interval = setInterval(fetchDashboardData, 30000);
        return () => clearInterval(interval);
      }, [fetchDashboardData]);
      
      const handleQuickAction = (action) => {
        showSuccess(`${action}ÁîªÈù¢„Å∏„ÅÆ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„ÅåÂÆüË£Ö„Åï„Çå„Åæ„Åô`);
      };
      
      if (loading) {
        return (
          <div className="flex items-center justify-center h-64">
            <LoadingSpinner size="lg" />
            <p className="ml-4 text-lg text-slate-700">„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Éá„Éº„ÇøË™≠„ÅøËæº„Åø‰∏≠...</p>
          </div>
        );
      }
      
      return (
        <div className="space-y-6">
          <div className="flex justify-between items-center">
            <h1 className="text-3xl font-bold text-slate-800">„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</h1>
            <p className="text-slate-600">„Çà„ÅÜ„Åì„Åù„ÄÅ{user?.displayName}„Åï„Çì</p>
          </div>
          
          {/* Áµ±Ë®à„Ç´„Éº„Éâ */}
          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            {[
              { label: '„Ç∑„Çπ„ÉÜ„É†Á®ºÂÉçÁéá', value: `${stats.systemUptime}%`, icon: '‚ö°', color: 'green' },
              { label: 'ÁÆ°ÁêÜË≥áÁî£Êï∞', value: stats.totalAssets.toLocaleString(), icon: 'üíª', color: 'blue' },
              { label: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Ç§„É≥„Ç∑„Éá„É≥„Éà', value: stats.activeIncidents.toString(), icon: 'üö®', color: 'red' },
              { label: 'ÊâøË™çÂæÖ„Å°Ë¶ÅÊ±Ç', value: stats.pendingRequests.toString(), icon: 'üìã', color: 'yellow' }
            ].map((stat, index) => (
              <Card 
                key={index}
                className={`border-l-4 border-${stat.color}-500`}
              >
                <div className="flex items-center">
                  <div className={`w-12 h-12 bg-${stat.color}-500 rounded-full flex items-center justify-center text-white mr-4`}>
                    <span className="text-xl">{stat.icon}</span>
                  </div>
                  <div>
                    <dt className="text-sm font-medium text-gray-500">{stat.label}</dt>
                    <dd className="text-2xl font-bold text-gray-900">{stat.value}</dd>
                  </div>
                </div>
              </Card>
            ))}
          </div>
          
          {/* „ÇØ„Ç§„ÉÉ„ÇØ„Ç¢„ÇØ„Ç∑„Éß„É≥ */}
          <Card title="„ÇØ„Ç§„ÉÉ„ÇØ„Ç¢„ÇØ„Ç∑„Éß„É≥">
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
              {[
                { icon: 'üö®', label: '„Ç§„É≥„Ç∑„Éá„É≥„ÉàÂ†±Âëä', color: 'blue' },
                { icon: 'üìù', label: '„Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç', color: 'green' },
                { icon: 'üíª', label: 'Ë≥áÁî£ÁÆ°ÁêÜ', color: 'purple' },
                { icon: 'üìö', label: '„Éä„É¨„ÉÉ„Ç∏„Éô„Éº„Çπ', color: 'orange' },
                { icon: 'üîÑ', label: 'Â§âÊõ¥ÁÆ°ÁêÜ', color: 'indigo' },
                { icon: 'üöÄ', label: '„É™„É™„Éº„ÇπÁÆ°ÁêÜ', color: 'pink' },
                { icon: 'üîç', label: 'ÂïèÈ°åÁÆ°ÁêÜ', color: 'red' },
                { icon: '‚öôÔ∏è', label: '„Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö', color: 'gray' }
              ].map((action, index) => (
                <button
                  key={index}
                  onClick={() => handleQuickAction(action.label)}
                  className={`bg-${action.color}-50 hover:bg-${action.color}-100 p-4 rounded-lg text-center transition-colors focus:outline-none focus:ring-2 focus:ring-${action.color}-500`}
                >
                  <div className="text-2xl mb-2">{action.icon}</div>
                  <div className="text-sm font-medium text-gray-900">{action.label}</div>
                </button>
              ))}
            </div>
          </Card>

          {/* 2Âàó„É¨„Ç§„Ç¢„Ç¶„Éà */}
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
            
            {/* ÊúÄËøë„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„Éì„ÉÜ„Ç£ */}
            <Card title="ÊúÄËøë„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„Éì„ÉÜ„Ç£">
              <div className="space-y-3">
                {[
                  { type: 'incident', title: '„É°„Éº„É´„Çµ„Éº„Éê„ÉºÈöúÂÆ≥', status: 'resolved', time: '2ÊôÇÈñìÂâç' },
                  { type: 'request', title: '„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢„É©„Ç§„Çª„É≥„ÇπÁî≥Ë´ã', status: 'pending', time: '4ÊôÇÈñìÂâç' },
                  { type: 'change', title: '„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØË®≠ÂÆöÂ§âÊõ¥', status: 'approved', time: '6ÊôÇÈñìÂâç' },
                  { type: 'asset', title: '„Éé„Éº„ÉàPCÁôªÈå≤', status: 'completed', time: '8ÊôÇÈñìÂâç' }
                ].map((activity, index) => (
                  <div key={index} className="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                    <div className="flex items-center">
                      <span className="mr-3">
                        {activity.type === 'incident' && 'üö®'}
                        {activity.type === 'request' && 'üìù'}
                        {activity.type === 'change' && 'üîÑ'}
                        {activity.type === 'asset' && 'üíª'}
                      </span>
                      <div>
                        <p className="font-medium text-sm">{activity.title}</p>
                        <p className="text-xs text-slate-500">{activity.time}</p>
                      </div>
                    </div>
                    <span className={`px-2 py-1 text-xs rounded-full ${
                      activity.status === 'resolved' ? 'bg-green-100 text-green-800' :
                      activity.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :
                      activity.status === 'approved' ? 'bg-blue-100 text-blue-800' :
                      'bg-gray-100 text-gray-800'
                    }`}>
                      {activity.status === 'resolved' ? 'Ëß£Ê±∫Ê∏à„Åø' :
                       activity.status === 'pending' ? 'ÊâøË™çÂæÖ„Å°' :
                       activity.status === 'approved' ? 'ÊâøË™çÊ∏à„Åø' : 'ÂÆå‰∫Ü'}
                    </span>
                  </div>
                ))}
              </div>
            </Card>

            {/* „Ç∑„Çπ„ÉÜ„É†Áä∂ÊÖãÁõ£Ë¶ñ */}
            <Card title="„Ç∑„Çπ„ÉÜ„É†Áä∂ÊÖãÁõ£Ë¶ñ">
              <div className="space-y-4">
                {[
                  { service: 'Web„Çµ„Éº„Éê„Éº', status: 'healthy', uptime: '99.9%' },
                  { service: '„Éá„Éº„Çø„Éô„Éº„Çπ', status: 'healthy', uptime: '99.8%' },
                  { service: '„É°„Éº„É´„Çµ„Éº„Éê„Éº', status: 'warning', uptime: '98.5%' },
                  { service: '„Éï„Ç°„Ç§„É´„Çµ„Éº„Éê„Éº', status: 'healthy', uptime: '99.7%' }
                ].map((service, index) => (
                  <div key={index} className="flex items-center justify-between">
                    <div className="flex items-center">
                      <div className={`w-3 h-3 rounded-full mr-3 ${
                        service.status === 'healthy' ? 'bg-green-500' :
                        service.status === 'warning' ? 'bg-yellow-500' : 'bg-red-500'
                      }`}></div>
                      <span className="font-medium">{service.service}</span>
                    </div>
                    <span className="text-sm text-slate-600">Á®ºÂÉçÁéá {service.uptime}</span>
                  </div>
                ))}
              </div>
            </Card>
          </div>

          {/* 3Âàó„É¨„Ç§„Ç¢„Ç¶„Éà */}
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            
            {/* ‰ªäÊó•„ÅÆ‰ΩúÊ•≠ */}
            <Card title="‰ªäÊó•„ÅÆ‰ΩúÊ•≠">
              <div className="space-y-2">
                {[
                  { task: '„Çª„Ç≠„É•„É™„ÉÜ„Ç£„Éë„ÉÉ„ÉÅÈÅ©Áî®', priority: 'high' },
                  { task: '„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÁ¢∫Ë™ç', priority: 'medium' },
                  { task: '„É¶„Éº„Ç∂„Éº„Ç¢„Ç´„Ç¶„É≥„Éà‰ΩúÊàê', priority: 'low' },
                  { task: '„É©„Ç§„Çª„É≥„ÇπÊõ¥Êñ∞', priority: 'medium' }
                ].map((task, index) => (
                  <div key={index} className="flex items-center justify-between text-sm">
                    <span>{task.task}</span>
                    <span className={`px-2 py-1 text-xs rounded ${
                      task.priority === 'high' ? 'bg-red-100 text-red-800' :
                      task.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' :
                      'bg-green-100 text-green-800'
                    }`}>
                      {task.priority === 'high' ? 'È´ò' :
                       task.priority === 'medium' ? '‰∏≠' : '‰Ωé'}
                    </span>
                  </div>
                ))}
              </div>
            </Card>

            {/* SLAÁä∂Ê≥Å */}
            <Card title="SLAÈÅîÊàêÁä∂Ê≥Å">
              <div className="space-y-3">
                {[
                  { metric: '„Ç§„É≥„Ç∑„Éá„É≥„ÉàËß£Ê±∫ÊôÇÈñì', target: '4ÊôÇÈñì', actual: '3.2ÊôÇÈñì', status: 'good' },
                  { metric: '„Çµ„Éº„Éì„ÇπË¶ÅÊ±ÇÂá¶ÁêÜ', target: '24ÊôÇÈñì', actual: '18ÊôÇÈñì', status: 'good' },
                  { metric: '„Ç∑„Çπ„ÉÜ„É†ÂèØÁî®ÊÄß', target: '99.5%', actual: '99.8%', status: 'good' }
                ].map((sla, index) => (
                  <div key={index} className="text-sm">
                    <div className="flex justify-between">
                      <span className="font-medium">{sla.metric}</span>
                      <span className={sla.status === 'good' ? 'text-green-600' : 'text-red-600'}>
                        {sla.status === 'good' ? '‚úì' : '‚úó'}
                      </span>
                    </div>
                    <div className="text-xs text-slate-500">
                      ÁõÆÊ®ô: {sla.target} / ÂÆüÁ∏æ: {sla.actual}
                    </div>
                  </div>
                ))}
              </div>
            </Card>

            {/* ÈáçË¶Å„Å™ÈÄöÁü• */}
            <Card title="ÈáçË¶Å„Å™ÈÄöÁü•">
              <div className="space-y-3">
                {[
                  { type: 'warning', message: '„É°„É≥„ÉÜ„Éä„É≥„Çπ‰∫àÂÆö: ‰ªäÂ§ú22:00-24:00' },
                  { type: 'info', message: 'Êñ∞Ê©üËÉΩ„É™„É™„Éº„Çπ: „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÊîπÂñÑ' },
                  { type: 'alert', message: '„Çª„Ç≠„É•„É™„ÉÜ„Ç£„Ç¢„ÉÉ„Éó„Éá„Éº„ÉàÂà©Áî®ÂèØËÉΩ' }
                ].map((notification, index) => (
                  <div key={index} className={`p-3 rounded-lg text-sm ${
                    notification.type === 'warning' ? 'bg-yellow-50 border-l-4 border-yellow-400' :
                    notification.type === 'info' ? 'bg-blue-50 border-l-4 border-blue-400' :
                    'bg-red-50 border-l-4 border-red-400'
                  }`}>
                    <span className="mr-2">
                      {notification.type === 'warning' ? '‚ö†Ô∏è' :
                       notification.type === 'info' ? '‚ÑπÔ∏è' : 'üö®'}
                    </span>
                    {notification.message}
                  </div>
                ))}
              </div>
            </Card>
          </div>
          
        </div>
      );
    };
    
    // ==========================================
    // Incident Management Page
    // ==========================================
    
    const IncidentManagementPage = () => {
      const { showSuccess, showError } = useToast();
      const [incidents, setIncidents] = useState([]);
      const [loading, setLoading] = useState(true);
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [selectedIncident, setSelectedIncident] = useState(null);
      const [searchTerm, setSearchTerm] = useState('');
      const [statusFilter, setStatusFilter] = useState('');
      const [priorityFilter, setPriorityFilter] = useState('');
      const [currentPage, setCurrentPage] = useState(1);
      const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);
      const [newIncident, setNewIncident] = useState({
        title: '',
        description: '',
        priority: 'Medium',
        category: 'Infrastructure',
        impact: 'Single User',
        urgency: 'Medium'
      });
      const itemsPerPage = 10;

      // Sample incident data
      const sampleIncidents = [
        {
          id: 'INC-001',
          title: '„É°„Éº„É´„Çµ„Éº„Éê„ÉºÊé•Á∂öÈöúÂÆ≥',
          description: '„É°„Éº„É´„Çµ„Éº„Éê„Éº„Å∏„ÅÆÊé•Á∂ö„Åå‰∏çÂÆâÂÆö„Åß„ÄÅ„É°„Éº„É´ÈÄÅÂèó‰ø°„Å´ÈÅÖÂª∂„ÅåÁô∫Áîü„Åó„Å¶„ÅÑ„Çã',
          status: 'Open',
          priority: 'High',
          category: 'Infrastructure',
          assignee: 'Áî∞‰∏≠ Â§™ÈÉé',
          reporter: '‰ΩêËó§ Ëä±Â≠ê',
          createdAt: '2024-06-20T08:30:00Z',
          updatedAt: '2024-06-20T09:15:00Z',
          resolutionTime: null,
          impact: 'Multiple Users',
          urgency: 'High'
        },
        {
          id: 'INC-002',
          title: 'Web„Çµ„Ç§„ÉàË°®Á§∫„Ç®„É©„Éº',
          description: '‰ºöÁ§æWeb„Çµ„Ç§„Éà„Åß404„Ç®„É©„Éº„ÅåÈñìÊ¨†ÁöÑ„Å´Áô∫Áîü„Åó„Å¶„ÅÑ„Çã',
          status: 'In Progress',
          priority: 'Medium',
          category: 'Application',
          assignee: 'Â±±Áî∞ Ê¨°ÈÉé',
          reporter: 'Èà¥Êú® ‰∏ÄÈÉé',
          createdAt: '2024-06-20T07:45:00Z',
          updatedAt: '2024-06-20T10:20:00Z',
          resolutionTime: null,
          impact: 'Single User',
          urgency: 'Medium'
        },
        {
          id: 'INC-003',
          title: '„Éó„É™„É≥„Çø„ÉºÂç∞Âà∑‰∏çÂèØ',
          description: '3Èöé„ÅÆ„É¨„Éº„Ç∂„Éº„Éó„É™„É≥„Çø„Éº„ÅåÂç∞Âà∑„Ç∏„Éß„Éñ„ÇíÂèó„Åë‰ªò„Åë„Å™„ÅÑ',
          status: 'Resolved',
          priority: 'Low',
          category: 'Hardware',
          assignee: '‰ºäËó§ ‰∏âÈÉé',
          reporter: 'È´òÊ©ã ÁæéÂ≠ê',
          createdAt: '2024-06-19T14:20:00Z',
          updatedAt: '2024-06-19T16:45:00Z',
          resolutionTime: '2ÊôÇÈñì25ÂàÜ',
          impact: 'Single User',
          urgency: 'Low'
        },
        {
          id: 'INC-004',
          title: '„Éá„Éº„Çø„Éô„Éº„ÇπÊé•Á∂ö„Çø„Ç§„É†„Ç¢„Ç¶„Éà',
          description: 'È°ßÂÆ¢„Éá„Éº„Çø„Éô„Éº„Çπ„Å∏„ÅÆ„Ç¢„ÇØ„Çª„ÇπÊôÇ„Å´„Çø„Ç§„É†„Ç¢„Ç¶„Éà„Ç®„É©„Éº„ÅåÁô∫Áîü',
          status: 'Open',
          priority: 'Critical',
          category: 'Database',
          assignee: '‰∏≠Êùë ÂõõÈÉé',
          reporter: 'Â∞èÊûó Ê†ÑÂ≠ê',
          createdAt: '2024-06-20T11:00:00Z',
          updatedAt: '2024-06-20T11:30:00Z',
          resolutionTime: null,
          impact: 'Organization',
          urgency: 'High'
        },
        {
          id: 'INC-005',
          title: 'VPNÊé•Á∂öÂïèÈ°å',
          description: '„É™„É¢„Éº„Éà„ÉØ„Éº„ÇØÁî®VPN„Å´Êé•Á∂ö„Åß„Åç„Å™„ÅÑÁ§æÂì°„ÅåË§áÊï∞ÂêçÁô∫Áîü',
          status: 'In Progress',
          priority: 'High',
          category: 'Network',
          assignee: 'Âä†Ëó§ ‰∫îÈÉé',
          reporter: 'Êûó ÂíåÂ≠ê',
          createdAt: '2024-06-20T09:15:00Z',
          updatedAt: '2024-06-20T10:45:00Z',
          resolutionTime: null,
          impact: 'Multiple Users',
          urgency: 'High'
        }
      ];

      useEffect(() => {
        // Simulate API call
        setTimeout(() => {
          setIncidents(sampleIncidents);
          setLoading(false);
        }, 1000);
      }, []);

      // Filter and search incidents
      const filteredIncidents = incidents.filter(incident => {
        const matchesSearch = incident.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             incident.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             incident.id.toLowerCase().includes(searchTerm.toLowerCase());
        const matchesStatus = !statusFilter || incident.status === statusFilter;
        const matchesPriority = !priorityFilter || incident.priority === priorityFilter;
        
        return matchesSearch && matchesStatus && matchesPriority;
      });

      // Pagination
      const totalPages = Math.ceil(filteredIncidents.length / itemsPerPage);
      const paginatedIncidents = filteredIncidents.slice(
        (currentPage - 1) * itemsPerPage,
        currentPage * itemsPerPage
      );

      const getStatusColor = (status) => {
        switch (status) {
          case 'Open': return 'bg-red-100 text-red-800';
          case 'In Progress': return 'bg-yellow-100 text-yellow-800';
          case 'Resolved': return 'bg-green-100 text-green-800';
          case 'Closed': return 'bg-gray-100 text-gray-800';
          default: return 'bg-gray-100 text-gray-800';
        }
      };

      const getPriorityColor = (priority) => {
        switch (priority) {
          case 'Critical': return 'bg-red-600 text-white';
          case 'High': return 'bg-red-400 text-white';
          case 'Medium': return 'bg-yellow-400 text-white';
          case 'Low': return 'bg-green-400 text-white';
          default: return 'bg-gray-400 text-white';
        }
      };

      const formatDateTime = (dateString) => {
        const date = new Date(dateString);
        return date.toLocaleString('ja-JP', {
          year: 'numeric',
          month: '2-digit',
          day: '2-digit',
          hour: '2-digit',
          minute: '2-digit'
        });
      };

      const handleViewIncident = (incident) => {
        setSelectedIncident(incident);
        setIsModalOpen(true);
      };

      const handleStatusChange = (incidentId, newStatus) => {
        setIncidents(prev => prev.map(incident => 
          incident.id === incidentId 
            ? { ...incident, status: newStatus, updatedAt: new Date().toISOString() }
            : incident
        ));
        showSuccess(`„Ç§„É≥„Ç∑„Éá„É≥„Éà ${incidentId} „ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ„Çí„Äå${newStatus}„Äç„Å´Êõ¥Êñ∞„Åó„Åæ„Åó„Åü`);
      };

      const generateIncidentId = () => {
        const maxId = incidents.reduce((max, incident) => {
          const num = parseInt(incident.id.split('-')[1]);
          return num > max ? num : max;
        }, 0);
        return `INC-${String(maxId + 1).padStart(3, '0')}`;
      };

      const handleCreateIncident = () => {
        if (!newIncident.title.trim()) {
          showError('„Çø„Ç§„Éà„É´„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
          return;
        }
        if (!newIncident.description.trim()) {
          showError('Ë©≥Á¥∞Ë™¨Êòé„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
          return;
        }

        const incidentData = {
          id: generateIncidentId(),
          title: newIncident.title.trim(),
          description: newIncident.description.trim(),
          status: 'Open',
          priority: newIncident.priority,
          category: newIncident.category,
          assignee: '„Ç∑„Çπ„ÉÜ„É†ÁÆ°ÁêÜËÄÖ', // Âæå„ÅßÂÆüË£Ö: „É¶„Éº„Ç∂„ÉºÈÅ∏Êäû
          reporter: 'ÁèæÂú®„ÅÆ„É¶„Éº„Ç∂„Éº', // Âæå„ÅßÂÆüË£Ö: ÂÆüÈöõ„ÅÆ„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„Éº
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString(),
          resolutionTime: null,
          impact: newIncident.impact,
          urgency: newIncident.urgency
        };

        setIncidents(prev => [incidentData, ...prev]);
        setNewIncident({
          title: '',
          description: '',
          priority: 'Medium',
          category: 'Infrastructure',
          impact: 'Single User',
          urgency: 'Medium'
        });
        setIsCreateModalOpen(false);
        showSuccess(`Êñ∞Ë¶è„Ç§„É≥„Ç∑„Éá„É≥„Éà ${incidentData.id} „Çí‰ΩúÊàê„Åó„Åæ„Åó„Åü`);
      };

      const handleNewIncidentChange = (field, value) => {
        setNewIncident(prev => ({
          ...prev,
          [field]: value
        }));
      };

      const IncidentModal = ({ incident, isOpen, onClose }) => {
        if (!incident) return null;

        return (
          <Modal isOpen={isOpen} onClose={onClose} title={`„Ç§„É≥„Ç∑„Éá„É≥„ÉàË©≥Á¥∞ - ${incident.id}`} size="lg">
            <div className="space-y-6">
              {/* Âü∫Êú¨ÊÉÖÂ†± */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700">„Çø„Ç§„Éà„É´</label>
                  <p className="mt-1 text-sm text-gray-900">{incident.title}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">„Ç§„É≥„Ç∑„Éá„É≥„ÉàID</label>
                  <p className="mt-1 text-sm text-gray-900">{incident.id}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">„Çπ„ÉÜ„Éº„Çø„Çπ</label>
                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(incident.status)}`}>
                    {incident.status}
                  </span>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">ÂÑ™ÂÖàÂ∫¶</label>
                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPriorityColor(incident.priority)}`}>
                    {incident.priority}
                  </span>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">„Ç´„ÉÜ„Ç¥„É™„Éº</label>
                  <p className="mt-1 text-sm text-gray-900">{incident.category}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">ÊãÖÂΩìËÄÖ</label>
                  <p className="mt-1 text-sm text-gray-900">{incident.assignee}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">Â†±ÂëäËÄÖ</label>
                  <p className="mt-1 text-sm text-gray-900">{incident.reporter}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">ÂΩ±ÈüøÁØÑÂõ≤</label>
                  <p className="mt-1 text-sm text-gray-900">{incident.impact}</p>
                </div>
              </div>

              {/* Ë©≥Á¥∞Ë™¨Êòé */}
              <div>
                <label className="block text-sm font-medium text-gray-700">Ë©≥Á¥∞Ë™¨Êòé</label>
                <p className="mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md">{incident.description}</p>
              </div>

              {/* ÊôÇÈñìÊÉÖÂ†± */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700">‰ΩúÊàêÊó•ÊôÇ</label>
                  <p className="mt-1 text-sm text-gray-900">{formatDateTime(incident.createdAt)}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">Êõ¥Êñ∞Êó•ÊôÇ</label>
                  <p className="mt-1 text-sm text-gray-900">{formatDateTime(incident.updatedAt)}</p>
                </div>
              </div>

              {/* „Çπ„ÉÜ„Éº„Çø„ÇπÊõ¥Êñ∞ */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">„Çπ„ÉÜ„Éº„Çø„ÇπÂ§âÊõ¥</label>
                <div className="flex space-x-2">
                  {['Open', 'In Progress', 'Resolved', 'Closed'].map(status => (
                    <Button
                      key={status}
                      variant={incident.status === status ? 'primary' : 'secondary'}
                      size="sm"
                      onClick={() => {
                        handleStatusChange(incident.id, status);
                        onClose();
                      }}
                    >
                      {status}
                    </Button>
                  ))}
                </div>
              </div>
            </div>
          </Modal>
        );
      };

      const CreateIncidentModal = () => {
        return (
          <Modal 
            isOpen={isCreateModalOpen} 
            onClose={() => setIsCreateModalOpen(false)} 
            title="Êñ∞Ë¶è„Ç§„É≥„Ç∑„Éá„É≥„Éà‰ΩúÊàê" 
            size="lg"
          >
            <div className="space-y-6">
              {/* Âü∫Êú¨ÊÉÖÂ†± */}
              <div className="grid grid-cols-1 gap-4">
                <Input
                  label="„Çø„Ç§„Éà„É´"
                  required
                  placeholder="„Ç§„É≥„Ç∑„Éá„É≥„Éà„ÅÆ„Çø„Ç§„Éà„É´„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                  value={newIncident.title}
                  onChange={(e) => handleNewIncidentChange('title', e.target.value)}
                />
                
                <Textarea
                  label="Ë©≥Á¥∞Ë™¨Êòé"
                  required
                  rows={4}
                  placeholder="„Ç§„É≥„Ç∑„Éá„É≥„Éà„ÅÆË©≥Á¥∞Ë™¨Êòé„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                  value={newIncident.description}
                  onChange={(e) => handleNewIncidentChange('description', e.target.value)}
                />
              </div>

              {/* ÂàÜÈ°ûÊÉÖÂ†± */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Select
                  label="ÂÑ™ÂÖàÂ∫¶"
                  required
                  value={newIncident.priority}
                  onChange={(e) => handleNewIncidentChange('priority', e.target.value)}
                  options={[
                    { value: 'Low', label: 'Low - ‰Ωé' },
                    { value: 'Medium', label: 'Medium - ‰∏≠' },
                    { value: 'High', label: 'High - È´ò' },
                    { value: 'Critical', label: 'Critical - Á∑äÊÄ•' }
                  ]}
                />
                
                <Select
                  label="„Ç´„ÉÜ„Ç¥„É™„Éº"
                  required
                  value={newIncident.category}
                  onChange={(e) => handleNewIncidentChange('category', e.target.value)}
                  options={[
                    { value: 'Infrastructure', label: 'Infrastructure - „Ç§„É≥„Éï„É©' },
                    { value: 'Application', label: 'Application - „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥' },
                    { value: 'Hardware', label: 'Hardware - „Éè„Éº„Éâ„Ç¶„Çß„Ç¢' },
                    { value: 'Software', label: 'Software - „ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢' },
                    { value: 'Network', label: 'Network - „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ' },
                    { value: 'Database', label: 'Database - „Éá„Éº„Çø„Éô„Éº„Çπ' },
                    { value: 'Security', label: 'Security - „Çª„Ç≠„É•„É™„ÉÜ„Ç£' },
                    { value: 'Other', label: 'Other - „Åù„ÅÆ‰ªñ' }
                  ]}
                />
              </div>

              {/* ÂΩ±ÈüøÂ∫¶„Å®Á∑äÊÄ•Â∫¶ */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Select
                  label="ÂΩ±ÈüøÁØÑÂõ≤"
                  required
                  value={newIncident.impact}
                  onChange={(e) => handleNewIncidentChange('impact', e.target.value)}
                  options={[
                    { value: 'Single User', label: 'Single User - Âçò‰∏Ä„É¶„Éº„Ç∂„Éº' },
                    { value: 'Multiple Users', label: 'Multiple Users - Ë§áÊï∞„É¶„Éº„Ç∂„Éº' },
                    { value: 'Department', label: 'Department - ÈÉ®ÈñÄ' },
                    { value: 'Organization', label: 'Organization - ÁµÑÁπîÂÖ®‰Ωì' }
                  ]}
                />
                
                <Select
                  label="Á∑äÊÄ•Â∫¶"
                  required
                  value={newIncident.urgency}
                  onChange={(e) => handleNewIncidentChange('urgency', e.target.value)}
                  options={[
                    { value: 'Low', label: 'Low - ‰Ωé' },
                    { value: 'Medium', label: 'Medium - ‰∏≠' },
                    { value: 'High', label: 'High - È´ò' },
                    { value: 'Critical', label: 'Critical - Á∑äÊÄ•' }
                  ]}
                />
              </div>

              {/* Ê≥®ÊÑèÊõ∏„Åç */}
              <div className="bg-blue-50 border-l-4 border-blue-400 p-4">
                <div className="flex">
                  <div className="flex-shrink-0">
                    <span className="text-blue-400">‚ÑπÔ∏è</span>
                  </div>
                  <div className="ml-3">
                    <p className="text-sm text-blue-700">
                      <strong>Ê≥®ÊÑè:</strong> „Ç§„É≥„Ç∑„Éá„É≥„Éà„ÅØ‰ΩúÊàêÂæå„ÄÅ„Çπ„ÉÜ„Éº„Çø„Çπ„ÄåOpen„Äç„ÅßÈñãÂßã„Åï„Çå„Åæ„Åô„ÄÇ
                      ÊãÖÂΩìËÄÖ„ÅØËá™ÂãïÁöÑ„Å´„Ç∑„Çπ„ÉÜ„É†ÁÆ°ÁêÜËÄÖ„Å´Ââ≤„ÇäÂΩì„Å¶„Çâ„Çå„Åæ„Åô„ÄÇ
                    </p>
                  </div>
                </div>
              </div>

              {/* „Éú„Çø„É≥ */}
              <div className="flex justify-end space-x-3 pt-4 border-t">
                <Button
                  variant="secondary"
                  onClick={() => setIsCreateModalOpen(false)}
                >
                  „Ç≠„É£„É≥„Çª„É´
                </Button>
                <Button
                  variant="primary"
                  onClick={handleCreateIncident}
                  disabled={!newIncident.title.trim() || !newIncident.description.trim()}
                >
                  <span className="mr-2">‚ûï</span>
                  „Ç§„É≥„Ç∑„Éá„É≥„Éà‰ΩúÊàê
                </Button>
              </div>
            </div>
          </Modal>
        );
      };

      if (loading) {
        return (
          <div className="flex items-center justify-center h-64">
            <LoadingSpinner size="lg" />
            <p className="ml-4 text-lg text-slate-700">„Ç§„É≥„Ç∑„Éá„É≥„Éà„Éá„Éº„ÇøË™≠„ÅøËæº„Åø‰∏≠...</p>
          </div>
        );
      }

      return (
        <div className="space-y-6">
          {/* „Éò„ÉÉ„ÉÄ„Éº */}
          <div className="flex justify-between items-center">
            <div>
              <h1 className="text-3xl font-bold text-slate-800">„Ç§„É≥„Ç∑„Éá„É≥„ÉàÁÆ°ÁêÜ</h1>
              <p className="text-slate-600">„Ç∑„Çπ„ÉÜ„É†„Ç§„É≥„Ç∑„Éá„É≥„Éà„ÅÆËøΩË∑°„Å®ÁÆ°ÁêÜ</p>
            </div>
            <Button variant="primary" onClick={() => setIsCreateModalOpen(true)}>
              <span className="mr-2">‚ûï</span>
              Êñ∞Ë¶è„Ç§„É≥„Ç∑„Éá„É≥„Éà
            </Button>
          </div>

          {/* Áµ±Ë®à„Ç´„Éº„Éâ */}
          <div className="grid grid-cols-1 sm:grid-cols-4 gap-4">
            {[
              { label: 'Êú™Ëß£Ê±∫', count: incidents.filter(i => i.status === 'Open').length, color: 'red' },
              { label: 'ÂØæÂøú‰∏≠', count: incidents.filter(i => i.status === 'In Progress').length, color: 'yellow' },
              { label: 'Ëß£Ê±∫Ê∏à„Åø', count: incidents.filter(i => i.status === 'Resolved').length, color: 'green' },
              { label: 'Á∑è‰ª∂Êï∞', count: incidents.length, color: 'blue' }
            ].map((stat, index) => (
              <Card key={index} className={`border-l-4 border-${stat.color}-500`}>
                <div className="text-center">
                  <div className="text-2xl font-bold text-gray-900">{stat.count}</div>
                  <div className="text-sm text-gray-500">{stat.label}</div>
                </div>
              </Card>
            ))}
          </div>

          {/* „Éï„Ç£„É´„Çø„Éº */}
          <Card title="„Éï„Ç£„É´„Çø„Éº„ÉªÊ§úÁ¥¢">
            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
              <Input
                placeholder="„Ç§„É≥„Ç∑„Éá„É≥„ÉàÊ§úÁ¥¢..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
              />
              <Select
                value={statusFilter}
                onChange={(e) => setStatusFilter(e.target.value)}
                options={[
                  { value: '', label: 'ÂÖ®„Å¶„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ' },
                  { value: 'Open', label: 'Open' },
                  { value: 'In Progress', label: 'In Progress' },
                  { value: 'Resolved', label: 'Resolved' },
                  { value: 'Closed', label: 'Closed' }
                ]}
              />
              <Select
                value={priorityFilter}
                onChange={(e) => setPriorityFilter(e.target.value)}
                options={[
                  { value: '', label: 'ÂÖ®„Å¶„ÅÆÂÑ™ÂÖàÂ∫¶' },
                  { value: 'Critical', label: 'Critical' },
                  { value: 'High', label: 'High' },
                  { value: 'Medium', label: 'Medium' },
                  { value: 'Low', label: 'Low' }
                ]}
              />
              <Button 
                variant="secondary"
                onClick={() => {
                  setSearchTerm('');
                  setStatusFilter('');
                  setPriorityFilter('');
                  setCurrentPage(1);
                }}
              >
                „ÇØ„É™„Ç¢
              </Button>
            </div>
          </Card>

          {/* „Ç§„É≥„Ç∑„Éá„É≥„Éà„ÉÜ„Éº„Éñ„É´ */}
          <Card>
            <div className="overflow-x-auto">
              <table className="min-w-full divide-y divide-gray-200">
                <thead className="bg-gray-50">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">„Çø„Ç§„Éà„É´</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ÂÑ™ÂÖàÂ∫¶</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ÊãÖÂΩìËÄÖ</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‰ΩúÊàêÊó•ÊôÇ</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody className="bg-white divide-y divide-gray-200">
                  {paginatedIncidents.map((incident) => (
                    <tr key={incident.id} className="hover:bg-gray-50">
                      <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                        {incident.id}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <div className="text-sm font-medium text-gray-900">{incident.title}</div>
                        <div className="text-sm text-gray-500 truncate max-w-xs">{incident.description}</div>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(incident.status)}`}>
                          {incident.status}
                        </span>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPriorityColor(incident.priority)}`}>
                          {incident.priority}
                        </span>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {incident.assignee}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        {formatDateTime(incident.createdAt)}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                        <Button variant="ghost" size="sm" onClick={() => handleViewIncident(incident)}>
                          Ë©≥Á¥∞
                        </Button>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>

            {/* „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥ */}
            {totalPages > 1 && (
              <div className="flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6">
                <div className="flex flex-1 justify-between sm:hidden">
                  <Button
                    variant="secondary"
                    disabled={currentPage === 1}
                    onClick={() => setCurrentPage(prev => prev - 1)}
                  >
                    Ââç„Å∏
                  </Button>
                  <Button
                    variant="secondary"
                    disabled={currentPage === totalPages}
                    onClick={() => setCurrentPage(prev => prev + 1)}
                  >
                    Ê¨°„Å∏
                  </Button>
                </div>
                <div className="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
                  <div>
                    <p className="text-sm text-gray-700">
                      <span className="font-medium">{(currentPage - 1) * itemsPerPage + 1}</span>
                      {' '}„Åã„Çâ{' '}
                      <span className="font-medium">
                        {Math.min(currentPage * itemsPerPage, filteredIncidents.length)}
                      </span>
                      {' '}‰ª∂„ÇíË°®Á§∫ (ÂÖ®{' '}
                      <span className="font-medium">{filteredIncidents.length}</span>
                      {' '}‰ª∂‰∏≠)
                    </p>
                  </div>
                  <div className="flex space-x-2">
                    <Button
                      variant="secondary"
                      size="sm"
                      disabled={currentPage === 1}
                      onClick={() => setCurrentPage(prev => prev - 1)}
                    >
                      Ââç„Å∏
                    </Button>
                    {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => (
                      <Button
                        key={page}
                        variant={currentPage === page ? 'primary' : 'secondary'}
                        size="sm"
                        onClick={() => setCurrentPage(page)}
                      >
                        {page}
                      </Button>
                    ))}
                    <Button
                      variant="secondary"
                      size="sm"
                      disabled={currentPage === totalPages}
                      onClick={() => setCurrentPage(prev => prev + 1)}
                    >
                      Ê¨°„Å∏
                    </Button>
                  </div>
                </div>
              </div>
            )}
          </Card>

          {/* „Ç§„É≥„Ç∑„Éá„É≥„ÉàË©≥Á¥∞„É¢„Éº„ÉÄ„É´ */}
          <IncidentModal
            incident={selectedIncident}
            isOpen={isModalOpen}
            onClose={() => {
              setIsModalOpen(false);
              setSelectedIncident(null);
            }}
          />

          {/* Êñ∞Ë¶è„Ç§„É≥„Ç∑„Éá„É≥„Éà‰ΩúÊàê„É¢„Éº„ÉÄ„É´ */}
          <CreateIncidentModal />
        </div>
      );
    };

    // ==========================================
    // Service Request Management Page
    // ==========================================
    
    const ServiceRequestManagementPage = () => {
      const { showSuccess, showError } = useToast();
      const [requests, setRequests] = useState([]);
      const [loading, setLoading] = useState(true);
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [selectedRequest, setSelectedRequest] = useState(null);
      const [searchTerm, setSearchTerm] = useState('');
      const [statusFilter, setStatusFilter] = useState('');
      const [categoryFilter, setCategoryFilter] = useState('');
      const [currentPage, setCurrentPage] = useState(1);
      const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);
      const [newRequest, setNewRequest] = useState({
        title: '',
        description: '',
        category: 'Account Management',
        priority: 'Medium',
        urgency: 'Medium',
        businessJustification: ''
      });
      const itemsPerPage = 10;

      // Sample service request data
      const sampleRequests = [
        {
          id: 'SR-001',
          title: 'Êñ∞Ë¶è„É¶„Éº„Ç∂„Éº„Ç¢„Ç´„Ç¶„É≥„Éà‰ΩúÊàê',
          description: 'Êñ∞ÂÖ•Á§æÂì°Áî®„ÅÆ„Ç¢„Ç´„Ç¶„É≥„Éà‰ΩúÊàê„Çí„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô„ÄÇÂñ∂Ê•≠ÈÉ®ÈÖçÂ±û‰∫àÂÆö„Åß„Åô„ÄÇ',
          status: 'Pending Approval',
          category: 'Account Management',
          priority: 'Medium',
          urgency: 'Medium',
          requester: '‰∫∫‰∫ãÈÉ® Áî∞‰∏≠',
          assignee: '„Ç∑„Çπ„ÉÜ„É†ÁÆ°ÁêÜËÄÖ',
          approver: 'Âñ∂Ê•≠ÈÉ®Èï∑',
          createdAt: '2024-06-20T09:00:00Z',
          updatedAt: '2024-06-20T09:30:00Z',
          completedAt: null,
          businessJustification: '2024Âπ¥7Êúà1Êó•ÂÖ•Á§æ‰∫àÂÆö„ÅÆ„Åü„ÇÅ',
          estimatedCost: 'ÁÑ°Êñô',
          estimatedDuration: '1Âñ∂Ê•≠Êó•'
        },
        {
          id: 'SR-002',
          title: '„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢„É©„Ç§„Çª„É≥„ÇπÁî≥Ë´ã',
          description: 'Adobe Creative Suite „É©„Ç§„Çª„É≥„Çπ„ÅÆËøΩÂä†Ë≥ºÂÖ•Áî≥Ë´ã',
          status: 'Approved',
          category: 'Software Request',
          priority: 'High',
          urgency: 'High',
          requester: '„Éû„Éº„Ç±„ÉÜ„Ç£„É≥„Ç∞ÈÉ® ‰ΩêËó§',
          assignee: 'Ë™øÈÅîÊãÖÂΩìËÄÖ',
          approver: 'ITÈÉ®Èï∑',
          createdAt: '2024-06-19T14:00:00Z',
          updatedAt: '2024-06-20T10:00:00Z',
          completedAt: null,
          businessJustification: 'Êñ∞ÂïÜÂìÅ„Éë„É≥„Éï„É¨„ÉÉ„ÉàÂà∂‰Ωú„ÅÆ„Åü„ÇÅÁ∑äÊÄ•„ÅßÂøÖË¶Å',
          estimatedCost: 'ÊúàÈ°ç ¬•6,480',
          estimatedDuration: '3Âñ∂Ê•≠Êó•'
        },
        {
          id: 'SR-003',
          title: '„Éè„Éº„Éâ„Ç¶„Çß„Ç¢‰∫§ÊèõÁî≥Ë´ã',
          description: 'ÈñãÁô∫Áî®PC„ÅÆ„É°„É¢„É™Â¢óË®≠Ôºà16GB‚Üí32GBÔºâ',
          status: 'Completed',
          category: 'Hardware Request',
          priority: 'Medium',
          urgency: 'Low',
          requester: 'ÈñãÁô∫ÈÉ® Â±±Áî∞',
          assignee: '„Éè„Éº„Éâ„Ç¶„Çß„Ç¢ÊãÖÂΩì',
          approver: 'ÈñãÁô∫ÈÉ®Èï∑',
          createdAt: '2024-06-18T11:00:00Z',
          updatedAt: '2024-06-19T16:00:00Z',
          completedAt: '2024-06-19T16:00:00Z',
          businessJustification: 'Â§ßË¶èÊ®°„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åß„É°„É¢„É™‰∏çË∂≥„ÅåÈ†ªÁô∫',
          estimatedCost: '¬•15,000',
          estimatedDuration: '1Âñ∂Ê•≠Êó•'
        },
        {
          id: 'SR-004',
          title: '„Ç¢„ÇØ„Çª„ÇπÊ®©ÈôêÂ§âÊõ¥Áî≥Ë´ã',
          description: 'Âñ∂Ê•≠„Éá„Éº„Çø„Éô„Éº„Çπ„Å∏„ÅÆË™≠„ÅøÂèñ„ÇäÊ®©ÈôêËøΩÂä†',
          status: 'In Progress',
          category: 'Access Request',
          priority: 'Medium',
          urgency: 'Medium',
          requester: '‰ºÅÁîªÈÉ® Èà¥Êú®',
          assignee: '„Çª„Ç≠„É•„É™„ÉÜ„Ç£ÊãÖÂΩì',
          approver: 'Âñ∂Ê•≠ÈÉ®Èï∑',
          createdAt: '2024-06-20T08:00:00Z',
          updatedAt: '2024-06-20T11:00:00Z',
          completedAt: null,
          businessJustification: 'ÂõõÂçäÊúüÂ£≤‰∏äÂàÜÊûê„ÅÆ„Åü„ÇÅ',
          estimatedCost: 'ÁÑ°Êñô',
          estimatedDuration: '2Âñ∂Ê•≠Êó•'
        },
        {
          id: 'SR-005',
          title: '„Ç∑„Çπ„ÉÜ„É†Á†î‰øÆÁî≥Ë´ã',
          description: 'Êñ∞ERP „Ç∑„Çπ„ÉÜ„É†„ÅÆÂà©Áî®ËÄÖÁ†î‰øÆÂÆüÊñΩ',
          status: 'New',
          category: 'Training Request',
          priority: 'Low',
          urgency: 'Low',
          requester: 'Á∑èÂãôÈÉ® ‰ºäËó§',
          assignee: 'Êú™Ââ≤ÂΩì',
          approver: 'Á∑èÂãôÈÉ®Èï∑',
          createdAt: '2024-06-20T13:00:00Z',
          updatedAt: '2024-06-20T13:00:00Z',
          completedAt: null,
          businessJustification: 'ÂÖ®Á§æÂì°„ÅÆ„Çπ„Ç≠„É´Âêë‰∏ä„ÅÆ„Åü„ÇÅ',
          estimatedCost: '¬•50,000',
          estimatedDuration: '1ÈÄ±Èñì'
        }
      ];

      useEffect(() => {
        // Simulate API call
        setTimeout(() => {
          setRequests(sampleRequests);
          setLoading(false);
        }, 1000);
      }, []);

      // Filter and search requests
      const filteredRequests = requests.filter(request => {
        const matchesSearch = request.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             request.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             request.id.toLowerCase().includes(searchTerm.toLowerCase());
        const matchesStatus = !statusFilter || request.status === statusFilter;
        const matchesCategory = !categoryFilter || request.category === categoryFilter;
        
        return matchesSearch && matchesStatus && matchesCategory;
      });

      // Pagination
      const totalPages = Math.ceil(filteredRequests.length / itemsPerPage);
      const paginatedRequests = filteredRequests.slice(
        (currentPage - 1) * itemsPerPage,
        currentPage * itemsPerPage
      );

      const getStatusColor = (status) => {
        switch (status) {
          case 'New': return 'bg-blue-100 text-blue-800';
          case 'Pending Approval': return 'bg-yellow-100 text-yellow-800';
          case 'Approved': return 'bg-green-100 text-green-800';
          case 'In Progress': return 'bg-indigo-100 text-indigo-800';
          case 'Completed': return 'bg-gray-100 text-gray-800';
          case 'Rejected': return 'bg-red-100 text-red-800';
          default: return 'bg-gray-100 text-gray-800';
        }
      };

      const getPriorityColor = (priority) => {
        switch (priority) {
          case 'Critical': return 'bg-red-600 text-white';
          case 'High': return 'bg-red-400 text-white';
          case 'Medium': return 'bg-yellow-400 text-white';
          case 'Low': return 'bg-green-400 text-white';
          default: return 'bg-gray-400 text-white';
        }
      };

      const formatDateTime = (dateString) => {
        const date = new Date(dateString);
        return date.toLocaleString('ja-JP', {
          year: 'numeric',
          month: '2-digit',
          day: '2-digit',
          hour: '2-digit',
          minute: '2-digit'
        });
      };

      const generateRequestId = () => {
        const maxId = requests.reduce((max, request) => {
          const num = parseInt(request.id.split('-')[1]);
          return num > max ? num : max;
        }, 0);
        return `SR-${String(maxId + 1).padStart(3, '0')}`;
      };

      const handleCreateRequest = () => {
        if (!newRequest.title.trim()) {
          showError('„Çø„Ç§„Éà„É´„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
          return;
        }
        if (!newRequest.description.trim()) {
          showError('Ë©≥Á¥∞Ë™¨Êòé„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
          return;
        }

        const requestData = {
          id: generateRequestId(),
          title: newRequest.title.trim(),
          description: newRequest.description.trim(),
          status: 'New',
          category: newRequest.category,
          priority: newRequest.priority,
          urgency: newRequest.urgency,
          requester: 'ÁèæÂú®„ÅÆ„É¶„Éº„Ç∂„Éº',
          assignee: 'Êú™Ââ≤ÂΩì',
          approver: '„Ç∑„Çπ„ÉÜ„É†ÁÆ°ÁêÜËÄÖ',
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString(),
          completedAt: null,
          businessJustification: newRequest.businessJustification || 'Ë®òËºâ„Å™„Åó',
          estimatedCost: 'Êú™ÁÆóÂá∫',
          estimatedDuration: 'Êú™ÂÆö'
        };

        setRequests(prev => [requestData, ...prev]);
        setNewRequest({
          title: '',
          description: '',
          category: 'Account Management',
          priority: 'Medium',
          urgency: 'Medium',
          businessJustification: ''
        });
        setIsCreateModalOpen(false);
        showSuccess(`Êñ∞Ë¶è„Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç ${requestData.id} „Çí‰ΩúÊàê„Åó„Åæ„Åó„Åü`);
      };

      const handleNewRequestChange = (field, value) => {
        setNewRequest(prev => ({
          ...prev,
          [field]: value
        }));
      };

      const handleViewRequest = (request) => {
        setSelectedRequest(request);
        setIsModalOpen(true);
      };

      const handleStatusChange = (requestId, newStatus) => {
        setRequests(prev => prev.map(request => 
          request.id === requestId 
            ? { 
                ...request, 
                status: newStatus, 
                updatedAt: new Date().toISOString(),
                completedAt: newStatus === 'Completed' ? new Date().toISOString() : request.completedAt
              }
            : request
        ));
        showSuccess(`„Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç ${requestId} „ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ„Çí„Äå${newStatus}„Äç„Å´Êõ¥Êñ∞„Åó„Åæ„Åó„Åü`);
      };

      const ServiceRequestModal = ({ request, isOpen, onClose }) => {
        if (!request) return null;

        return (
          <Modal isOpen={isOpen} onClose={onClose} title={`„Çµ„Éº„Éì„ÇπË¶ÅÊ±ÇË©≥Á¥∞ - ${request.id}`} size="lg">
            <div className="space-y-6">
              {/* Âü∫Êú¨ÊÉÖÂ†± */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700">„Çø„Ç§„Éà„É´</label>
                  <p className="mt-1 text-sm text-gray-900">{request.title}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">Ë¶ÅÊ±ÇID</label>
                  <p className="mt-1 text-sm text-gray-900">{request.id}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">„Çπ„ÉÜ„Éº„Çø„Çπ</label>
                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(request.status)}`}>
                    {request.status}
                  </span>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">ÂÑ™ÂÖàÂ∫¶</label>
                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPriorityColor(request.priority)}`}>
                    {request.priority}
                  </span>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">„Ç´„ÉÜ„Ç¥„É™„Éº</label>
                  <p className="mt-1 text-sm text-gray-900">{request.category}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">Á∑äÊÄ•Â∫¶</label>
                  <p className="mt-1 text-sm text-gray-900">{request.urgency}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">Áî≥Ë´ãËÄÖ</label>
                  <p className="mt-1 text-sm text-gray-900">{request.requester}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">ÊãÖÂΩìËÄÖ</label>
                  <p className="mt-1 text-sm text-gray-900">{request.assignee}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">ÊâøË™çËÄÖ</label>
                  <p className="mt-1 text-sm text-gray-900">{request.approver}</p>
                </div>
              </div>

              {/* Ë©≥Á¥∞Ë™¨Êòé */}
              <div>
                <label className="block text-sm font-medium text-gray-700">Ë©≥Á¥∞Ë™¨Êòé</label>
                <p className="mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md">{request.description}</p>
              </div>

              {/* „Éì„Ç∏„Éç„ÇπÊ≠£ÂΩìÊÄß */}
              <div>
                <label className="block text-sm font-medium text-gray-700">„Éì„Ç∏„Éç„ÇπÊ≠£ÂΩìÊÄß</label>
                <p className="mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md">{request.businessJustification}</p>
              </div>

              {/* „Ç≥„Çπ„Éà„ÉªÊúüÈñìÊÉÖÂ†± */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700">‰∫àÊÉ≥„Ç≥„Çπ„Éà</label>
                  <p className="mt-1 text-sm text-gray-900">{request.estimatedCost}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">‰∫àÊÉ≥ÊúüÈñì</label>
                  <p className="mt-1 text-sm text-gray-900">{request.estimatedDuration}</p>
                </div>
              </div>

              {/* ÊôÇÈñìÊÉÖÂ†± */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700">‰ΩúÊàêÊó•ÊôÇ</label>
                  <p className="mt-1 text-sm text-gray-900">{formatDateTime(request.createdAt)}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">Êõ¥Êñ∞Êó•ÊôÇ</label>
                  <p className="mt-1 text-sm text-gray-900">{formatDateTime(request.updatedAt)}</p>
                </div>
              </div>

              {request.completedAt && (
                <div>
                  <label className="block text-sm font-medium text-gray-700">ÂÆå‰∫ÜÊó•ÊôÇ</label>
                  <p className="mt-1 text-sm text-gray-900">{formatDateTime(request.completedAt)}</p>
                </div>
              )}

              {/* „Çπ„ÉÜ„Éº„Çø„ÇπÊõ¥Êñ∞ */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">„Çπ„ÉÜ„Éº„Çø„ÇπÂ§âÊõ¥</label>
                <div className="flex space-x-2 flex-wrap">
                  {['New', 'Pending Approval', 'Approved', 'In Progress', 'Completed', 'Rejected'].map(status => (
                    <Button
                      key={status}
                      variant={request.status === status ? 'primary' : 'secondary'}
                      size="sm"
                      onClick={() => {
                        handleStatusChange(request.id, status);
                        onClose();
                      }}
                      className="mb-2"
                    >
                      {status}
                    </Button>
                  ))}
                </div>
              </div>
            </div>
          </Modal>
        );
      };

      const CreateServiceRequestModal = () => {
        return (
          <Modal 
            isOpen={isCreateModalOpen} 
            onClose={() => setIsCreateModalOpen(false)} 
            title="Êñ∞Ë¶è„Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç‰ΩúÊàê" 
            size="lg"
          >
            <div className="space-y-6">
              {/* Âü∫Êú¨ÊÉÖÂ†± */}
              <div className="grid grid-cols-1 gap-4">
                <Input
                  label="„Çø„Ç§„Éà„É´"
                  required
                  placeholder="„Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç„ÅÆ„Çø„Ç§„Éà„É´„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                  value={newRequest.title}
                  onChange={(e) => handleNewRequestChange('title', e.target.value)}
                />
                
                <Textarea
                  label="Ë©≥Á¥∞Ë™¨Êòé"
                  required
                  rows={4}
                  placeholder="„Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç„ÅÆË©≥Á¥∞Ë™¨Êòé„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                  value={newRequest.description}
                  onChange={(e) => handleNewRequestChange('description', e.target.value)}
                />

                <Textarea
                  label="„Éì„Ç∏„Éç„ÇπÊ≠£ÂΩìÊÄß"
                  rows={3}
                  placeholder="„Åì„ÅÆË¶ÅÊ±Ç„ÅåÂøÖË¶Å„Å™ÁêÜÁî±„ÇíË®òËºâ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºà‰ªªÊÑèÔºâ"
                  value={newRequest.businessJustification}
                  onChange={(e) => handleNewRequestChange('businessJustification', e.target.value)}
                />
              </div>

              {/* ÂàÜÈ°ûÊÉÖÂ†± */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Select
                  label="„Ç´„ÉÜ„Ç¥„É™„Éº"
                  required
                  value={newRequest.category}
                  onChange={(e) => handleNewRequestChange('category', e.target.value)}
                  options={[
                    { value: 'Account Management', label: 'Account Management - „Ç¢„Ç´„Ç¶„É≥„ÉàÁÆ°ÁêÜ' },
                    { value: 'Access Request', label: 'Access Request - „Ç¢„ÇØ„Çª„ÇπÊ®©Èôê' },
                    { value: 'Software Request', label: 'Software Request - „ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢' },
                    { value: 'Hardware Request', label: 'Hardware Request - „Éè„Éº„Éâ„Ç¶„Çß„Ç¢' },
                    { value: 'Training Request', label: 'Training Request - Á†î‰øÆ' },
                    { value: 'Data Request', label: 'Data Request - „Éá„Éº„Çø' },
                    { value: 'Infrastructure', label: 'Infrastructure - „Ç§„É≥„Éï„É©' },
                    { value: 'Other', label: 'Other - „Åù„ÅÆ‰ªñ' }
                  ]}
                />
                
                <Select
                  label="ÂÑ™ÂÖàÂ∫¶"
                  required
                  value={newRequest.priority}
                  onChange={(e) => handleNewRequestChange('priority', e.target.value)}
                  options={[
                    { value: 'Low', label: 'Low - ‰Ωé' },
                    { value: 'Medium', label: 'Medium - ‰∏≠' },
                    { value: 'High', label: 'High - È´ò' },
                    { value: 'Critical', label: 'Critical - Á∑äÊÄ•' }
                  ]}
                />
              </div>

              <div className="grid grid-cols-1 md:grid-cols-1 gap-4">
                <Select
                  label="Á∑äÊÄ•Â∫¶"
                  required
                  value={newRequest.urgency}
                  onChange={(e) => handleNewRequestChange('urgency', e.target.value)}
                  options={[
                    { value: 'Low', label: 'Low - ‰Ωé' },
                    { value: 'Medium', label: 'Medium - ‰∏≠' },
                    { value: 'High', label: 'High - È´ò' },
                    { value: 'Critical', label: 'Critical - Á∑äÊÄ•' }
                  ]}
                />
              </div>

              {/* Ê≥®ÊÑèÊõ∏„Åç */}
              <div className="bg-green-50 border-l-4 border-green-400 p-4">
                <div className="flex">
                  <div className="flex-shrink-0">
                    <span className="text-green-400">üìù</span>
                  </div>
                  <div className="ml-3">
                    <p className="text-sm text-green-700">
                      <strong>Ê≥®ÊÑè:</strong> „Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç„ÅØ‰ΩúÊàêÂæå„ÄÅ„Çπ„ÉÜ„Éº„Çø„Çπ„ÄåNew„Äç„ÅßÈñãÂßã„Åï„Çå„Åæ„Åô„ÄÇ
                      ÊâøË™ç„Éó„É≠„Çª„Çπ„ÇíÁµå„Å¶ÂÆüË°å„Åï„Çå„Åæ„Åô„ÄÇ
                    </p>
                  </div>
                </div>
              </div>

              {/* „Éú„Çø„É≥ */}
              <div className="flex justify-end space-x-3 pt-4 border-t">
                <Button
                  variant="secondary"
                  onClick={() => setIsCreateModalOpen(false)}
                >
                  „Ç≠„É£„É≥„Çª„É´
                </Button>
                <Button
                  variant="primary"
                  onClick={handleCreateRequest}
                  disabled={!newRequest.title.trim() || !newRequest.description.trim()}
                >
                  <span className="mr-2">üìù</span>
                  „Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç‰ΩúÊàê
                </Button>
              </div>
            </div>
          </Modal>
        );
      };

      if (loading) {
        return (
          <div className="flex items-center justify-center h-64">
            <LoadingSpinner size="lg" />
            <p className="ml-4 text-lg text-slate-700">„Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç„Éá„Éº„ÇøË™≠„ÅøËæº„Åø‰∏≠...</p>
          </div>
        );
      }

      return (
        <div className="space-y-6">
          {/* „Éò„ÉÉ„ÉÄ„Éº */}
          <div className="flex justify-between items-center">
            <div>
              <h1 className="text-3xl font-bold text-slate-800">„Çµ„Éº„Éì„ÇπË¶ÅÊ±ÇÁÆ°ÁêÜ</h1>
              <p className="text-slate-600">„É¶„Éº„Ç∂„ÉºÁî≥Ë´ã„Å®Ë¶ÅÊ±ÇÁÆ°ÁêÜ</p>
            </div>
            <Button variant="primary" onClick={() => setIsCreateModalOpen(true)}>
              <span className="mr-2">üìù</span>
              Êñ∞Ë¶è„Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç
            </Button>
          </div>

          {/* Áµ±Ë®à„Ç´„Éº„Éâ */}
          <div className="grid grid-cols-1 sm:grid-cols-5 gap-4">
            {[
              { label: 'Êñ∞Ë¶è', count: requests.filter(r => r.status === 'New').length, color: 'blue' },
              { label: 'ÊâøË™çÂæÖ„Å°', count: requests.filter(r => r.status === 'Pending Approval').length, color: 'yellow' },
              { label: 'ÊâøË™çÊ∏à„Åø', count: requests.filter(r => r.status === 'Approved').length, color: 'green' },
              { label: 'ÂÆüË°å‰∏≠', count: requests.filter(r => r.status === 'In Progress').length, color: 'indigo' },
              { label: 'ÂÆå‰∫Ü', count: requests.filter(r => r.status === 'Completed').length, color: 'gray' }
            ].map((stat, index) => (
              <Card key={index} className={`border-l-4 border-${stat.color}-500`}>
                <div className="text-center">
                  <div className="text-2xl font-bold text-gray-900">{stat.count}</div>
                  <div className="text-sm text-gray-500">{stat.label}</div>
                </div>
              </Card>
            ))}
          </div>

          {/* „Éï„Ç£„É´„Çø„Éº */}
          <Card title="„Éï„Ç£„É´„Çø„Éº„ÉªÊ§úÁ¥¢">
            <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
              <Input
                placeholder="„Çµ„Éº„Éì„ÇπË¶ÅÊ±ÇÊ§úÁ¥¢..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
              />
              <Select
                value={statusFilter}
                onChange={(e) => setStatusFilter(e.target.value)}
                options={[
                  { value: '', label: 'ÂÖ®„Å¶„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ' },
                  { value: 'New', label: 'New' },
                  { value: 'Pending Approval', label: 'Pending Approval' },
                  { value: 'Approved', label: 'Approved' },
                  { value: 'In Progress', label: 'In Progress' },
                  { value: 'Completed', label: 'Completed' },
                  { value: 'Rejected', label: 'Rejected' }
                ]}
              />
              <Select
                value={categoryFilter}
                onChange={(e) => setCategoryFilter(e.target.value)}
                options={[
                  { value: '', label: 'ÂÖ®„Å¶„ÅÆ„Ç´„ÉÜ„Ç¥„É™„Éº' },
                  { value: 'Account Management', label: 'Account Management' },
                  { value: 'Access Request', label: 'Access Request' },
                  { value: 'Software Request', label: 'Software Request' },
                  { value: 'Hardware Request', label: 'Hardware Request' },
                  { value: 'Training Request', label: 'Training Request' }
                ]}
              />
              <Button 
                variant="secondary"
                onClick={() => {
                  setSearchTerm('');
                  setStatusFilter('');
                  setCategoryFilter('');
                  setCurrentPage(1);
                }}
              >
                „ÇØ„É™„Ç¢
              </Button>
            </div>
          </Card>

          {/* „Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç„ÉÜ„Éº„Éñ„É´ */}
          <Card>
            <div className="overflow-x-auto">
              <table className="min-w-full divide-y divide-gray-200">
                <thead className="bg-gray-50">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">„Çø„Ç§„Éà„É´</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">„Ç´„ÉÜ„Ç¥„É™„Éº</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Áî≥Ë´ãËÄÖ</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‰ΩúÊàêÊó•ÊôÇ</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody className="bg-white divide-y divide-gray-200">
                  {paginatedRequests.map((request) => (
                    <tr key={request.id} className="hover:bg-gray-50">
                      <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                        {request.id}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <div className="text-sm font-medium text-gray-900">{request.title}</div>
                        <div className="text-sm text-gray-500 truncate max-w-xs">{request.description}</div>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(request.status)}`}>
                          {request.status}
                        </span>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {request.category}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {request.requester}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        {formatDateTime(request.createdAt)}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                        <Button variant="ghost" size="sm" onClick={() => handleViewRequest(request)}>
                          Ë©≥Á¥∞
                        </Button>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>

            {/* „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥ */}
            {totalPages > 1 && (
              <div className="flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6">
                <div className="flex flex-1 justify-between sm:hidden">
                  <Button
                    variant="secondary"
                    disabled={currentPage === 1}
                    onClick={() => setCurrentPage(prev => prev - 1)}
                  >
                    Ââç„Å∏
                  </Button>
                  <Button
                    variant="secondary"
                    disabled={currentPage === totalPages}
                    onClick={() => setCurrentPage(prev => prev + 1)}
                  >
                    Ê¨°„Å∏
                  </Button>
                </div>
                <div className="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
                  <div>
                    <p className="text-sm text-gray-700">
                      <span className="font-medium">{(currentPage - 1) * itemsPerPage + 1}</span>
                      {' '}„Åã„Çâ{' '}
                      <span className="font-medium">
                        {Math.min(currentPage * itemsPerPage, filteredRequests.length)}
                      </span>
                      {' '}‰ª∂„ÇíË°®Á§∫ (ÂÖ®{' '}
                      <span className="font-medium">{filteredRequests.length}</span>
                      {' '}‰ª∂‰∏≠)
                    </p>
                  </div>
                  <div className="flex space-x-2">
                    <Button
                      variant="secondary"
                      size="sm"
                      disabled={currentPage === 1}
                      onClick={() => setCurrentPage(prev => prev - 1)}
                    >
                      Ââç„Å∏
                    </Button>
                    {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => (
                      <Button
                        key={page}
                        variant={currentPage === page ? 'primary' : 'secondary'}
                        size="sm"
                        onClick={() => setCurrentPage(page)}
                      >
                        {page}
                      </Button>
                    ))}
                    <Button
                      variant="secondary"
                      size="sm"
                      disabled={currentPage === totalPages}
                      onClick={() => setCurrentPage(prev => prev + 1)}
                    >
                      Ê¨°„Å∏
                    </Button>
                  </div>
                </div>
              </div>
            )}
          </Card>

          {/* „Çµ„Éº„Éì„ÇπË¶ÅÊ±ÇË©≥Á¥∞„É¢„Éº„ÉÄ„É´ */}
          <ServiceRequestModal
            request={selectedRequest}
            isOpen={isModalOpen}
            onClose={() => {
              setIsModalOpen(false);
              setSelectedRequest(null);
            }}
          />

          {/* Êñ∞Ë¶è„Çµ„Éº„Éì„ÇπË¶ÅÊ±Ç‰ΩúÊàê„É¢„Éº„ÉÄ„É´ */}
          <CreateServiceRequestModal />
        </div>
      );
    };

    // ==========================================
    // Asset Management Page (CMDB)
    // ==========================================
    
    const AssetManagementPage = () => {
      const { showSuccess, showError } = useToast();
      const [assets, setAssets] = useState([]);
      const [loading, setLoading] = useState(true);
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [selectedAsset, setSelectedAsset] = useState(null);
      const [searchTerm, setSearchTerm] = useState('');
      const [typeFilter, setTypeFilter] = useState('');
      const [statusFilter, setStatusFilter] = useState('');
      const [locationFilter, setLocationFilter] = useState('');
      const [currentPage, setCurrentPage] = useState(1);
      const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);
      const [newAsset, setNewAsset] = useState({
        name: '',
        description: '',
        type: 'Server',
        status: 'Active',
        location: '',
        owner: '',
        manufacturer: '',
        model: '',
        serialNumber: '',
        purchaseDate: '',
        warrantyDate: '',
        cost: ''
      });
      const itemsPerPage = 10;

      // Sample asset data
      const sampleAssets = [
        {
          id: 'AST-001',
          assetTag: 'SRV-001',
          name: 'Web„Çµ„Éº„Éê„Éº01',
          description: '„É°„Ç§„É≥Web„Çµ„Éº„Éê„Éº - Apache + PHP',
          type: 'Server',
          status: 'Active',
          location: '„Éá„Éº„Çø„Çª„É≥„Çø„Éº A-1',
          owner: 'ITÈÉ®',
          manufacturer: 'Dell',
          model: 'PowerEdge R740',
          serialNumber: 'SN123456789',
          ipAddress: '192.168.1.10',
          operatingSystem: 'Ubuntu 22.04 LTS',
          cpu: 'Intel Xeon Silver 4210R',
          memory: '32GB DDR4',
          storage: '1TB SSD',
          purchaseDate: '2023-03-15',
          warrantyDate: '2026-03-15',
          cost: '¬•580,000',
          createdAt: '2023-03-15T10:00:00Z',
          updatedAt: '2024-06-15T14:30:00Z'
        },
        {
          id: 'AST-002',
          assetTag: 'DSK-001',
          name: 'Âñ∂Ê•≠ÈÉ®„Éá„Çπ„ÇØ„Éà„ÉÉ„Éó01',
          description: 'Âñ∂Ê•≠ÈÉ®‰ΩøÁî®„ÅÆ„Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóPC',
          type: 'Desktop',
          status: 'Active',
          location: 'Êú¨Á§æ 3F Âñ∂Ê•≠ÈÉ®',
          owner: 'Âñ∂Ê•≠ÈÉ® Áî∞‰∏≠',
          manufacturer: 'HP',
          model: 'EliteDesk 800 G9',
          serialNumber: 'HP987654321',
          ipAddress: '192.168.100.25',
          operatingSystem: 'Windows 11 Pro',
          cpu: 'Intel Core i7-12700',
          memory: '16GB DDR4',
          storage: '512GB SSD',
          purchaseDate: '2023-08-10',
          warrantyDate: '2026-08-10',
          cost: '¬•180,000',
          createdAt: '2023-08-10T09:00:00Z',
          updatedAt: '2024-05-20T11:15:00Z'
        },
        {
          id: 'AST-003',
          assetTag: 'LAP-001',
          name: 'ÈñãÁô∫Áî®„Éé„Éº„ÉàPC',
          description: '„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢ÈñãÁô∫Áî®„Éé„Éº„Éà„Éë„ÇΩ„Ç≥„É≥',
          type: 'Laptop',
          status: 'Active',
          location: 'Êú¨Á§æ 2F ÈñãÁô∫ÈÉ®',
          owner: 'ÈñãÁô∫ÈÉ® Â±±Áî∞',
          manufacturer: 'Lenovo',
          model: 'ThinkPad P1 Gen 5',
          serialNumber: 'LN456789123',
          ipAddress: 'DHCP',
          operatingSystem: 'Windows 11 Pro',
          cpu: 'Intel Core i9-12900H',
          memory: '32GB DDR5',
          storage: '1TB NVMe SSD',
          purchaseDate: '2024-01-20',
          warrantyDate: '2027-01-20',
          cost: '¬•420,000',
          createdAt: '2024-01-20T14:00:00Z',
          updatedAt: '2024-06-10T16:45:00Z'
        },
        {
          id: 'AST-004',
          assetTag: 'NET-001',
          name: '„É°„Ç§„É≥„Çπ„Ç§„ÉÉ„ÉÅ',
          description: '„Éá„Éº„Çø„Çª„É≥„Çø„Éº„É°„Ç§„É≥„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Çπ„Ç§„ÉÉ„ÉÅ',
          type: 'Network Equipment',
          status: 'Active',
          location: '„Éá„Éº„Çø„Çª„É≥„Çø„Éº B-1',
          owner: '„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÁÆ°ÁêÜËÄÖ',
          manufacturer: 'Cisco',
          model: 'Catalyst 9300-48P',
          serialNumber: 'CS789123456',
          ipAddress: '192.168.1.1',
          operatingSystem: 'Cisco IOS XE',
          cpu: 'N/A',
          memory: '8GB',
          storage: '16GB Flash',
          purchaseDate: '2022-11-05',
          warrantyDate: '2025-11-05',
          cost: '¬•950,000',
          createdAt: '2022-11-05T13:30:00Z',
          updatedAt: '2024-04-12T10:20:00Z'
        },
        {
          id: 'AST-005',
          assetTag: 'PRN-001',
          name: '„Ç´„É©„Éº„É¨„Éº„Ç∂„Éº„Éó„É™„É≥„Çø„Éº',
          description: 'Á∑èÂãôÈÉ®ÂÖ±Áî®„Ç´„É©„Éº„É¨„Éº„Ç∂„Éº„Éó„É™„É≥„Çø„Éº',
          type: 'Printer',
          status: 'Maintenance',
          location: 'Êú¨Á§æ 1F Á∑èÂãôÈÉ®',
          owner: 'Á∑èÂãôÈÉ®',
          manufacturer: 'Canon',
          model: 'imageRUNNER C3520i',
          serialNumber: 'CN321654987',
          ipAddress: '192.168.200.50',
          operatingSystem: 'N/A',
          cpu: 'N/A',
          memory: 'N/A',
          storage: 'N/A',
          purchaseDate: '2021-06-15',
          warrantyDate: '2024-06-15',
          cost: '¬•320,000',
          createdAt: '2021-06-15T11:00:00Z',
          updatedAt: '2024-06-18T09:30:00Z'
        },
        {
          id: 'AST-006',
          assetTag: 'STO-001',
          name: '„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„Çπ„Éà„É¨„Éº„Ç∏',
          description: '„Éá„Éº„Çø„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÁî®NAS„Çπ„Éà„É¨„Éº„Ç∏',
          type: 'Storage',
          status: 'Active',
          location: '„Éá„Éº„Çø„Çª„É≥„Çø„Éº C-1',
          owner: '„Ç∑„Çπ„ÉÜ„É†ÁÆ°ÁêÜËÄÖ',
          manufacturer: 'Synology',
          model: 'DS1821+',
          serialNumber: 'SY147258369',
          ipAddress: '192.168.1.100',
          operatingSystem: 'DiskStation Manager 7.1',
          cpu: 'AMD Ryzen V1500B',
          memory: '32GB DDR4',
          storage: '48TB (8x6TB RAID 6)',
          purchaseDate: '2023-12-10',
          warrantyDate: '2026-12-10',
          cost: '¬•680,000',
          createdAt: '2023-12-10T15:00:00Z',
          updatedAt: '2024-06-01T12:00:00Z'
        }
      ];

      useEffect(() => {
        // Simulate API call
        setTimeout(() => {
          setAssets(sampleAssets);
          setLoading(false);
        }, 1000);
      }, []);

      // Filter and search assets
      const filteredAssets = assets.filter(asset => {
        const matchesSearch = asset.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             asset.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             asset.assetTag.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             asset.serialNumber.toLowerCase().includes(searchTerm.toLowerCase());
        const matchesType = !typeFilter || asset.type === typeFilter;
        const matchesStatus = !statusFilter || asset.status === statusFilter;
        const matchesLocation = !locationFilter || asset.location.toLowerCase().includes(locationFilter.toLowerCase());
        
        return matchesSearch && matchesType && matchesStatus && matchesLocation;
      });

      // Pagination
      const totalPages = Math.ceil(filteredAssets.length / itemsPerPage);
      const paginatedAssets = filteredAssets.slice(
        (currentPage - 1) * itemsPerPage,
        currentPage * itemsPerPage
      );

      const getStatusColor = (status) => {
        switch (status) {
          case 'Active': return 'bg-green-100 text-green-800';
          case 'Inactive': return 'bg-gray-100 text-gray-800';
          case 'Maintenance': return 'bg-yellow-100 text-yellow-800';
          case 'Retired': return 'bg-red-100 text-red-800';
          case 'Disposed': return 'bg-purple-100 text-purple-800';
          default: return 'bg-gray-100 text-gray-800';
        }
      };

      const getTypeIcon = (type) => {
        switch (type) {
          case 'Server': return 'üñ•Ô∏è';
          case 'Desktop': return 'üíª';
          case 'Laptop': return 'üíª';
          case 'Network Equipment': return 'üåê';
          case 'Printer': return 'üñ®Ô∏è';
          case 'Storage': return 'üíæ';
          case 'Mobile Device': return 'üì±';
          case 'Monitor': return 'üì∫';
          case 'Tablet': return 'üì±';
          case 'Phone': return '‚òéÔ∏è';
          case 'Camera': return 'üì∑';
          case 'Audio Equipment': return 'üéµ';
          case 'Projector': return 'üìΩÔ∏è';
          case 'Scanner': return 'üìÑ';
          case 'Other': return 'üì¶';
          default: return 'üì¶';
        }
      };

      const formatDateTime = (dateString) => {
        const date = new Date(dateString);
        return date.toLocaleString('ja-JP', {
          year: 'numeric',
          month: '2-digit',
          day: '2-digit',
          hour: '2-digit',
          minute: '2-digit'
        });
      };

      const formatDate = (dateString) => {
        if (!dateString) return '-';
        const date = new Date(dateString);
        return date.toLocaleDateString('ja-JP');
      };

      const generateAssetTag = (type) => {
        const prefixes = {
          'Server': 'SRV',
          'Desktop': 'DSK',
          'Laptop': 'LAP',
          'Network Equipment': 'NET',
          'Printer': 'PRN',
          'Storage': 'STO',
          'Mobile Device': 'MOB',
          'Monitor': 'MON',
          'Tablet': 'TAB',
          'Phone': 'PHN',
          'Camera': 'CAM',
          'Audio Equipment': 'AUD',
          'Projector': 'PRJ',
          'Scanner': 'SCN',
          'Other': 'OTH'
        };
        
        const prefix = prefixes[type] || 'AST';
        const existingTags = assets
          .filter(asset => asset.assetTag.startsWith(prefix))
          .map(asset => parseInt(asset.assetTag.split('-')[1]))
          .filter(num => !isNaN(num));
        
        const maxNum = existingTags.length > 0 ? Math.max(...existingTags) : 0;
        return `${prefix}-${String(maxNum + 1).padStart(3, '0')}`;
      };

      const generateAssetId = () => {
        const maxId = assets.reduce((max, asset) => {
          const num = parseInt(asset.id.split('-')[1]);
          return num > max ? num : max;
        }, 0);
        return `AST-${String(maxId + 1).padStart(3, '0')}`;
      };

      const handleCreateAsset = () => {
        if (!newAsset.name.trim()) {
          showError('Ë≥áÁî£Âêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
          return;
        }
        if (!newAsset.location.trim()) {
          showError('Ë®≠ÁΩÆÂ†¥ÊâÄ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
          return;
        }

        const assetData = {
          id: generateAssetId(),
          assetTag: generateAssetTag(newAsset.type),
          name: newAsset.name.trim(),
          description: newAsset.description.trim() || 'Ë™¨Êòé„Å™„Åó',
          type: newAsset.type,
          status: newAsset.status,
          location: newAsset.location.trim(),
          owner: newAsset.owner.trim() || 'Êú™Ë®≠ÂÆö',
          manufacturer: newAsset.manufacturer.trim() || 'Êú™Ë®≠ÂÆö',
          model: newAsset.model.trim() || 'Êú™Ë®≠ÂÆö',
          serialNumber: newAsset.serialNumber.trim() || 'Êú™Ë®≠ÂÆö',
          ipAddress: 'N/A',
          operatingSystem: 'N/A',
          cpu: 'N/A',
          memory: 'N/A',
          storage: 'N/A',
          purchaseDate: newAsset.purchaseDate || null,
          warrantyDate: newAsset.warrantyDate || null,
          cost: newAsset.cost.trim() || 'Êú™Ë®≠ÂÆö',
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString()
        };

        setAssets(prev => [assetData, ...prev]);
        setNewAsset({
          name: '',
          description: '',
          type: 'Server',
          status: 'Active',
          location: '',
          owner: '',
          manufacturer: '',
          model: '',
          serialNumber: '',
          purchaseDate: '',
          warrantyDate: '',
          cost: ''
        });
        setIsCreateModalOpen(false);
        showSuccess(`Êñ∞Ë¶èË≥áÁî£ ${assetData.assetTag} „Çí‰ΩúÊàê„Åó„Åæ„Åó„Åü`);
      };

      const handleNewAssetChange = (field, value) => {
        setNewAsset(prev => ({
          ...prev,
          [field]: value
        }));
      };

      const handleViewAsset = (asset) => {
        setSelectedAsset(asset);
        setIsModalOpen(true);
      };

      const handleStatusChange = (assetId, newStatus) => {
        setAssets(prev => prev.map(asset => 
          asset.id === assetId 
            ? { ...asset, status: newStatus, updatedAt: new Date().toISOString() }
            : asset
        ));
        showSuccess(`Ë≥áÁî£ ${assetId} „ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ„Çí„Äå${newStatus}„Äç„Å´Êõ¥Êñ∞„Åó„Åæ„Åó„Åü`);
      };

      const AssetModal = ({ asset, isOpen, onClose }) => {
        if (!asset) return null;

        return (
          <Modal isOpen={isOpen} onClose={onClose} title={`Ë≥áÁî£Ë©≥Á¥∞ - ${asset.assetTag}`} size="xl">
            <div className="space-y-6">
              {/* Âü∫Êú¨ÊÉÖÂ†± */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700">Ë≥áÁî£Âêç</label>
                  <p className="mt-1 text-sm text-gray-900">{asset.name}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">Ë≥áÁî£„Çø„Ç∞</label>
                  <p className="mt-1 text-sm text-gray-900 font-mono">{asset.assetTag}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">Á®ÆÈ°û</label>
                  <p className="mt-1 text-sm text-gray-900">
                    <span className="mr-2">{getTypeIcon(asset.type)}</span>
                    {asset.type}
                  </p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">„Çπ„ÉÜ„Éº„Çø„Çπ</label>
                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(asset.status)}`}>
                    {asset.status}
                  </span>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">Ë®≠ÁΩÆÂ†¥ÊâÄ</label>
                  <p className="mt-1 text-sm text-gray-900">{asset.location}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">ÊâÄÊúâËÄÖ</label>
                  <p className="mt-1 text-sm text-gray-900">{asset.owner}</p>
                </div>
              </div>

              {/* Ë©≥Á¥∞Ë™¨Êòé */}
              <div>
                <label className="block text-sm font-medium text-gray-700">Ë™¨Êòé</label>
                <p className="mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md">{asset.description}</p>
              </div>

              {/* „Éè„Éº„Éâ„Ç¶„Çß„Ç¢ÊÉÖÂ†± */}
              <div>
                <h4 className="text-lg font-medium text-gray-900 mb-3">„Éè„Éº„Éâ„Ç¶„Çß„Ç¢ÊÉÖÂ†±</h4>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700">„É°„Éº„Ç´„Éº</label>
                    <p className="mt-1 text-sm text-gray-900">{asset.manufacturer}</p>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">„É¢„Éá„É´</label>
                    <p className="mt-1 text-sm text-gray-900">{asset.model}</p>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">„Ç∑„É™„Ç¢„É´Áï™Âè∑</label>
                    <p className="mt-1 text-sm text-gray-900 font-mono">{asset.serialNumber}</p>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">IP„Ç¢„Éâ„É¨„Çπ</label>
                    <p className="mt-1 text-sm text-gray-900 font-mono">{asset.ipAddress}</p>
                  </div>
                </div>
              </div>

              {/* „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†± */}
              <div>
                <h4 className="text-lg font-medium text-gray-900 mb-3">„Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±</h4>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700">OS</label>
                    <p className="mt-1 text-sm text-gray-900">{asset.operatingSystem}</p>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">CPU</label>
                    <p className="mt-1 text-sm text-gray-900">{asset.cpu}</p>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">„É°„É¢„É™</label>
                    <p className="mt-1 text-sm text-gray-900">{asset.memory}</p>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">„Çπ„Éà„É¨„Éº„Ç∏</label>
                    <p className="mt-1 text-sm text-gray-900">{asset.storage}</p>
                  </div>
                </div>
              </div>

              {/* Ë≥ºÂÖ•„Éª‰øùË®ºÊÉÖÂ†± */}
              <div>
                <h4 className="text-lg font-medium text-gray-900 mb-3">Ë≥ºÂÖ•„Éª‰øùË®ºÊÉÖÂ†±</h4>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700">Ë≥ºÂÖ•Êó•</label>
                    <p className="mt-1 text-sm text-gray-900">{formatDate(asset.purchaseDate)}</p>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">‰øùË®ºÊúüÈôê</label>
                    <p className="mt-1 text-sm text-gray-900">{formatDate(asset.warrantyDate)}</p>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700">Ë≥ºÂÖ•‰æ°Ê†º</label>
                    <p className="mt-1 text-sm text-gray-900">{asset.cost}</p>
                  </div>
                </div>
              </div>

              {/* ÊôÇÈñìÊÉÖÂ†± */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700">ÁôªÈå≤Êó•ÊôÇ</label>
                  <p className="mt-1 text-sm text-gray-900">{formatDateTime(asset.createdAt)}</p>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700">Êõ¥Êñ∞Êó•ÊôÇ</label>
                  <p className="mt-1 text-sm text-gray-900">{formatDateTime(asset.updatedAt)}</p>
                </div>
              </div>

              {/* „Çπ„ÉÜ„Éº„Çø„ÇπÊõ¥Êñ∞ */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">„Çπ„ÉÜ„Éº„Çø„ÇπÂ§âÊõ¥</label>
                <div className="flex space-x-2 flex-wrap">
                  {['Active', 'Inactive', 'Maintenance', 'Retired', 'Disposed'].map(status => (
                    <Button
                      key={status}
                      variant={asset.status === status ? 'primary' : 'secondary'}
                      size="sm"
                      onClick={() => {
                        handleStatusChange(asset.id, status);
                        onClose();
                      }}
                      className="mb-2"
                    >
                      {status}
                    </Button>
                  ))}
                </div>
              </div>
            </div>
          </Modal>
        );
      };

      const CreateAssetModal = () => {
        return (
          <Modal 
            isOpen={isCreateModalOpen} 
            onClose={() => setIsCreateModalOpen(false)} 
            title="Êñ∞Ë¶èË≥áÁî£ÁôªÈå≤" 
            size="lg"
          >
            <div className="space-y-6">
              {/* Âü∫Êú¨ÊÉÖÂ†± */}
              <div className="grid grid-cols-1 gap-4">
                <Input
                  label="Ë≥áÁî£Âêç"
                  required
                  placeholder="Ë≥áÁî£Âêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                  value={newAsset.name}
                  onChange={(e) => handleNewAssetChange('name', e.target.value)}
                />
                
                <Textarea
                  label="Ë™¨Êòé"
                  rows={3}
                  placeholder="Ë≥áÁî£„ÅÆË©≥Á¥∞Ë™¨Êòé„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºà‰ªªÊÑèÔºâ"
                  value={newAsset.description}
                  onChange={(e) => handleNewAssetChange('description', e.target.value)}
                />

                <Input
                  label="Ë®≠ÁΩÆÂ†¥ÊâÄ"
                  required
                  placeholder="Ë®≠ÁΩÆÂ†¥ÊâÄ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                  value={newAsset.location}
                  onChange={(e) => handleNewAssetChange('location', e.target.value)}
                />

                <Input
                  label="ÊâÄÊúâËÄÖ"
                  placeholder="ÊâÄÊúâËÄÖ„ÉªÊãÖÂΩìËÄÖ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                  value={newAsset.owner}
                  onChange={(e) => handleNewAssetChange('owner', e.target.value)}
                />
              </div>

              {/* ÂàÜÈ°ûÊÉÖÂ†± */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Select
                  label="Ë≥áÁî£Á®ÆÈ°û"
                  required
                  value={newAsset.type}
                  onChange={(e) => handleNewAssetChange('type', e.target.value)}
                  options={[
                    { value: 'Server', label: 'üñ•Ô∏è Server - „Çµ„Éº„Éê„Éº' },
                    { value: 'Desktop', label: 'üíª Desktop - „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó' },
                    { value: 'Laptop', label: 'üíª Laptop - „Éé„Éº„ÉàPC' },
                    { value: 'Network Equipment', label: 'üåê Network Equipment - „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊ©üÂô®' },
                    { value: 'Printer', label: 'üñ®Ô∏è Printer - „Éó„É™„É≥„Çø„Éº' },
                    { value: 'Storage', label: 'üíæ Storage - „Çπ„Éà„É¨„Éº„Ç∏' },
                    { value: 'Mobile Device', label: 'üì± Mobile Device - „É¢„Éê„Ç§„É´Á´ØÊú´' },
                    { value: 'Monitor', label: 'üì∫ Monitor - „É¢„Éã„Çø„Éº' },
                    { value: 'Tablet', label: 'üì± Tablet - „Çø„Éñ„É¨„ÉÉ„Éà' },
                    { value: 'Phone', label: '‚òéÔ∏è Phone - ÈõªË©±Ê©ü' },
                    { value: 'Camera', label: 'üì∑ Camera - „Ç´„É°„É©' },
                    { value: 'Audio Equipment', label: 'üéµ Audio Equipment - Èü≥ÈüøÊ©üÂô®' },
                    { value: 'Projector', label: 'üìΩÔ∏è Projector - „Éó„É≠„Ç∏„Çß„ÇØ„Çø„Éº' },
                    { value: 'Scanner', label: 'üìÑ Scanner - „Çπ„Ç≠„É£„Éä„Éº' },
                    { value: 'Other', label: 'üì¶ Other - „Åù„ÅÆ‰ªñ' }
                  ]}
                />
                
                <Select
                  label="„Çπ„ÉÜ„Éº„Çø„Çπ"
                  required
                  value={newAsset.status}
                  onChange={(e) => handleNewAssetChange('status', e.target.value)}
                  options={[
                    { value: 'Active', label: 'Active - Á®ºÂÉç‰∏≠' },
                    { value: 'Inactive', label: 'Inactive - ÂÅúÊ≠¢‰∏≠' },
                    { value: 'Maintenance', label: 'Maintenance - „É°„É≥„ÉÜ„Éä„É≥„Çπ‰∏≠' },
                    { value: 'Retired', label: 'Retired - ÂªÉÊ≠¢' },
                    { value: 'Disposed', label: 'Disposed - Âá¶ÂàÜÊ∏à„Åø' }
                  ]}
                />
              </div>

              {/* „Éè„Éº„Éâ„Ç¶„Çß„Ç¢ÊÉÖÂ†± */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Input
                  label="„É°„Éº„Ç´„Éº"
                  placeholder="„É°„Éº„Ç´„ÉºÂêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                  value={newAsset.manufacturer}
                  onChange={(e) => handleNewAssetChange('manufacturer', e.target.value)}
                />

                <Input
                  label="„É¢„Éá„É´"
                  placeholder="„É¢„Éá„É´Âêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                  value={newAsset.model}
                  onChange={(e) => handleNewAssetChange('model', e.target.value)}
                />

                <Input
                  label="„Ç∑„É™„Ç¢„É´Áï™Âè∑"
                  placeholder="„Ç∑„É™„Ç¢„É´Áï™Âè∑„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                  value={newAsset.serialNumber}
                  onChange={(e) => handleNewAssetChange('serialNumber', e.target.value)}
                />

                <Input
                  label="Ë≥ºÂÖ•‰æ°Ê†º"
                  placeholder="‰æã: ¬•100,000"
                  value={newAsset.cost}
                  onChange={(e) => handleNewAssetChange('cost', e.target.value)}
                />
              </div>

              {/* Êó•‰ªòÊÉÖÂ†± */}
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <Input
                  label="Ë≥ºÂÖ•Êó•"
                  type="date"
                  value={newAsset.purchaseDate}
                  onChange={(e) => handleNewAssetChange('purchaseDate', e.target.value)}
                />

                <Input
                  label="‰øùË®ºÊúüÈôê"
                  type="date"
                  value={newAsset.warrantyDate}
                  onChange={(e) => handleNewAssetChange('warrantyDate', e.target.value)}
                />
              </div>

              {/* Ê≥®ÊÑèÊõ∏„Åç */}
              <div className="bg-blue-50 border-l-4 border-blue-400 p-4">
                <div className="flex">
                  <div className="flex-shrink-0">
                    <span className="text-blue-400">üíª</span>
                  </div>
                  <div className="ml-3">
                    <p className="text-sm text-blue-700">
                      <strong>Ê≥®ÊÑè:</strong> Ë≥áÁî£„Çø„Ç∞„ÅØÁ®ÆÈ°û„Å´Âøú„Åò„Å¶Ëá™ÂãïÁîüÊàê„Åï„Çå„Åæ„ÅôÔºà‰æã: SRV-001, DSK-001Ôºâ„ÄÇ
                      Ë©≥Á¥∞„Å™„Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±„ÅØÁôªÈå≤Âæå„Å´Á∑®ÈõÜÂèØËÉΩ„Åß„Åô„ÄÇ
                    </p>
                  </div>
                </div>
              </div>

              {/* „Éú„Çø„É≥ */}
              <div className="flex justify-end space-x-3 pt-4 border-t">
                <Button
                  variant="secondary"
                  onClick={() => setIsCreateModalOpen(false)}
                >
                  „Ç≠„É£„É≥„Çª„É´
                </Button>
                <Button
                  variant="primary"
                  onClick={handleCreateAsset}
                  disabled={!newAsset.name.trim() || !newAsset.location.trim()}
                >
                  <span className="mr-2">üíª</span>
                  Ë≥áÁî£ÁôªÈå≤
                </Button>
              </div>
            </div>
          </Modal>
        );
      };

      if (loading) {
        return (
          <div className="flex items-center justify-center h-64">
            <LoadingSpinner size="lg" />
            <p className="ml-4 text-lg text-slate-700">Ë≥áÁî£„Éá„Éº„ÇøË™≠„ÅøËæº„Åø‰∏≠...</p>
          </div>
        );
      }

      return (
        <div className="space-y-6">
          {/* „Éò„ÉÉ„ÉÄ„Éº */}
          <div className="flex justify-between items-center">
            <div>
              <h1 className="text-3xl font-bold text-slate-800">Ë≥áÁî£ÁÆ°ÁêÜ (CMDB)</h1>
              <p className="text-slate-600">ÊßãÊàêÁÆ°ÁêÜ„Éá„Éº„Çø„Éô„Éº„Çπ - ITË≥áÁî£„ÅÆÂåÖÊã¨ÁöÑÁÆ°ÁêÜ</p>
            </div>
            <Button variant="primary" onClick={() => setIsCreateModalOpen(true)}>
              <span className="mr-2">üíª</span>
              Êñ∞Ë¶èË≥áÁî£ÁôªÈå≤
            </Button>
          </div>

          {/* Áµ±Ë®à„Ç´„Éº„Éâ */}
          <div className="grid grid-cols-1 sm:grid-cols-5 gap-4">
            {[
              { label: 'Á®ºÂÉç‰∏≠', count: assets.filter(a => a.status === 'Active').length, color: 'green' },
              { label: 'ÂÅúÊ≠¢‰∏≠', count: assets.filter(a => a.status === 'Inactive').length, color: 'gray' },
              { label: '„É°„É≥„ÉÜ„Éä„É≥„Çπ', count: assets.filter(a => a.status === 'Maintenance').length, color: 'yellow' },
              { label: 'ÂªÉÊ≠¢', count: assets.filter(a => a.status === 'Retired').length, color: 'red' },
              { label: 'Á∑èË≥áÁî£Êï∞', count: assets.length, color: 'blue' }
            ].map((stat, index) => (
              <Card key={index} className={`border-l-4 border-${stat.color}-500`}>
                <div className="text-center">
                  <div className="text-2xl font-bold text-gray-900">{stat.count}</div>
                  <div className="text-sm text-gray-500">{stat.label}</div>
                </div>
              </Card>
            ))}
          </div>

          {/* „Éï„Ç£„É´„Çø„Éº */}
          <Card title="„Éï„Ç£„É´„Çø„Éº„ÉªÊ§úÁ¥¢">
            <div className="grid grid-cols-1 md:grid-cols-5 gap-4">
              <Input
                placeholder="Ë≥áÁî£Ê§úÁ¥¢..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
              />
              <Select
                value={typeFilter}
                onChange={(e) => setTypeFilter(e.target.value)}
                options={[
                  { value: '', label: 'ÂÖ®„Å¶„ÅÆÁ®ÆÈ°û' },
                  { value: 'Server', label: 'Server' },
                  { value: 'Desktop', label: 'Desktop' },
                  { value: 'Laptop', label: 'Laptop' },
                  { value: 'Network Equipment', label: 'Network Equipment' },
                  { value: 'Printer', label: 'Printer' },
                  { value: 'Storage', label: 'Storage' }
                ]}
              />
              <Select
                value={statusFilter}
                onChange={(e) => setStatusFilter(e.target.value)}
                options={[
                  { value: '', label: 'ÂÖ®„Å¶„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ' },
                  { value: 'Active', label: 'Active' },
                  { value: 'Inactive', label: 'Inactive' },
                  { value: 'Maintenance', label: 'Maintenance' },
                  { value: 'Retired', label: 'Retired' }
                ]}
              />
              <Input
                placeholder="Ë®≠ÁΩÆÂ†¥ÊâÄ„ÅßÁµûËæº..."
                value={locationFilter}
                onChange={(e) => setLocationFilter(e.target.value)}
              />
              <Button 
                variant="secondary"
                onClick={() => {
                  setSearchTerm('');
                  setTypeFilter('');
                  setStatusFilter('');
                  setLocationFilter('');
                  setCurrentPage(1);
                }}
              >
                „ÇØ„É™„Ç¢
              </Button>
            </div>
          </Card>

          {/* Ë≥áÁî£„ÉÜ„Éº„Éñ„É´ */}
          <Card>
            <div className="overflow-x-auto">
              <table className="min-w-full divide-y divide-gray-200">
                <thead className="bg-gray-50">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ë≥áÁî£„Çø„Ç∞</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ë≥áÁî£Âêç</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Á®ÆÈ°û</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ë®≠ÁΩÆÂ†¥ÊâÄ</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ÊâÄÊúâËÄÖ</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Êìç‰Ωú</th>
                  </tr>
                </thead>
                <tbody className="bg-white divide-y divide-gray-200">
                  {paginatedAssets.map((asset) => (
                    <tr key={asset.id} className="hover:bg-gray-50">
                      <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 font-mono">
                        {asset.assetTag}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <div className="text-sm font-medium text-gray-900">{asset.name}</div>
                        <div className="text-sm text-gray-500 truncate max-w-xs">{asset.description}</div>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        <span className="mr-2">{getTypeIcon(asset.type)}</span>
                        {asset.type}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(asset.status)}`}>
                          {asset.status}
                        </span>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {asset.location}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {asset.owner}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                        <Button variant="ghost" size="sm" onClick={() => handleViewAsset(asset)}>
                          Ë©≥Á¥∞
                        </Button>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>

            {/* „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥ */}
            {totalPages > 1 && (
              <div className="flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6">
                <div className="flex flex-1 justify-between sm:hidden">
                  <Button
                    variant="secondary"
                    disabled={currentPage === 1}
                    onClick={() => setCurrentPage(prev => prev - 1)}
                  >
                    Ââç„Å∏
                  </Button>
                  <Button
                    variant="secondary"
                    disabled={currentPage === totalPages}
                    onClick={() => setCurrentPage(prev => prev + 1)}
                  >
                    Ê¨°„Å∏
                  </Button>
                </div>
                <div className="hidden sm:flex sm:flex-1 sm:items-center sm:justify-between">
                  <div>
                    <p className="text-sm text-gray-700">
                      <span className="font-medium">{(currentPage - 1) * itemsPerPage + 1}</span>
                      {' '}„Åã„Çâ{' '}
                      <span className="font-medium">
                        {Math.min(currentPage * itemsPerPage, filteredAssets.length)}
                      </span>
                      {' '}‰ª∂„ÇíË°®Á§∫ (ÂÖ®{' '}
                      <span className="font-medium">{filteredAssets.length}</span>
                      {' '}‰ª∂‰∏≠)
                    </p>
                  </div>
                  <div className="flex space-x-2">
                    <Button
                      variant="secondary"
                      size="sm"
                      disabled={currentPage === 1}
                      onClick={() => setCurrentPage(prev => prev - 1)}
                    >
                      Ââç„Å∏
                    </Button>
                    {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => (
                      <Button
                        key={page}
                        variant={currentPage === page ? 'primary' : 'secondary'}
                        size="sm"
                        onClick={() => setCurrentPage(page)}
                      >
                        {page}
                      </Button>
                    ))}
                    <Button
                      variant="secondary"
                      size="sm"
                      disabled={currentPage === totalPages}
                      onClick={() => setCurrentPage(prev => prev + 1)}
                    >
                      Ê¨°„Å∏
                    </Button>
                  </div>
                </div>
              </div>
            )}
          </Card>

          {/* Ë≥áÁî£Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´ */}
          <AssetModal
            asset={selectedAsset}
            isOpen={isModalOpen}
            onClose={() => {
              setIsModalOpen(false);
              setSelectedAsset(null);
            }}
          />

          {/* Êñ∞Ë¶èË≥áÁî£ÁôªÈå≤„É¢„Éº„ÉÄ„É´ */}
          <CreateAssetModal />
        </div>
      );
    };

    // ==========================================
    // System Settings Page Component
    // ==========================================

    const SystemSettingsPage = () => {
      const { user } = useAuth();
      const { showSuccess, showError } = useToast();
      
      // State management
      const [activeTab, setActiveTab] = useState('general');
      const [settings, setSettings] = useState({});
      const [users, setUsers] = useState([]);
      const [roles, setRoles] = useState([]);
      const [stats, setStats] = useState({});
      const [loading, setLoading] = useState(true);
      const [saving, setSaving] = useState(false);
      
      // Modal states
      const [isUserModalOpen, setIsUserModalOpen] = useState(false);
      const [isCreateUserModalOpen, setIsCreateUserModalOpen] = useState(false);
      const [selectedUser, setSelectedUser] = useState(null);
      
      // User management states
      const [userSearch, setUserSearch] = useState('');
      const [userRoleFilter, setUserRoleFilter] = useState('');
      const [userStatusFilter, setUserStatusFilter] = useState('');
      
      // New user form
      const [newUser, setNewUser] = useState({
        username: '',
        email: '',
        fullName: '',
        role: 'user'
      });

      // Fetch all data
      useEffect(() => {
        const fetchData = async () => {
          try {
            setLoading(true);
            const [settingsRes, usersRes, rolesRes, statsRes] = await Promise.all([
              fetch(`${API_BASE_URL}/api/settings`),
              fetch(`${API_BASE_URL}/api/settings/users`),
              fetch(`${API_BASE_URL}/api/settings/roles`),
              fetch(`${API_BASE_URL}/api/settings/stats`)
            ]);

            if (settingsRes.ok) {
              const settingsData = await settingsRes.json();
              setSettings(settingsData.data);
            }

            if (usersRes.ok) {
              const usersData = await usersRes.json();
              setUsers(usersData.data);
            }

            if (rolesRes.ok) {
              const rolesData = await rolesRes.json();
              setRoles(rolesData.data);
            }

            if (statsRes.ok) {
              const statsData = await statsRes.json();
              setStats(statsData.data);
            }
          } catch (error) {
            console.error('Error fetching system data:', error);
            showError('„Ç∑„Çπ„ÉÜ„É†„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
          } finally {
            setLoading(false);
          }
        };

        fetchData();
      }, []);

      // Update settings
      const updateSettings = async (category, newSettings) => {
        try {
          setSaving(true);
          const response = await fetch(`${API_BASE_URL}/api/settings/${category}`, {
            method: 'PUT',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(newSettings)
          });

          if (response.ok) {
            const result = await response.json();
            setSettings(prev => ({
              ...prev,
              [category]: result.data
            }));
            showSuccess(`${category} Ë®≠ÂÆö„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü`);
          } else {
            showError('Ë®≠ÂÆö„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
          }
        } catch (error) {
          console.error('Error updating settings:', error);
          showError('Ë®≠ÂÆöÊõ¥Êñ∞„Ç®„É©„Éº: ' + error.message);
        } finally {
          setSaving(false);
        }
      };

      // Create user
      const createUser = async () => {
        if (!newUser.username.trim() || !newUser.email.trim() || !newUser.fullName.trim()) {
          showError('„Åô„Åπ„Å¶„ÅÆÂøÖÈ†àÈ†ÖÁõÆ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
          return;
        }

        try {
          const response = await fetch(`${API_BASE_URL}/api/settings/users`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(newUser)
          });

          if (response.ok) {
            const result = await response.json();
            setUsers(prev => [...prev, result.data]);
            setNewUser({ username: '', email: '', fullName: '', role: 'user' });
            setIsCreateUserModalOpen(false);
            showSuccess(`„É¶„Éº„Ç∂„Éº ${result.data.username} „Çí‰ΩúÊàê„Åó„Åæ„Åó„Åü`);
          } else {
            showError('„É¶„Éº„Ç∂„Éº„ÅÆ‰ΩúÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
          }
        } catch (error) {
          console.error('Error creating user:', error);
          showError('„É¶„Éº„Ç∂„Éº‰ΩúÊàê„Ç®„É©„Éº: ' + error.message);
        }
      };

      // Update user
      const updateUser = async (userId, updates) => {
        try {
          const response = await fetch(`${API_BASE_URL}/api/settings/users/${userId}`, {
            method: 'PUT',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(updates)
          });

          if (response.ok) {
            const result = await response.json();
            setUsers(prev => prev.map(user => 
              user.id === userId ? result.data : user
            ));
            showSuccess(`„É¶„Éº„Ç∂„Éº ${result.data.username} „ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü`);
          } else {
            showError('„É¶„Éº„Ç∂„Éº„ÅÆÊõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
          }
        } catch (error) {
          console.error('Error updating user:', error);
          showError('„É¶„Éº„Ç∂„ÉºÊõ¥Êñ∞„Ç®„É©„Éº: ' + error.message);
        }
      };

      // Delete user
      const deleteUser = async (userId) => {
        if (!confirm('„Åì„ÅÆ„É¶„Éº„Ç∂„Éº„ÇíÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü')) return;

        try {
          const response = await fetch(`${API_BASE_URL}/api/settings/users/${userId}`, {
            method: 'DELETE'
          });

          if (response.ok) {
            setUsers(prev => prev.filter(user => user.id !== userId));
            showSuccess('„É¶„Éº„Ç∂„Éº„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü');
          } else {
            showError('„É¶„Éº„Ç∂„Éº„ÅÆÂâäÈô§„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
          }
        } catch (error) {
          console.error('Error deleting user:', error);
          showError('„É¶„Éº„Ç∂„ÉºÂâäÈô§„Ç®„É©„Éº: ' + error.message);
        }
      };

      // Filter users
      const filteredUsers = users.filter(user => {
        const matchesSearch = !userSearch || 
          user.username.toLowerCase().includes(userSearch.toLowerCase()) ||
          user.fullName.toLowerCase().includes(userSearch.toLowerCase()) ||
          user.email.toLowerCase().includes(userSearch.toLowerCase());
        
        const matchesRole = !userRoleFilter || user.role === userRoleFilter;
        const matchesStatus = !userStatusFilter || user.status === userStatusFilter;
        
        return matchesSearch && matchesRole && matchesStatus;
      });

      // Tab configuration
      const tabs = [
        { id: 'general', label: '‰∏ÄËà¨Ë®≠ÂÆö', icon: '‚öôÔ∏è' },
        { id: 'security', label: '„Çª„Ç≠„É•„É™„ÉÜ„Ç£', icon: 'üîí' },
        { id: 'notifications', label: 'ÈÄöÁü•Ë®≠ÂÆö', icon: 'üìß' },
        { id: 'backup', label: '„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó', icon: 'üíæ' },
        { id: 'integration', label: 'Â§ñÈÉ®ÈÄ£Êê∫', icon: 'üîó' },
        { id: 'users', label: '„É¶„Éº„Ç∂„ÉºÁÆ°ÁêÜ', icon: 'üë•' },
        { id: 'roles', label: '„É≠„Éº„É´ÁÆ°ÁêÜ', icon: 'üé≠' },
        { id: 'system', label: '„Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±', icon: 'üìä' }
      ];

      if (loading) {
        return (
          <div className="flex items-center justify-center h-64">
            <LoadingSpinner size="lg" />
            <span className="ml-3 text-lg">„Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö„ÇíË™≠„ÅøËæº„Åø‰∏≠...</span>
          </div>
        );
      }

      return (
        <div className="space-y-6">
          {/* Header */}
          <div className="flex justify-between items-center">
            <div>
              <h1 className="text-3xl font-bold text-gray-900">„Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö</h1>
              <p className="text-gray-600 mt-1">„É¶„Éº„Ç∂„Éº„Éª„É≠„Éº„É´ÁÆ°ÁêÜ„ÄÅ„Ç∑„Çπ„ÉÜ„É†„Éë„É©„É°„Éº„ÇøË®≠ÂÆö</p>
            </div>
            <div className="flex space-x-3">
              <Button 
                variant="outline" 
                onClick={() => window.location.reload()}
              >
                <span className="mr-2">üîÑ</span>
                „É™„É≠„Éº„Éâ
              </Button>
              {activeTab === 'users' && (
                <Button onClick={() => setIsCreateUserModalOpen(true)}>
                  <span className="mr-2">üë§</span>
                  Êñ∞Ë¶è„É¶„Éº„Ç∂„Éº
                </Button>
              )}
            </div>
          </div>

          {/* Statistics Cards */}
          <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
            {[
              { 
                label: 'Á∑è„É¶„Éº„Ç∂„ÉºÊï∞', 
                count: stats.users?.total || 0,
                color: 'text-blue-600',
                bgColor: 'bg-blue-50'
              },
              { 
                label: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„É¶„Éº„Ç∂„Éº', 
                count: stats.users?.active || 0,
                color: 'text-green-600',
                bgColor: 'bg-green-50'
              },
              { 
                label: '„Ç∑„Çπ„ÉÜ„É†„Éê„Éº„Ç∏„Éß„É≥', 
                count: stats.system?.version || 'N/A',
                color: 'text-purple-600',
                bgColor: 'bg-purple-50'
              },
              { 
                label: '„Çª„ÉÉ„Ç∑„Éß„É≥„Çø„Ç§„É†„Ç¢„Ç¶„Éà', 
                count: `${stats.security?.sessionTimeoutMinutes || 30}ÂàÜ`,
                color: 'text-orange-600',
                bgColor: 'bg-orange-50'
              }
            ].map((stat, index) => (
              <Card key={index} className={`p-4 ${stat.bgColor}`}>
                <div className="text-center">
                  <div className={`text-lg font-bold ${stat.color}`}>{stat.count}</div>
                  <div className="text-sm text-gray-600">{stat.label}</div>
                </div>
              </Card>
            ))}
          </div>

          {/* Tabs Navigation */}
          <div className="border-b border-gray-200">
            <nav className="-mb-px flex space-x-8 overflow-x-auto">
              {tabs.map((tab) => (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`flex items-center py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${
                    activeTab === tab.id
                      ? 'border-blue-500 text-blue-600'
                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                  }`}
                >
                  <span className="mr-2">{tab.icon}</span>
                  {tab.label}
                </button>
              ))}
            </nav>
          </div>

          {/* Tab Content */}
          <div className="mt-6">
            {/* General Settings */}
            {activeTab === 'general' && (
              <Card className="p-6">
                <h3 className="text-lg font-semibold mb-4">‰∏ÄËà¨Ë®≠ÂÆö</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  {Object.entries(settings.general || {}).map(([key, value]) => (
                    <div key={key}>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        {key === 'systemName' ? '„Ç∑„Çπ„ÉÜ„É†Âêç' :
                         key === 'systemVersion' ? '„Ç∑„Çπ„ÉÜ„É†„Éê„Éº„Ç∏„Éß„É≥' :
                         key === 'organizationName' ? 'ÁµÑÁπîÂêç' :
                         key === 'supportEmail' ? '„Çµ„Éù„Éº„Éà„É°„Éº„É´' :
                         key === 'timezone' ? '„Çø„Ç§„É†„Çæ„Éº„É≥' :
                         key === 'language' ? 'Ë®ÄË™û' :
                         key === 'dateFormat' ? 'Êó•‰ªòÂΩ¢Âºè' :
                         key === 'timeFormat' ? 'ÊôÇÂàªÂΩ¢Âºè' :
                         key === 'sessionTimeout' ? '„Çª„ÉÉ„Ç∑„Éß„É≥„Çø„Ç§„É†„Ç¢„Ç¶„Éà(ÂàÜ)' :
                         key === 'maxLoginAttempts' ? 'ÊúÄÂ§ß„É≠„Ç∞„Ç§„É≥Ë©¶Ë°åÂõûÊï∞' :
                         key === 'passwordMinLength' ? '„Éë„Çπ„ÉØ„Éº„ÉâÊúÄÂ∞èÊñáÂ≠óÊï∞' :
                         key}
                      </label>
                      {typeof value === 'boolean' ? (
                        <label className="flex items-center">
                          <input
                            type="checkbox"
                            checked={value}
                            onChange={(e) => updateSettings('general', {
                              ...settings.general,
                              [key]: e.target.checked
                            })}
                            className="rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                          />
                          <span className="ml-2 text-sm text-gray-700">ÊúâÂäπ</span>
                        </label>
                      ) : typeof value === 'number' ? (
                        <input
                          type="number"
                          value={value}
                          onChange={(e) => updateSettings('general', {
                            ...settings.general,
                            [key]: parseInt(e.target.value) || 0
                          })}
                          className="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                        />
                      ) : (
                        <input
                          type="text"
                          value={value}
                          onChange={(e) => updateSettings('general', {
                            ...settings.general,
                            [key]: e.target.value
                          })}
                          className="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                        />
                      )}
                    </div>
                  ))}
                </div>
              </Card>
            )}

            {/* Security Settings */}
            {activeTab === 'security' && (
              <Card className="p-6">
                <h3 className="text-lg font-semibold mb-4">„Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë®≠ÂÆö</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  {Object.entries(settings.security || {}).map(([key, value]) => (
                    <div key={key}>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        {key === 'enableTwoFactor' ? '‰∫åË¶ÅÁ¥†Ë™çË®º„ÇíÊúâÂäπÂåñ' :
                         key === 'forcePasswordChange' ? '„Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥„ÇíÂº∑Âà∂' :
                         key === 'passwordExpiryDays' ? '„Éë„Çπ„ÉØ„Éº„ÉâÊúâÂäπÊúüÈôê(Êó•)' :
                         key === 'accountLockoutDuration' ? '„Ç¢„Ç´„Ç¶„É≥„Éà„É≠„ÉÉ„ÇØÊôÇÈñì(ÂàÜ)' :
                         key === 'enableAuditLog' ? 'Áõ£Êüª„É≠„Ç∞„ÇíÊúâÂäπÂåñ' :
                         key === 'enableSecurityAlerts' ? '„Çª„Ç≠„É•„É™„ÉÜ„Ç£„Ç¢„É©„Éº„Éà„ÇíÊúâÂäπÂåñ' :
                         key === 'allowApiAccess' ? 'API „Ç¢„ÇØ„Çª„Çπ„ÇíË®±ÂèØ' :
                         key === 'enableSSO' ? 'SSO „ÇíÊúâÂäπÂåñ' :
                         key === 'maxSessionsPerUser' ? '„É¶„Éº„Ç∂„ÉºÂΩì„Åü„ÇäÊúÄÂ§ß„Çª„ÉÉ„Ç∑„Éß„É≥Êï∞' :
                         key}
                      </label>
                      {typeof value === 'boolean' ? (
                        <label className="flex items-center">
                          <input
                            type="checkbox"
                            checked={value}
                            onChange={(e) => updateSettings('security', {
                              ...settings.security,
                              [key]: e.target.checked
                            })}
                            className="rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                          />
                          <span className="ml-2 text-sm text-gray-700">ÊúâÂäπ</span>
                        </label>
                      ) : typeof value === 'number' ? (
                        <input
                          type="number"
                          value={value}
                          onChange={(e) => updateSettings('security', {
                            ...settings.security,
                            [key]: parseInt(e.target.value) || 0
                          })}
                          className="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                        />
                      ) : Array.isArray(value) ? (
                        <textarea
                          value={value.join('\n')}
                          onChange={(e) => updateSettings('security', {
                            ...settings.security,
                            [key]: e.target.value.split('\n').filter(item => item.trim())
                          })}
                          rows={3}
                          placeholder="1Ë°å„Å´1„Å§„Åö„Å§ÂÖ•Âäõ"
                          className="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                        />
                      ) : (
                        <input
                          type="text"
                          value={value}
                          onChange={(e) => updateSettings('security', {
                            ...settings.security,
                            [key]: e.target.value
                          })}
                          className="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                        />
                      )}
                    </div>
                  ))}
                </div>
              </Card>
            )}

            {/* User Management */}
            {activeTab === 'users' && (
              <div className="space-y-6">
                {/* User Filters */}
                <Card className="p-4">
                  <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <Input
                      placeholder="„É¶„Éº„Ç∂„ÉºÊ§úÁ¥¢..."
                      value={userSearch}
                      onChange={(e) => setUserSearch(e.target.value)}
                    />
                    <Select
                      placeholder="„É≠„Éº„É´"
                      value={userRoleFilter}
                      onChange={(e) => setUserRoleFilter(e.target.value)}
                      options={[
                        { value: '', label: 'ÂÖ®„Å¶„ÅÆ„É≠„Éº„É´' },
                        ...roles.map(role => ({ value: role.id, label: role.nameJa }))
                      ]}
                    />
                    <Select
                      placeholder="„Çπ„ÉÜ„Éº„Çø„Çπ"
                      value={userStatusFilter}
                      onChange={(e) => setUserStatusFilter(e.target.value)}
                      options={[
                        { value: '', label: 'ÂÖ®„Å¶„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ' },
                        { value: 'active', label: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ' },
                        { value: 'inactive', label: 'ÁÑ°Âäπ' }
                      ]}
                    />
                    <Button 
                      variant="secondary"
                      onClick={() => {
                        setUserSearch('');
                        setUserRoleFilter('');
                        setUserStatusFilter('');
                      }}
                    >
                      „ÇØ„É™„Ç¢
                    </Button>
                  </div>
                </Card>

                {/* Users List */}
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                  {filteredUsers.map((user) => (
                    <Card key={user.id} className="p-6">
                      <div className="flex justify-between items-start mb-4">
                        <div className="flex items-center">
                          <div className="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                            <span className="text-blue-600 font-semibold">
                              {user.fullName.charAt(0)}
                            </span>
                          </div>
                          <div>
                            <h3 className="font-semibold text-lg">{user.fullName}</h3>
                            <p className="text-gray-600 text-sm">@{user.username}</p>
                          </div>
                        </div>
                        <div className="flex space-x-1">
                          <span className={`px-2 py-1 text-xs rounded-full ${
                            user.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
                          }`}>
                            {user.status === 'active' ? '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ' : 'ÁÑ°Âäπ'}
                          </span>
                          <span className="px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800">
                            {roles.find(r => r.id === user.role)?.nameJa || user.role}
                          </span>
                        </div>
                      </div>
                      
                      <div className="space-y-2 text-sm mb-4">
                        <div className="flex justify-between">
                          <span className="text-gray-600">„É°„Éº„É´:</span>
                          <span>{user.email}</span>
                        </div>
                        <div className="flex justify-between">
                          <span className="text-gray-600">ÊúÄÁµÇ„É≠„Ç∞„Ç§„É≥:</span>
                          <span>{user.lastLogin ? new Date(user.lastLogin).toLocaleDateString('ja-JP') : 'Êú™„É≠„Ç∞„Ç§„É≥'}</span>
                        </div>
                        <div className="flex justify-between">
                          <span className="text-gray-600">‰ΩúÊàêÊó•:</span>
                          <span>{new Date(user.createdAt).toLocaleDateString('ja-JP')}</span>
                        </div>
                      </div>

                      <div className="flex justify-between space-x-2">
                        <Button variant="ghost" size="sm" onClick={() => {
                          setSelectedUser(user);
                          setIsUserModalOpen(true);
                        }}>
                          Ë©≥Á¥∞
                        </Button>
                        <div className="space-x-2">
                          <Button 
                            variant="outline" 
                            size="sm" 
                            onClick={() => updateUser(user.id, { 
                              status: user.status === 'active' ? 'inactive' : 'active' 
                            })}
                          >
                            {user.status === 'active' ? 'ÁÑ°ÂäπÂåñ' : 'ÊúâÂäπÂåñ'}
                          </Button>
                          {user.role !== 'administrator' && (
                            <Button 
                              variant="outline" 
                              size="sm" 
                              onClick={() => deleteUser(user.id)}
                              className="text-red-600 hover:text-red-700"
                            >
                              ÂâäÈô§
                            </Button>
                          )}
                        </div>
                      </div>
                    </Card>
                  ))}
                </div>
              </div>
            )}

            {/* Other tabs content can be added here */}
            {activeTab === 'roles' && (
              <Card className="p-6">
                <h3 className="text-lg font-semibold mb-4">„É≠„Éº„É´ÁÆ°ÁêÜ</h3>
                <div className="space-y-4">
                  {roles.map((role) => (
                    <div key={role.id} className="border rounded-lg p-4">
                      <div className="flex justify-between items-start">
                        <div>
                          <h4 className="font-semibold">{role.nameJa} ({role.name})</h4>
                          <p className="text-gray-600 text-sm">{role.descriptionJa}</p>
                          <div className="mt-2">
                            <span className="text-xs text-gray-500">Ê®©Èôê: </span>
                            <span className="text-xs">{role.permissions.join(', ')}</span>
                          </div>
                        </div>
                        <div className="text-right">
                          <div className="text-sm font-medium">{role.userCount} „É¶„Éº„Ç∂„Éº</div>
                          {role.isSystem && (
                            <span className="text-xs text-blue-600">„Ç∑„Çπ„ÉÜ„É†„É≠„Éº„É´</span>
                          )}
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </Card>
            )}

            {activeTab === 'system' && (
              <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <Card className="p-6">
                  <h3 className="text-lg font-semibold mb-4">„Ç∑„Çπ„ÉÜ„É†Áµ±Ë®à</h3>
                  <div className="space-y-4">
                    <div className="flex justify-between">
                      <span>„Ç∑„Çπ„ÉÜ„É†„Éê„Éº„Ç∏„Éß„É≥:</span>
                      <span className="font-medium">{stats.system?.version}</span>
                    </div>
                    <div className="flex justify-between">
                      <span>ÊúÄÁµÇ„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó:</span>
                      <span className="font-medium">
                        {stats.system?.lastBackup ? new Date(stats.system.lastBackup).toLocaleDateString('ja-JP') : 'N/A'}
                      </span>
                    </div>
                    <div className="flex justify-between">
                      <span>Ê¨°Âõû„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó:</span>
                      <span className="font-medium">
                        {stats.system?.nextBackup ? new Date(stats.system.nextBackup).toLocaleDateString('ja-JP') : 'N/A'}
                      </span>
                    </div>
                    <div className="flex justify-between">
                      <span>Ëá™Âãï„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó:</span>
                      <span className={`font-medium ${stats.system?.autoBackupEnabled ? 'text-green-600' : 'text-red-600'}`}>
                        {stats.system?.autoBackupEnabled ? 'ÊúâÂäπ' : 'ÁÑ°Âäπ'}
                      </span>
                    </div>
                  </div>
                </Card>

                <Card className="p-6">
                  <h3 className="text-lg font-semibold mb-4">„Çª„Ç≠„É•„É™„ÉÜ„Ç£Áä∂Ê≥Å</h3>
                  <div className="space-y-4">
                    <div className="flex justify-between">
                      <span>Áõ£Êüª„É≠„Ç∞:</span>
                      <span className={`font-medium ${stats.security?.auditLogEnabled ? 'text-green-600' : 'text-red-600'}`}>
                        {stats.security?.auditLogEnabled ? 'ÊúâÂäπ' : 'ÁÑ°Âäπ'}
                      </span>
                    </div>
                    <div className="flex justify-between">
                      <span>‰∫åË¶ÅÁ¥†Ë™çË®º:</span>
                      <span className={`font-medium ${stats.security?.twoFactorEnabled ? 'text-green-600' : 'text-red-600'}`}>
                        {stats.security?.twoFactorEnabled ? 'ÊúâÂäπ' : 'ÁÑ°Âäπ'}
                      </span>
                    </div>
                    <div className="flex justify-between">
                      <span>„Éë„Çπ„ÉØ„Éº„ÉâË§áÈõëÊÄß:</span>
                      <span className={`font-medium ${stats.security?.passwordComplexityEnabled ? 'text-green-600' : 'text-red-600'}`}>
                        {stats.security?.passwordComplexityEnabled ? 'ÊúâÂäπ' : 'ÁÑ°Âäπ'}
                      </span>
                    </div>
                    <div className="flex justify-between">
                      <span>„Çª„ÉÉ„Ç∑„Éß„É≥„Çø„Ç§„É†„Ç¢„Ç¶„Éà:</span>
                      <span className="font-medium">{stats.security?.sessionTimeoutMinutes}ÂàÜ</span>
                    </div>
                  </div>
                </Card>
              </div>
            )}
          </div>

          {/* Create User Modal */}
          <Modal isOpen={isCreateUserModalOpen} onClose={() => setIsCreateUserModalOpen(false)} title="Êñ∞Ë¶è„É¶„Éº„Ç∂„Éº‰ΩúÊàê" size="lg">
            <div className="space-y-4">
              <Input
                label="„É¶„Éº„Ç∂„ÉºÂêç"
                required
                value={newUser.username}
                onChange={(e) => setNewUser(prev => ({ ...prev, username: e.target.value }))}
                placeholder="username"
              />
              <Input
                label="„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ"
                required
                type="email"
                value={newUser.email}
                onChange={(e) => setNewUser(prev => ({ ...prev, email: e.target.value }))}
                placeholder="user@example.com"
              />
              <Input
                label="„Éï„É´„Éç„Éº„É†"
                required
                value={newUser.fullName}
                onChange={(e) => setNewUser(prev => ({ ...prev, fullName: e.target.value }))}
                placeholder="Â±±Áî∞ Â§™ÈÉé"
              />
              <Select
                label="„É≠„Éº„É´"
                required
                value={newUser.role}
                onChange={(e) => setNewUser(prev => ({ ...prev, role: e.target.value }))}
                options={roles.map(role => ({ value: role.id, label: role.nameJa }))}
              />
              <div className="flex justify-end space-x-3 pt-4">
                <Button variant="secondary" onClick={() => setIsCreateUserModalOpen(false)}>
                  „Ç≠„É£„É≥„Çª„É´
                </Button>
                <Button onClick={createUser}>
                  „É¶„Éº„Ç∂„Éº„Çí‰ΩúÊàê
                </Button>
              </div>
            </div>
          </Modal>

          {/* User Detail Modal */}
          {selectedUser && (
            <Modal isOpen={isUserModalOpen} onClose={() => setIsUserModalOpen(false)} title="„É¶„Éº„Ç∂„ÉºË©≥Á¥∞" size="lg">
              <div className="space-y-6">
                <div className="flex items-center">
                  <div className="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                    <span className="text-blue-600 font-bold text-xl">
                      {selectedUser.fullName.charAt(0)}
                    </span>
                  </div>
                  <div>
                    <h3 className="text-xl font-semibold">{selectedUser.fullName}</h3>
                    <p className="text-gray-600">@{selectedUser.username}</p>
                  </div>
                </div>

                <div className="grid grid-cols-2 gap-4 text-sm">
                  <div>
                    <span className="font-medium text-gray-700">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ:</span>
                    <div className="mt-1">{selectedUser.email}</div>
                  </div>
                  <div>
                    <span className="font-medium text-gray-700">„É≠„Éº„É´:</span>
                    <div className="mt-1">{roles.find(r => r.id === selectedUser.role)?.nameJa}</div>
                  </div>
                  <div>
                    <span className="font-medium text-gray-700">„Çπ„ÉÜ„Éº„Çø„Çπ:</span>
                    <div className="mt-1">
                      <span className={`px-2 py-1 text-xs rounded-full ${
                        selectedUser.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
                      }`}>
                        {selectedUser.status === 'active' ? '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ' : 'ÁÑ°Âäπ'}
                      </span>
                    </div>
                  </div>
                  <div>
                    <span className="font-medium text-gray-700">ÊúÄÁµÇ„É≠„Ç∞„Ç§„É≥:</span>
                    <div className="mt-1">
                      {selectedUser.lastLogin ? new Date(selectedUser.lastLogin).toLocaleString('ja-JP') : 'Êú™„É≠„Ç∞„Ç§„É≥'}
                    </div>
                  </div>
                  <div>
                    <span className="font-medium text-gray-700">‰ΩúÊàêÊó•:</span>
                    <div className="mt-1">{new Date(selectedUser.createdAt).toLocaleString('ja-JP')}</div>
                  </div>
                  <div>
                    <span className="font-medium text-gray-700">ÊúÄÁµÇÊõ¥Êñ∞:</span>
                    <div className="mt-1">{new Date(selectedUser.updatedAt).toLocaleString('ja-JP')}</div>
                  </div>
                  <div>
                    <span className="font-medium text-gray-700">„É≠„Ç∞„Ç§„É≥Ë©¶Ë°åÂõûÊï∞:</span>
                    <div className="mt-1">{selectedUser.loginAttempts}</div>
                  </div>
                  <div>
                    <span className="font-medium text-gray-700">„Ç¢„Ç´„Ç¶„É≥„Éà„É≠„ÉÉ„ÇØ:</span>
                    <div className="mt-1">
                      <span className={`px-2 py-1 text-xs rounded-full ${
                        selectedUser.isLocked ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'
                      }`}>
                        {selectedUser.isLocked ? '„É≠„ÉÉ„ÇØ‰∏≠' : 'Ê≠£Â∏∏'}
                      </span>
                    </div>
                  </div>
                  <div>
                    <span className="font-medium text-gray-700">„Éë„Çπ„ÉØ„Éº„ÉâÂ§âÊõ¥Ë¶ÅÊ±Ç:</span>
                    <div className="mt-1">
                      <span className={`px-2 py-1 text-xs rounded-full ${
                        selectedUser.mustChangePassword ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'
                      }`}>
                        {selectedUser.mustChangePassword ? 'Ë¶ÅÊ±Ç‰∏≠' : '‰∏çË¶Å'}
                      </span>
                    </div>
                  </div>
                  <div>
                    <span className="font-medium text-gray-700">‰∫åË¶ÅÁ¥†Ë™çË®º:</span>
                    <div className="mt-1">
                      <span className={`px-2 py-1 text-xs rounded-full ${
                        selectedUser.twoFactorEnabled ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
                      }`}>
                        {selectedUser.twoFactorEnabled ? 'ÊúâÂäπ' : 'ÁÑ°Âäπ'}
                      </span>
                    </div>
                  </div>
                </div>

                <div className="flex justify-end space-x-3">
                  <Button variant="secondary" onClick={() => setIsUserModalOpen(false)}>
                    Èñâ„Åò„Çã
                  </Button>
                  <Button 
                    variant="outline"
                    onClick={() => updateUser(selectedUser.id, { 
                      status: selectedUser.status === 'active' ? 'inactive' : 'active' 
                    })}
                  >
                    {selectedUser.status === 'active' ? 'ÁÑ°ÂäπÂåñ' : 'ÊúâÂäπÂåñ'}
                  </Button>
                </div>
              </div>
            </Modal>
          )}
        </div>
      );
    };

    // Placeholder Page Component
    const PlaceholderPage = ({ title, description }) => {
      const { showInfo } = useToast();
      
      useEffect(() => {
        showInfo(`${title}„Éö„Éº„Ç∏„ÅåË°®Á§∫„Åï„Çå„Åæ„Åó„Åü`);
      }, [title, showInfo]);
      
      return (
        <div className="text-center py-12">
          <Card>
            <h1 className="text-3xl font-bold text-slate-800 mb-4">{title}</h1>
            <p className="text-slate-600 mb-6">
              {description || `${title}„ÅÆÊ©üËÉΩ„ÅØÁèæÂú®ÈñãÁô∫‰∏≠„Åß„Åô„ÄÇ`}
            </p>
            <div className="text-8xl mb-6">üöß</div>
            <p className="text-sm text-slate-500 mb-4">
              „Åì„ÅÆÊ©üËÉΩ„ÅØËøëÊó•ÂÖ¨Èñã‰∫àÂÆö„Åß„Åô„ÄÇ
            </p>
            <div className="text-left bg-slate-50 p-4 rounded-lg">
              <h3 className="font-semibold mb-2">ÂÆüË£Ö‰∫àÂÆöÊ©üËÉΩ:</h3>
              <ul className="text-sm text-slate-600 space-y-1">
                <li>‚Ä¢ CRUDÊìç‰Ωú (‰ΩúÊàê„ÉªË°®Á§∫„ÉªÊõ¥Êñ∞„ÉªÂâäÈô§)</li>
                <li>‚Ä¢ È´òÂ∫¶„Éï„Ç£„É´„Çø„É™„É≥„Ç∞„ÉªÊ§úÁ¥¢</li>
                <li>‚Ä¢ „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥</li>
                <li>‚Ä¢ „Éá„Éº„Çø„Ç®„ÇØ„Çπ„Éù„Éº„Éà (CSV/PDF)</li>
                <li>‚Ä¢ „É™„Ç¢„É´„Çø„Ç§„É†Êõ¥Êñ∞</li>
              </ul>
            </div>
          </Card>
        </div>
      );
    };
    
    // ==========================================
    // Error Boundary
    // ==========================================
    
    class ErrorBoundary extends React.Component {
      constructor(props) {
        super(props);
        this.state = { hasError: false, error: null };
      }
      
      static getDerivedStateFromError(error) {
        return { hasError: true, error };
      }
      
      componentDidCatch(error, errorInfo) {
        console.error('ErrorBoundary caught an error:', error, errorInfo);
      }
      
      render() {
        if (this.state.hasError) {
          return (
            <div className="min-h-screen flex items-center justify-center bg-gray-50">
              <div className="text-center">
                <h1 className="text-2xl font-bold text-gray-800 mb-4">
                  ‰∫àÊúü„Åó„Å™„ÅÑ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü
                </h1>
                <p className="text-gray-600 mb-8">
                  Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì„Åå„ÄÅ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ
                </p>
                <Button onClick={() => window.location.reload()}>
                  „Éö„Éº„Ç∏„ÇíÂÜçË™≠„ÅøËæº„Åø
                </Button>
              </div>
            </div>
          );
        }
        
        return this.props.children;
      }
    }
    
    // ==========================================
    // Protected Route Component
    // ==========================================
    
    const ProtectedRoute = ({ children, ...rest }) => {
      const { user } = useAuth();
      
      return (
        <Route
          {...rest}
          render={({ location }) =>
            user ? (
              children
            ) : (
              <Redirect
                to={{
                  pathname: '/login',
                  state: { from: location }
                }}
              />
            )
          }
        />
      );
    };
    
    // ==========================================
    // App Component
    // ==========================================
    
    const AppContent = () => {
      const { user, isLoading } = useAuth();
      
      useEffect(() => {
        document.title = APP_NAME;
      }, []);
      
      if (isLoading) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center">
            <div className="text-center">
              <LoadingSpinner size="lg" />
              <p className="mt-4 text-xl text-slate-700">ITSMÈÅãÁî®„Ç∑„Çπ„ÉÜ„É†Ë™≠„ÅøËæº„Åø‰∏≠...</p>
            </div>
          </div>
        );
      }
      
      return (
        <ErrorBoundary>
          <Router>
            <Switch>
              {/* Public Routes */}
              <Route path="/login">
                {user ? <Redirect to="/dashboard" /> : <LoginPage />}
              </Route>
              
              {/* Protected Routes */}
              <ProtectedRoute path="/">
                <MainLayout>
                  <ErrorBoundary>
                    <Switch>
                      <Route exact path="/">
                        <Redirect to="/dashboard" />
                      </Route>
                      
                      {/* ITSM Core Pages */}
                      <Route path="/dashboard">
                        <DashboardPage />
                      </Route>
                      <Route path="/incidents">
                        <IncidentManagementPage />
                      </Route>
                      <Route path="/requests">
                        <ServiceRequestManagementPage />
                      </Route>
                      <Route path="/assets">
                        <AssetManagementPage />
                      </Route>
                      <Route path="/knowledge">
                        <PlaceholderPage 
                          title="„Éä„É¨„ÉÉ„Ç∏ÁÆ°ÁêÜ" 
                          description="ÊÉÖÂ†±„ÉªÊâãÈ†ÜÊõ∏ËìÑÁ©ç - Ë®ò‰∫ã‰ΩúÊàê„ÉªÁ∑®ÈõÜ„ÄÅÊ§úÁ¥¢„Éª„Éï„Ç£„É´„ÇøÊ©üËÉΩ"
                        />
                      </Route>
                      
                      {/* ITSM Process Pages */}
                      <Route path="/change-management">
                        <PlaceholderPage 
                          title="Â§âÊõ¥ÁÆ°ÁêÜ" 
                          description="Â§âÊõ¥Ë¶ÅÊ±Ç„ÉªÊâøË™ç„ÉØ„Éº„ÇØ„Éï„É≠„Éº"
                        />
                      </Route>
                      <Route path="/release-management">
                        <PlaceholderPage 
                          title="„É™„É™„Éº„ÇπÁÆ°ÁêÜ" 
                          description="„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢Â±ïÈñã„ÉªËøΩË∑°"
                        />
                      </Route>
                      <Route path="/problem-management">
                        <PlaceholderPage 
                          title="ÂïèÈ°åÁÆ°ÁêÜ" 
                          description="Ê†πÊú¨ÂéüÂõ†ÂàÜÊûê„ÉªÂÜçÁô∫Èò≤Ê≠¢"
                        />
                      </Route>
                      <Route path="/service-level-management">
                        <PlaceholderPage 
                          title="SLAÁÆ°ÁêÜ" 
                          description="KPI„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„ÉªÁõ£Ë¶ñ"
                        />
                      </Route>
                      <Route path="/capacity-management">
                        <PlaceholderPage 
                          title="„Ç≠„É£„Éë„Ç∑„ÉÜ„Ç£ÁÆ°ÁêÜ" 
                          description="„É™„ÇΩ„Éº„Çπ‰ΩøÁî®Áéá„ÉªË®àÁîª"
                        />
                      </Route>
                      <Route path="/availability-management">
                        <PlaceholderPage 
                          title="ÂèØÁî®ÊÄßÁÆ°ÁêÜ" 
                          description="„Çµ„Éº„Éì„ÇπÁ®ºÂÉçÁéá„ÉªËøΩË∑°"
                        />
                      </Route>
                      <Route path="/security-management">
                        <PlaceholderPage 
                          title="„Çª„Ç≠„É•„É™„ÉÜ„Ç£ÁÆ°ÁêÜ" 
                          description="„Çª„Ç≠„É•„É™„ÉÜ„Ç£„Ç§„É≥„Ç∑„Éá„É≥„Éà„ÉªËÑÜÂº±ÊÄß"
                        />
                      </Route>
                      <Route path="/compliance-management">
                        <PlaceholderPage 
                          title="„Ç≥„É≥„Éó„É©„Ç§„Ç¢„É≥„ÇπÁÆ°ÁêÜ" 
                          description="ISOÊ∫ñÊã†„ÉªÁõ£ÊüªËøΩË∑°"
                        />
                      </Route>
                      
                      {/* System Management Pages */}
                      <Route path="/audit-log">
                        <PlaceholderPage 
                          title="Áõ£Êüª„É≠„Ç∞" 
                          description="„Ç∑„Çπ„ÉÜ„É†Áõ£ÊüªË®ºË∑°„Éª„É¶„Éº„Ç∂„ÉºÊ¥ªÂãï"
                        />
                      </Route>
                      <Route path="/settings">
                        <SystemSettingsPage />
                      </Route>
                      
                      {/* Fallback */}
                      <Route path="*">
                        <Redirect to="/dashboard" />
                      </Route>
                    </Switch>
                  </ErrorBoundary>
                </MainLayout>
              </ProtectedRoute>
            </Switch>
            <ToastContainer />
          </Router>
        </ErrorBoundary>
      );
    };
    
    const App = () => {
      return (
        <AuthProvider>
          <ToastProvider>
            <AppContent />
          </ToastProvider>
        </AuthProvider>
      );
    };
    
    // ==========================================
    // Render App
    // ==========================================
    
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>