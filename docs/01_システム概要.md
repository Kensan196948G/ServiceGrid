# ServiceGrid ITSM システム概要

## 1. システム概要

**ServiceGrid** は、ITIL準拠のIT運用システムプラットフォームです。企業のITサービス管理を効率化し、ITILフレームワークのベストプラクティスに基づいた包括的なITSM機能を提供します。

## 2. 実装済み機能状況

### 2.1 完全実装済みITSMコア機能
- ✅ **インシデント管理** - 完全CRUD、統計、フィルタリング、ページネーション
- ✅ **資産管理 (CMDB)** - 自動タグ生成、完全CRUD、統計、バリデーション
- ✅ **コンプライアンス管理** - 統制・監査・リスク管理
- ✅ **認証・ユーザー管理** - JWT + bcrypt、ロールベースアクセス制御

### 2.2 基本実装済み機能
- 🔄 **サービスリクエスト管理** - 基本スキーマ（API開発中）
- 🔄 **変更管理** - 基本スキーマ（API開発中）
- 🔄 **リリース管理** - 基本スキーマ（API開発中）
- 🔄 **問題管理** - 基本スキーマ（API開発中）
- 🔄 **ナレッジ管理** - 基本スキーマ（API開発中）

### 2.3 運用管理機能（基本実装）
- 🔄 **サービスレベル管理** - 基本テーブル設計済み
- 🔄 **キャパシティ管理** - 基本テーブル設計済み
- 🔄 **可用性管理** - 基本テーブル設計済み
- ✅ **監査証跡管理** - ログテーブル実装済み

### 2.4 AI統合機能
- ✅ **Google Gemini AI** - 統合済み（フロントエンド）
- 🔄 **インテリジェント分析** - 将来実装予定

## 3. 技術スタック（現在の実装）

### 3.1 フロントエンド
- **React 19.1.0** with **TypeScript 5.7.2** - 最新UI開発
- **Vite 6.2.0** - 高速開発・ビルド環境
- **React Router DOM 7.6.1** - SPAルーティング
- **Tailwind CSS** (CDN) - ユーティリティファーストCSS
- **Recharts 2.15.3** - データ可視化
- **Google Generative AI 1.1.0** - AI機能統合
- **Jest 29.7.0 + Testing Library** - 包括的テスト

### 3.2 バックエンド
- **Node.js 22.16.0** with **Express 4.19.2** - REST APIサーバー
- **SQLite 5.1.7** - 軽量データベース管理
- **CORS 2.8.5** - クロスオリジンリソース共有設定
- **JWT 9.0.2** - 認証トークン管理
- **bcrypt 6.0.0** - パスワードハッシュ化
- **Helmet 8.1.0** - セキュリティヘッダー
- **express-rate-limit 7.5.0** - API制限

## 4. システム構成（実際の設定）

### 4.1 稼働環境
- **フロントエンド**: `http://localhost:3001` (Vite開発サーバー)
- **バックエンドAPI**: `http://localhost:8082` (Express APIサーバー)
- **データベース**: SQLite `backend/db/itsm.sqlite`

### 4.2 実装済みAPIエンドポイント
```
GET  /                           # API情報
GET  /ping                       # 疎通確認
GET  /api/health                 # ヘルスチェック
POST /api/auth/login             # 認証
GET  /api/incidents              # インシデント一覧
POST /api/incidents              # インシデント作成
PUT  /api/incidents/:id          # インシデント更新
DELETE /api/incidents/:id        # インシデント削除
GET  /api/incidents/stats        # インシデント統計
GET  /api/assets                 # 資産一覧
POST /api/assets                 # 資産作成
PUT  /api/assets/:id             # 資産更新
DELETE /api/assets/:id           # 資産削除
GET  /api/assets/stats           # 資産統計
GET  /api/assets/generate-tag    # 資産タグ自動生成
GET  /api/compliance/controls    # コンプライアンス統制
POST /api/compliance/controls    # 統制作成
PUT  /api/compliance/controls/:id # 統制更新
DELETE /api/compliance/controls/:id # 統制削除
GET  /api/compliance/audits      # 監査情報
GET  /api/compliance/risks       # リスク情報
```

### 4.3 デフォルトユーザー（実装済み）
- **管理者**: `admin` / `admin123`
- **オペレーター**: `operator` / `operator123`

### 4.4 ユーザーロール（実装済み）
- **administrator** - 全機能アクセス・管理権限
- **operator** - 運用機能・削除権限なし
- **user** - 基本利用・申請権限
- **readonly** - 閲覧のみ権限

## 5. セキュリティ実装詳細

### 5.1 認証・認可（実装済み）
- **JWT認証** - ステートレス認証システム
- **bcryptパスワードハッシュ化** - ソルト付きセキュア保存
- **ロールベースアクセス制御** - 4段階権限管理
- **セッション管理** - sessionStorageによるセキュア管理

### 5.2 APIセキュリティ（実装済み）
- **CORS設定** - 指定オリジンのみアクセス許可
- **レート制限** - 15分間で100リクエスト制限
- **Helmetセキュリティヘッダー** - XSS、CSRF対策
- **入力検証・バリデーション** - 全API入力の厳密検証
- **SQLインジェクション防止** - パラメータ化クエリ徹底

### 5.3 データ保護（実装済み）
- **パスワード暗号化保存** - bcrypt + ソルト
- **JSONデータ検証** - 型安全性確保
- **XSS対策** - React自動エスケープ + 入力サニタイゼーション
- **監査ログ** - 全操作の記録（基本実装）

## 6. 主要な設計思想・実装方針

### 6.1 アーキテクチャ原則（実装済み）
- **ITIL準拠** - 業界標準ベストプラクティス
- **モジュラー設計** - 型分割、API分離による保守性
- **セキュリティファースト** - 全層でのセキュリティ実装
- **クロスプラットフォーム** - Node.js基盤でのOS非依存

### 6.2 技術選択理由（確定実装）
- **SQLite採用** - 軽量・組み込み型で管理コスト削減
- **Express API** - PowerShellから移行完了、REST標準準拠
- **TypeScript厳密型** - 実行時エラー削減、開発効率向上
- **Viteビルド** - 高速開発サイクル、最適化されたバンドル

## 7. 実装完了状況・拡張性

### 7.1 完了済み機能
- ✅ **React 19 + TypeScript** - 最新フロントエンド実装
- ✅ **Node.js/Express API** - PowerShellからの完全移行
- ✅ **セキュリティ強化** - JWT + bcrypt + CORS + 制限実装
- ✅ **資産管理システム** - 自動タグ生成含む完全実装
- ✅ **インシデント管理** - CRUD + 統計機能完全実装
- ✅ **統合起動スクリプト** - ワンコマンド起動・停止

### 7.2 近日実装予定
- 🔄 **残りITSMモジュール** - サービスリクエスト、変更管理等のAPI完成
- 🔄 **AI機能拡張** - Geminiとの深い統合
- 🔄 **ダッシュボード強化** - リアルタイム統計・グラフ
- 🔄 **レポート機能** - CSV出力、PDF生成

### 7.3 将来拡張
- 🔄 **パフォーマンス最適化** - コード分割・キャッシュ戦略
- 🔄 **国際化対応** - 多言語サポート
- 🔄 **PWA対応** - オフライン機能
- 🔄 **Docker化** - コンテナベース展開

このITSMシステムは、実装済みの堅牢な基盤の上に、段階的に機能を拡張していく設計となっており、既に核となるインシデント管理・資産管理・認証システムが完全に動作可能な状態です。