# ITSM Platform 開発ガイド

## 概要

このドキュメントは、ITSM Platform tmux並列開発環境での開発ガイドです。
5つのペイン（Feature-A〜E）を3段レイアウトで配置した効率的な並列開発手法を説明します。

## 開発環境構成

### 5ペイン3段レイアウト開発システム

```
┌─────────────────────────────────────┐
│ 1段目（上段）                       │
│ ┌─────────────┬─────────────────────┤
│ │ 0:Feature-B │ 1:Feature-C         │
│ │ UI/テスト   │ API開発             │
│ ├─────────────┼─────────────────────┤
│ │ 2段目（中段）                     │
│ │ 2:Feature-D │ 3:Feature-E         │
│ │ PowerShell  │ 非機能要件          │
│ └─────────────┴─────────────────────┘
├─────────────────────────────────────┤
│ 3段目（下段フル幅）                 │
│ 4:Feature-A (統合リーダー)          │
└─────────────────────────────────────┘
```

### 各ペインの責務

| ペイン | 担当領域 | 段・位置 | 主な作業内容 |
|--------|----------|----------|--------------|
| **0:Feature-B** | UI/テスト | 1段目左 | フロントエンド開発、テスト自動修復 |
| **1:Feature-C** | API開発 | 1段目右 | バックエンドAPI、テスト通過ループ |
| **2:Feature-D** | PowerShell | 2段目左 | Windows対応、PowerShell API実装 |
| **3:Feature-E** | 非機能要件 | 2段目右 | SLA、セキュリティ、監視、パフォーマンス |
| **4:Feature-A** | 統合リーダー | 3段目フル幅 | 設計統一、アーキテクチャ管理、品質監視 |

## 開発ワークフロー

### 1. 開発セッション開始

```bash
cd /mnt/e/ServiceGrid/tmux
./start-development.sh
```

### 2. 並列開発の流れ

1. **Feature-A（統合リーダー）**が全体の方針を決定
2. **Feature-B〜E**が並行して各機能を開発
3. 定期的に統合・調整を実施
4. 統合テストで品質確認

### 3. ペイン間連携

- **Feature-A**が他ペインの進捗を監視
- 依存関係がある場合は事前調整
- 競合回避のための作業分担

## 開発手順

### Phase 1: 環境準備
1. tmux環境確認
2. 依存関係インストール
3. データベース初期化
4. 開発サーバー起動

### Phase 2: 並列開発
1. 各ペインでの独立開発
2. 定期的な統合テスト
3. コード品質チェック
4. 継続的な改善

### Phase 3: 統合・テスト
1. 全機能統合
2. 統合テスト実行
3. パフォーマンス検証
4. セキュリティチェック

## 品質管理

### コード品質基準

- **TypeScript**: strict mode使用
- **ESLint**: エラー0、警告最小限
- **テストカバレッジ**: 80%以上目標
- **セキュリティ**: 脆弱性0

### テスト戦略

1. **単体テスト**: Jest + React Testing Library
2. **統合テスト**: API連携テスト
3. **E2Eテスト**: 重要なユーザーフロー
4. **セキュリティテスト**: 脆弱性スキャン

### CI/CD統合

```bash
# 統合テスト実行
./tools/test-runner.sh

# コード品質チェック
./tools/lint-checker.sh

# ビルド検証
./tools/build-validator.sh
```

## 開発ルール

### コーディング規約

1. **命名規則**: キャメルケース（変数・関数）、パスカルケース（コンポーネント）
2. **ファイル構成**: 機能別ディレクトリ、関心の分離
3. **コメント**: 複雑なロジックには必須
4. **型定義**: 厳密な型付け

### Git ワークフロー

1. **ブランチ戦略**: feature/機能名
2. **コミット**: 小さく頻繁に
3. **プルリクエスト**: レビュー必須
4. **マージ**: Squash and merge

### レビュープロセス

1. **コードレビュー**: 全ペインの相互チェック
2. **設計レビュー**: Feature-Aが統一性確認
3. **セキュリティレビュー**: Feature-Eが担当
4. **パフォーマンスレビュー**: ボトルネック確認

## トラブルシューティング

### よくある問題と解決策

#### 1. ペイン間の競合
**現象**: 同じファイルを複数ペインで編集
**解決策**: 
- 事前の作業分担明確化
- Git pull --rebase の活用
- Feature-Aによる調整

#### 2. テスト失敗
**現象**: 統合テストが失敗
**解決策**:
- 各ペインでの単体テスト先行
- API仕様の事前合意
- モックデータの統一

#### 3. パフォーマンス問題
**現象**: ビルド時間・実行速度の低下
**解決策**:
- Feature-Eによる継続監視
- バンドルサイズ最適化
- 不要な依存関係削除

#### 4. セキュリティ問題
**現象**: 脆弱性の検出
**解決策**:
- Feature-Eによる定期監査
- 依存関係の定期更新
- セキュリティベストプラクティス適用

## パフォーマンス最適化

### フロントエンド最適化

1. **コード分割**: 動的インポート
2. **バンドル最適化**: Tree shaking
3. **画像最適化**: WebP形式、lazy loading
4. **キャッシュ戦略**: Service Worker

### バックエンド最適化

1. **データベース**: インデックス最適化
2. **API**: レスポンスキャッシュ
3. **ファイル**: 圧縮・最小化
4. **監視**: APM導入

## セキュリティ対策

### 開発時セキュリティ

1. **認証**: JWT + bcrypt
2. **認可**: ロールベースアクセス制御
3. **入力検証**: サニタイゼーション
4. **HTTPS**: 本番環境必須

### セキュリティテスト

1. **静的解析**: コード脆弱性スキャン
2. **動的テスト**: ペネトレーションテスト
3. **依存関係**: 脆弱性監査
4. **設定**: セキュリティ設定確認

## 継続的改善

### 開発効率向上

1. **自動化**: 繰り返し作業の自動化
2. **ツール**: 開発支援ツール導入
3. **テンプレート**: コード生成テンプレート
4. **ドキュメント**: 知識共有

### 技術負債管理

1. **定期レビュー**: 技術負債の棚卸し
2. **リファクタリング**: 計画的な改善
3. **アップデート**: 依存関係更新
4. **アーキテクチャ**: 継続的な設計改善

## 参考資料

### 技術ドキュメント

- [アーキテクチャ設計](architecture.md)
- [テスト戦略](testing-strategy.md)
- [CLAUDE.md](../../CLAUDE.md)

### 外部リソース

- [React 19 Documentation](https://react.dev/)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [Node.js Best Practices](https://github.com/goldbergyoni/nodebestpractices)
- [PowerShell Documentation](https://docs.microsoft.com/en-us/powershell/)

## 用語集

| 用語 | 説明 |
|------|------|
| **tmux** | ターミナルマルチプレクサー |
| **ペイン** | tmux内の作業エリア |
| **統合リーダー** | Feature-A、全体調整役 |
| **並列開発** | 複数機能の同時開発 |
| **CI/CD** | 継続的インテグレーション/デプロイメント |

---

**更新日**: 2025年6月14日  
**バージョン**: v1.0  
**作成者**: Claude Code AI Assistant