#!/bin/bash

# tmuxæ¥ç¶šæ™‚ã«Claude Codeã‚‚è‡ªå‹•èµ·å‹•ã™ã‚‹çµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

SESSION_NAME="itsm-dev"

echo "ğŸš€ ITSMé–‹ç™ºç’°å¢ƒ - Claude Codeçµ±åˆèµ·å‹•ä¸­..."

# ã‚»ãƒƒã‚·ãƒ§ãƒ³å­˜åœ¨ç¢ºèª
if ! tmux has-session -t "$SESSION_NAME" 2>/dev/null; then
    echo "ğŸ“‹ ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€æ–°è¦ä½œæˆã—ã¾ã™..."
    ./simple-3tier.sh
    sleep 2
fi

echo "ğŸ”§ Claude Codeè‡ªå‹•èµ·å‹•å®Ÿè¡Œä¸­..."
./auto-start-with-claude.sh

echo ""
echo "âœ… æº–å‚™å®Œäº†ï¼tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã«æ¥ç¶šã—ã¾ã™..."
echo ""
echo "ğŸ¯ 5ãƒšã‚¤ãƒ³ Claude Code ä¸¦åˆ—é–‹ç™ºç’°å¢ƒ"
echo "  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "  â”‚ 1æ®µç›®: Feature-B â”‚ Feature-C       â”‚"
echo "  â”‚   (UI/ãƒ†ã‚¹ãƒˆ)    â”‚  (APIé–‹ç™º)      â”‚"
echo "  â”‚   Claudeèµ·å‹•æ¸ˆã¿ â”‚ Claudeèµ·å‹•æ¸ˆã¿  â”‚"
echo "  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
echo "  â”‚ 2æ®µç›®: Feature-D â”‚ Feature-E       â”‚"
echo "  â”‚  (PowerShell)    â”‚ (éæ©Ÿèƒ½è¦ä»¶)    â”‚"
echo "  â”‚   Claudeèµ·å‹•æ¸ˆã¿ â”‚ Claudeèµ·å‹•æ¸ˆã¿  â”‚"
echo "  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
echo "  â”‚ 3æ®µç›®: Feature-A (çµ±åˆãƒªãƒ¼ãƒ€ãƒ¼)     â”‚"
echo "  â”‚          Claudeèµ·å‹•æ¸ˆã¿             â”‚"
echo "  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo "âŒ¨ï¸ ãƒšã‚¤ãƒ³åˆ‡ã‚Šæ›¿ãˆ:"
echo "  Ctrl+b + 1: ğŸ¨ Feature-B | Ctrl+b + 2: ğŸ”§ Feature-C"
echo "  Ctrl+b + 3: ğŸ’» Feature-D | Ctrl+b + 4: ğŸ”’ Feature-E"
echo "  Ctrl+b + 5: ğŸ¯ Feature-A"
echo ""

# tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã«æ¥ç¶š
tmux attach-session -t "$SESSION_NAME"