<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ITSM運用システム - 完全版</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/react-router-dom@6.26.2/dist/umd/react-router-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { 
      font-family: system-ui, -apple-system, sans-serif; 
      margin: 0; 
      background: #f8fafc;
    }
    .loading { 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      height: 100vh; 
      flex-direction: column;
    }
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }
    .modal-content {
      background: white;
      border-radius: 8px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      max-width: 90vw;
      max-height: 90vh;
      overflow-y: auto;
    }
    .table-responsive {
      overflow-x: auto;
    }
    .priority-critical { background-color: #fecaca; color: #991b1b; }
    .priority-high { background-color: #fed7aa; color: #9a3412; }
    .priority-medium { background-color: #fef3c7; color: #92400e; }
    .priority-low { background-color: #d1fae5; color: #065f46; }
    .status-open { background-color: #dbeafe; color: #1e40af; }
    .status-progress { background-color: #fef3c7; color: #92400e; }
    .status-resolved { background-color: #d1fae5; color: #065f46; }
    .status-closed { background-color: #f3f4f6; color: #374151; }
  </style>
</head>
<body>
  <div id="root">
    <div class="loading">
      <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mb-4"></div>
      <p class="text-xl text-slate-700">ITSM運用システム読み込み中...</p>
    </div>
  </div>

  <script>
    // Wait for all libraries to load before executing main script
    function waitForLibraries() {
      if (typeof React !== 'undefined' && 
          typeof ReactDOM !== 'undefined' && 
          typeof ReactRouterDOM !== 'undefined' &&
          typeof Babel !== 'undefined') {
        
        // Execute main application script once all libraries are loaded
        const script = document.createElement('script');
        script.type = 'text/babel';
        script.innerHTML = `
    const { useState, useEffect, createContext, useContext, useCallback } = React;
    const { HashRouter, Routes, Route, Navigate, useNavigate, useLocation } = ReactRouterDOM;

    // Mock Data Store
    const mockData = {
      incidents: [
        {
          id: 'INC-2024-001',
          title: 'メールサーバー接続エラー',
          description: 'Outlook接続時にタイムアウトエラーが発生',
          status: 'Open',
          priority: 'High',
          assignee: '田中太郎',
          reporter: '佐藤花子',
          created: '2024-06-22 09:30',
          category: 'ネットワーク',
          impact: 'High',
          urgency: 'High'
        },
        {
          id: 'INC-2024-002',
          title: 'プリンタ印刷不良',
          description: '3F会議室のプリンタで印刷が途中で止まる',
          status: 'In Progress',
          priority: 'Medium',
          assignee: '山田次郎',
          reporter: '鈴木一郎',
          created: '2024-06-22 08:15',
          category: 'ハードウェア',
          impact: 'Medium',
          urgency: 'Medium'
        },
        {
          id: 'INC-2024-003',
          title: 'ファイルサーバアクセス遅延',
          description: '共有フォルダへのアクセスが非常に遅い',
          status: 'Resolved',
          priority: 'Low',
          assignee: '田中太郎',
          reporter: '高橋美子',
          created: '2024-06-21 14:20',
          category: 'サーバー',
          impact: 'Low',
          urgency: 'Low'
        }
      ],
      assets: [
        {
          id: 'SRV-001',
          name: 'メインWebサーバー',
          type: 'Server',
          location: 'データセンター A',
          owner: 'IT部門',
          status: 'Active',
          manufacturer: 'Dell',
          model: 'PowerEdge R740',
          serial: 'ABC123456',
          purchaseDate: '2022-03-15',
          warrantyEnd: '2025-03-15',
          ipAddress: '192.168.1.100',
          os: 'Windows Server 2022'
        },
        {
          id: 'DSK-001',
          name: '営業部PC01',
          type: 'Desktop',
          location: '3F営業部',
          owner: '営業部',
          status: 'Active',
          manufacturer: 'HP',
          model: 'EliteDesk 800',
          serial: 'DEF789012',
          purchaseDate: '2023-01-10',
          warrantyEnd: '2026-01-10',
          ipAddress: '192.168.1.201',
          os: 'Windows 11 Pro'
        },
        {
          id: 'NET-001',
          name: 'メインスイッチ',
          type: 'Network Equipment',
          location: 'データセンター A',
          owner: 'IT部門',
          status: 'Active',
          manufacturer: 'Cisco',
          model: 'Catalyst 2960',
          serial: 'GHI345678',
          purchaseDate: '2021-08-20',
          warrantyEnd: '2024-08-20',
          ipAddress: '192.168.1.1',
          os: 'IOS 15.2'
        }
      ],
      serviceRequests: [
        {
          id: 'REQ-2024-001',
          title: '新規アカウント作成依頼',
          description: '新入社員用のアカウント作成をお願いします',
          status: 'Approved',
          priority: 'Medium',
          requester: '人事部 山田',
          assignee: 'IT部 田中',
          requestDate: '2024-06-22 10:00',
          category: 'アカウント管理',
          approver: 'IT部長'
        },
        {
          id: 'REQ-2024-002',
          title: 'ソフトウェアライセンス追加',
          description: 'Adobe Creative Suite のライセンス5個追加',
          status: 'Pending Approval',
          priority: 'Low',
          requester: 'デザイン部 佐藤',
          assignee: '未割当',
          requestDate: '2024-06-21 16:30',
          category: 'ソフトウェア',
          approver: '情報システム部長'
        }
      ],
      knowledge: [
        {
          id: 'KB-001',
          title: 'パスワードリセット手順',
          content: 'Active Directoryパスワードのリセット手順について...',
          category: 'アカウント管理',
          tags: ['パスワード', 'リセット', 'AD'],
          author: '田中太郎',
          created: '2024-06-01',
          views: 145
        },
        {
          id: 'KB-002',
          title: 'VPN接続設定ガイド',
          content: 'リモートワーク用VPN接続の設定方法...',
          category: 'ネットワーク',
          tags: ['VPN', 'リモートワーク', '設定'],
          author: '山田次郎',
          created: '2024-05-15',
          views: 89
        }
      ],
      changes: [
        {
          id: 'CHG-2024-001',
          title: 'メールサーバーOSアップデート',
          description: 'Exchange Server 2019のセキュリティパッチ適用',
          status: 'Scheduled',
          priority: 'High',
          implementer: 'IT部 田中',
          plannedStart: '2024-06-25 02:00',
          plannedEnd: '2024-06-25 04:00',
          category: 'インフラ',
          risk: 'Medium',
          approver: 'IT部長'
        }
      ],
      releases: [
        {
          id: 'REL-2024-001',
          title: '勤怠管理システム v2.1',
          description: '新機能追加とバグ修正',
          status: 'Planning',
          releaseDate: '2024-07-01',
          version: '2.1.0',
          components: ['Web UI', 'データベース', 'API'],
          manager: 'システム開発部 鈴木'
        }
      ]
    };

    // Simple Auth Context
    const AuthContext = createContext();

    const AuthProvider = ({ children }) => {
      const [user, setUser] = useState(null);
      const [isLoading, setIsLoading] = useState(false);
      const [error, setError] = useState(null);

      // Check for existing session on load
      useEffect(() => {
        const savedUser = sessionStorage.getItem('itsm_user');
        if (savedUser) {
          try {
            setUser(JSON.parse(savedUser));
          } catch (e) {
            sessionStorage.removeItem('itsm_user');
          }
        }
      }, []);

      const login = async (username, password) => {
        setError(null);
        setIsLoading(true);
        
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        if ((username === 'admin' && password === 'admin123') || 
            (username === 'operator' && password === 'operator123')) {
          const userData = { 
            username, 
            role: username === 'admin' ? 'ADMIN' : 'USER',
            id: username === 'admin' ? '1' : '2',
            email: username === 'admin' ? 'admin@company.com' : 'operator@company.com'
          };
          setUser(userData);
          sessionStorage.setItem('itsm_user', JSON.stringify(userData));
          setIsLoading(false);
          return true;
        } else {
          setError('ユーザー名またはパスワードが正しくありません');
          setIsLoading(false);
          return false;
        }
      };

      const logout = () => {
        setUser(null);
        setError(null);
        sessionStorage.removeItem('itsm_user');
      };

      return React.createElement(AuthContext.Provider, {
        value: { user, login, logout, isLoading, error }
      }, children);
    };

    const useAuth = () => useContext(AuthContext);

    // Modal Component
    const Modal = ({ isOpen, onClose, title, children, size = 'lg' }) => {
      if (!isOpen) return null;

      const sizeClasses = {
        sm: 'max-w-md',
        md: 'max-w-lg',
        lg: 'max-w-2xl',
        xl: 'max-w-4xl',
        full: 'max-w-6xl'
      };

      return React.createElement('div', {
        className: 'modal-overlay',
        onClick: (e) => e.target === e.currentTarget && onClose()
      },
        React.createElement('div', {
          className: `modal-content ${sizeClasses[size]} w-full mx-4`
        }, [
          React.createElement('div', {
            key: 'header',
            className: 'flex justify-between items-center p-6 border-b'
          }, [
            React.createElement('h2', {
              key: 'title',
              className: 'text-xl font-semibold text-slate-800'
            }, title),
            React.createElement('button', {
              key: 'close',
              onClick: onClose,
              className: 'text-slate-400 hover:text-slate-600 text-2xl font-bold'
            }, '×')
          ]),
          React.createElement('div', {
            key: 'content',
            className: 'p-6'
          }, children)
        ])
      );
    };

    // Form Components
    const Input = ({ label, error, ...props }) => {
      return React.createElement('div', {
        className: 'mb-4'
      }, [
        label && React.createElement('label', {
          key: 'label',
          className: 'block text-sm font-medium text-slate-700 mb-2'
        }, label),
        React.createElement('input', {
          key: 'input',
          className: `w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${error ? 'border-red-500' : 'border-slate-300'}`,
          ...props
        }),
        error && React.createElement('p', {
          key: 'error',
          className: 'text-red-500 text-sm mt-1'
        }, error)
      ]);
    };

    const Select = ({ label, options, error, ...props }) => {
      return React.createElement('div', {
        className: 'mb-4'
      }, [
        label && React.createElement('label', {
          key: 'label',
          className: 'block text-sm font-medium text-slate-700 mb-2'
        }, label),
        React.createElement('select', {
          key: 'select',
          className: `w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${error ? 'border-red-500' : 'border-slate-300'}`,
          ...props
        }, options.map(option => 
          React.createElement('option', {
            key: option.value,
            value: option.value
          }, option.label)
        )),
        error && React.createElement('p', {
          key: 'error',
          className: 'text-red-500 text-sm mt-1'
        }, error)
      ]);
    };

    const Textarea = ({ label, error, ...props }) => {
      return React.createElement('div', {
        className: 'mb-4'
      }, [
        label && React.createElement('label', {
          key: 'label',
          className: 'block text-sm font-medium text-slate-700 mb-2'
        }, label),
        React.createElement('textarea', {
          key: 'textarea',
          className: `w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${error ? 'border-red-500' : 'border-slate-300'}`,
          rows: 4,
          ...props
        }),
        error && React.createElement('p', {
          key: 'error',
          className: 'text-red-500 text-sm mt-1'
        }, error)
      ]);
    };

    // Status Badge Component
    const StatusBadge = ({ status, type = 'status' }) => {
      const getClassName = () => {
        if (type === 'priority') {
          switch(status?.toLowerCase()) {
            case 'critical': return 'priority-critical';
            case 'high': return 'priority-high';
            case 'medium': return 'priority-medium';
            case 'low': return 'priority-low';
            default: return 'bg-slate-100 text-slate-800';
          }
        } else {
          switch(status?.toLowerCase()) {
            case 'open': return 'status-open';
            case 'in progress': return 'status-progress';
            case 'resolved': return 'status-resolved';
            case 'closed': return 'status-closed';
            case 'approved': return 'bg-green-100 text-green-800';
            case 'pending approval': return 'bg-yellow-100 text-yellow-800';
            case 'rejected': return 'bg-red-100 text-red-800';
            default: return 'bg-slate-100 text-slate-800';
          }
        }
      };

      return React.createElement('span', {
        className: `px-2 py-1 rounded-full text-xs font-medium ${getClassName()}`
      }, status);
    };

    // Data Table Component
    const DataTable = ({ columns, data, onRowClick, onEdit, onDelete }) => {
      return React.createElement('div', {
        className: 'table-responsive'
      },
        React.createElement('table', {
          className: 'min-w-full bg-white border border-slate-200 rounded-lg overflow-hidden'
        }, [
          React.createElement('thead', {
            key: 'thead',
            className: 'bg-slate-50'
          },
            React.createElement('tr', {},
              columns.map(col => 
                React.createElement('th', {
                  key: col.key,
                  className: 'px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider'
                }, col.label)
              ).concat([
                React.createElement('th', {
                  key: 'actions',
                  className: 'px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider'
                }, '操作')
              ])
            )
          ),
          React.createElement('tbody', {
            key: 'tbody',
            className: 'divide-y divide-slate-200'
          },
            data.map((row, index) => 
              React.createElement('tr', {
                key: index,
                className: 'hover:bg-slate-50 cursor-pointer',
                onClick: () => onRowClick && onRowClick(row)
              },
                columns.map(col => 
                  React.createElement('td', {
                    key: col.key,
                    className: 'px-6 py-4 whitespace-nowrap text-sm text-slate-900'
                  }, col.render ? col.render(row[col.key], row) : row[col.key])
                ).concat([
                  React.createElement('td', {
                    key: 'actions',
                    className: 'px-6 py-4 whitespace-nowrap text-right text-sm font-medium'
                  }, 
                    React.createElement('div', {
                      className: 'flex justify-end space-x-2'
                    }, [
                      onEdit && React.createElement('button', {
                        key: 'edit',
                        onClick: (e) => { e.stopPropagation(); onEdit(row); },
                        className: 'text-blue-600 hover:text-blue-900'
                      }, '編集'),
                      onDelete && React.createElement('button', {
                        key: 'delete',
                        onClick: (e) => { e.stopPropagation(); onDelete(row); },
                        className: 'text-red-600 hover:text-red-900'
                      }, '削除')
                    ])
                  )
                ])
              )
            )
          )
        ])
      );
    };

    // Incidents Page
    const IncidentsPage = () => {
      const [incidents, setIncidents] = useState(mockData.incidents);
      const [selectedIncident, setSelectedIncident] = useState(null);
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [isEditing, setIsEditing] = useState(false);
      const [searchTerm, setSearchTerm] = useState('');
      const [filterStatus, setFilterStatus] = useState('');
      const [filterPriority, setFilterPriority] = useState('');

      const columns = [
        { key: 'id', label: 'ID' },
        { key: 'title', label: 'タイトル' },
        { 
          key: 'status', 
          label: 'ステータス',
          render: (value) => React.createElement(StatusBadge, { status: value })
        },
        { 
          key: 'priority', 
          label: '優先度',
          render: (value) => React.createElement(StatusBadge, { status: value, type: 'priority' })
        },
        { key: 'assignee', label: '担当者' },
        { key: 'created', label: '作成日時' }
      ];

      const filteredIncidents = incidents.filter(incident => {
        return (
          incident.title.toLowerCase().includes(searchTerm.toLowerCase()) &&
          (filterStatus === '' || incident.status === filterStatus) &&
          (filterPriority === '' || incident.priority === filterPriority)
        );
      });

      const handleCreate = () => {
        setSelectedIncident({
          id: '',
          title: '',
          description: '',
          status: 'Open',
          priority: 'Medium',
          assignee: '',
          reporter: '',
          category: '',
          impact: 'Medium',
          urgency: 'Medium'
        });
        setIsEditing(true);
        setIsModalOpen(true);
      };

      const handleEdit = (incident) => {
        setSelectedIncident({ ...incident });
        setIsEditing(true);
        setIsModalOpen(true);
      };

      const handleSave = () => {
        if (selectedIncident.id && incidents.find(i => i.id === selectedIncident.id)) {
          // Update existing
          setIncidents(incidents.map(i => 
            i.id === selectedIncident.id ? selectedIncident : i
          ));
        } else {
          // Create new
          const newIncident = {
            ...selectedIncident,
            id: `INC-2024-${String(incidents.length + 1).padStart(3, '0')}`,
            created: new Date().toLocaleString('ja-JP')
          };
          setIncidents([...incidents, newIncident]);
        }
        setIsModalOpen(false);
        setIsEditing(false);
      };

      const handleDelete = (incident) => {
        if (confirm(`インシデント ${incident.id} を削除しますか？`)) {
          setIncidents(incidents.filter(i => i.id !== incident.id));
        }
      };

      return React.createElement('div', {
        className: 'p-6'
      }, [
        React.createElement('div', {
          key: 'header',
          className: 'flex justify-between items-center mb-6'
        }, [
          React.createElement('h1', {
            key: 'title',
            className: 'text-2xl font-bold text-slate-800'
          }, 'インシデント管理'),
          React.createElement('button', {
            key: 'create',
            onClick: handleCreate,
            className: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700'
          }, '新規インシデント作成')
        ]),
        
        React.createElement('div', {
          key: 'filters',
          className: 'bg-white rounded-lg shadow p-4 mb-6'
        }, [
          React.createElement('div', {
            key: 'search-filters',
            className: 'grid grid-cols-1 md:grid-cols-4 gap-4'
          }, [
            React.createElement('input', {
              key: 'search',
              type: 'text',
              placeholder: 'インシデントを検索...',
              value: searchTerm,
              onChange: (e) => setSearchTerm(e.target.value),
              className: 'px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
            }),
            React.createElement('select', {
              key: 'status-filter',
              value: filterStatus,
              onChange: (e) => setFilterStatus(e.target.value),
              className: 'px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
            }, [
              React.createElement('option', { key: 'all-status', value: '' }, 'すべてのステータス'),
              React.createElement('option', { key: 'open', value: 'Open' }, 'オープン'),
              React.createElement('option', { key: 'progress', value: 'In Progress' }, '対応中'),
              React.createElement('option', { key: 'resolved', value: 'Resolved' }, '解決済み'),
              React.createElement('option', { key: 'closed', value: 'Closed' }, 'クローズ')
            ]),
            React.createElement('select', {
              key: 'priority-filter',
              value: filterPriority,
              onChange: (e) => setFilterPriority(e.target.value),
              className: 'px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
            }, [
              React.createElement('option', { key: 'all-priority', value: '' }, 'すべての優先度'),
              React.createElement('option', { key: 'critical', value: 'Critical' }, '緊急'),
              React.createElement('option', { key: 'high', value: 'High' }, '高'),
              React.createElement('option', { key: 'medium', value: 'Medium' }, '中'),
              React.createElement('option', { key: 'low', value: 'Low' }, '低')
            ]),
            React.createElement('div', {
              key: 'stats',
              className: 'text-sm text-slate-600'
            }, `${filteredIncidents.length} 件のインシデント`)
          ])
        ]),

        React.createElement('div', {
          key: 'table',
          className: 'bg-white rounded-lg shadow'
        },
          React.createElement(DataTable, {
            columns,
            data: filteredIncidents,
            onRowClick: (incident) => {
              setSelectedIncident(incident);
              setIsEditing(false);
              setIsModalOpen(true);
            },
            onEdit: handleEdit,
            onDelete: handleDelete
          })
        ),

        React.createElement(Modal, {
          key: 'modal',
          isOpen: isModalOpen,
          onClose: () => setIsModalOpen(false),
          title: isEditing ? (selectedIncident?.id ? 'インシデント編集' : 'インシデント作成') : 'インシデント詳細',
          size: 'xl'
        },
          selectedIncident && [
            React.createElement('div', {
              key: 'form',
              className: 'grid grid-cols-1 md:grid-cols-2 gap-6'
            }, [
              React.createElement(Input, {
                key: 'title',
                label: 'タイトル',
                value: selectedIncident.title,
                onChange: (e) => setSelectedIncident({...selectedIncident, title: e.target.value}),
                disabled: !isEditing,
                required: true
              }),
              React.createElement(Select, {
                key: 'status',
                label: 'ステータス',
                value: selectedIncident.status,
                onChange: (e) => setSelectedIncident({...selectedIncident, status: e.target.value}),
                disabled: !isEditing,
                options: [
                  { value: 'Open', label: 'オープン' },
                  { value: 'In Progress', label: '対応中' },
                  { value: 'Resolved', label: '解決済み' },
                  { value: 'Closed', label: 'クローズ' }
                ]
              }),
              React.createElement(Select, {
                key: 'priority',
                label: '優先度',
                value: selectedIncident.priority,
                onChange: (e) => setSelectedIncident({...selectedIncident, priority: e.target.value}),
                disabled: !isEditing,
                options: [
                  { value: 'Critical', label: '緊急' },
                  { value: 'High', label: '高' },
                  { value: 'Medium', label: '中' },
                  { value: 'Low', label: '低' }
                ]
              }),
              React.createElement(Input, {
                key: 'assignee',
                label: '担当者',
                value: selectedIncident.assignee,
                onChange: (e) => setSelectedIncident({...selectedIncident, assignee: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'reporter',
                label: '報告者',
                value: selectedIncident.reporter,
                onChange: (e) => setSelectedIncident({...selectedIncident, reporter: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'category',
                label: 'カテゴリ',
                value: selectedIncident.category,
                onChange: (e) => setSelectedIncident({...selectedIncident, category: e.target.value}),
                disabled: !isEditing
              })
            ]),
            React.createElement(Textarea, {
              key: 'description',
              label: '詳細説明',
              value: selectedIncident.description,
              onChange: (e) => setSelectedIncident({...selectedIncident, description: e.target.value}),
              disabled: !isEditing
            }),
            isEditing && React.createElement('div', {
              key: 'actions',
              className: 'flex justify-end space-x-4 mt-6'
            }, [
              React.createElement('button', {
                key: 'cancel',
                onClick: () => setIsModalOpen(false),
                className: 'px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50'
              }, 'キャンセル'),
              React.createElement('button', {
                key: 'save',
                onClick: handleSave,
                className: 'px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'
              }, '保存')
            ])
          ]
        )
      ]);
    };

    // Assets Page
    const AssetsPage = () => {
      const [assets, setAssets] = useState(mockData.assets);
      const [selectedAsset, setSelectedAsset] = useState(null);
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [isEditing, setIsEditing] = useState(false);
      const [searchTerm, setSearchTerm] = useState('');
      const [filterType, setFilterType] = useState('');
      const [filterStatus, setFilterStatus] = useState('');

      const columns = [
        { key: 'id', label: '資産タグ' },
        { key: 'name', label: '資産名' },
        { key: 'type', label: 'タイプ' },
        { key: 'location', label: '設置場所' },
        { key: 'owner', label: '所有者' },
        { 
          key: 'status', 
          label: 'ステータス',
          render: (value) => React.createElement(StatusBadge, { status: value })
        }
      ];

      const filteredAssets = assets.filter(asset => {
        return (
          asset.name.toLowerCase().includes(searchTerm.toLowerCase()) &&
          (filterType === '' || asset.type === filterType) &&
          (filterStatus === '' || asset.status === filterStatus)
        );
      });

      const handleCreate = () => {
        setSelectedAsset({
          id: '',
          name: '',
          type: 'Desktop',
          location: '',
          owner: '',
          status: 'Active',
          manufacturer: '',
          model: '',
          serial: '',
          purchaseDate: '',
          warrantyEnd: '',
          ipAddress: '',
          os: ''
        });
        setIsEditing(true);
        setIsModalOpen(true);
      };

      const handleEdit = (asset) => {
        setSelectedAsset({ ...asset });
        setIsEditing(true);
        setIsModalOpen(true);
      };

      const handleSave = () => {
        if (selectedAsset.id && assets.find(a => a.id === selectedAsset.id)) {
          setAssets(assets.map(a => 
            a.id === selectedAsset.id ? selectedAsset : a
          ));
        } else {
          const typePrefix = {
            'Server': 'SRV',
            'Desktop': 'DSK',
            'Laptop': 'LAP',
            'Network Equipment': 'NET'
          };
          const prefix = typePrefix[selectedAsset.type] || 'AST';
          const newAsset = {
            ...selectedAsset,
            id: `${prefix}-${String(assets.length + 1).padStart(3, '0')}`
          };
          setAssets([...assets, newAsset]);
        }
        setIsModalOpen(false);
        setIsEditing(false);
      };

      const handleDelete = (asset) => {
        if (confirm(`資産 ${asset.id} を削除しますか？`)) {
          setAssets(assets.filter(a => a.id !== asset.id));
        }
      };

      return React.createElement('div', {
        className: 'p-6'
      }, [
        React.createElement('div', {
          key: 'header',
          className: 'flex justify-between items-center mb-6'
        }, [
          React.createElement('h1', {
            key: 'title',
            className: 'text-2xl font-bold text-slate-800'
          }, '資産管理 (CMDB)'),
          React.createElement('button', {
            key: 'create',
            onClick: handleCreate,
            className: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700'
          }, '新規資産登録')
        ]),
        
        React.createElement('div', {
          key: 'filters',
          className: 'bg-white rounded-lg shadow p-4 mb-6'
        },
          React.createElement('div', {
            className: 'grid grid-cols-1 md:grid-cols-4 gap-4'
          }, [
            React.createElement('input', {
              key: 'search',
              type: 'text',
              placeholder: '資産を検索...',
              value: searchTerm,
              onChange: (e) => setSearchTerm(e.target.value),
              className: 'px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
            }),
            React.createElement('select', {
              key: 'type-filter',
              value: filterType,
              onChange: (e) => setFilterType(e.target.value),
              className: 'px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
            }, [
              React.createElement('option', { key: 'all-types', value: '' }, 'すべてのタイプ'),
              React.createElement('option', { key: 'server', value: 'Server' }, 'サーバー'),
              React.createElement('option', { key: 'desktop', value: 'Desktop' }, 'デスクトップ'),
              React.createElement('option', { key: 'laptop', value: 'Laptop' }, 'ノートPC'),
              React.createElement('option', { key: 'network', value: 'Network Equipment' }, 'ネットワーク機器')
            ]),
            React.createElement('select', {
              key: 'status-filter',
              value: filterStatus,
              onChange: (e) => setFilterStatus(e.target.value),
              className: 'px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
            }, [
              React.createElement('option', { key: 'all-status', value: '' }, 'すべてのステータス'),
              React.createElement('option', { key: 'active', value: 'Active' }, 'アクティブ'),
              React.createElement('option', { key: 'inactive', value: 'Inactive' }, '非アクティブ'),
              React.createElement('option', { key: 'maintenance', value: 'Maintenance' }, 'メンテナンス中'),
              React.createElement('option', { key: 'retired', value: 'Retired' }, '廃止')
            ]),
            React.createElement('div', {
              key: 'stats',
              className: 'text-sm text-slate-600'
            }, `${filteredAssets.length} 件の資産`)
          ])
        ),

        React.createElement('div', {
          key: 'table',
          className: 'bg-white rounded-lg shadow'
        },
          React.createElement(DataTable, {
            columns,
            data: filteredAssets,
            onRowClick: (asset) => {
              setSelectedAsset(asset);
              setIsEditing(false);
              setIsModalOpen(true);
            },
            onEdit: handleEdit,
            onDelete: handleDelete
          })
        ),

        React.createElement(Modal, {
          key: 'modal',
          isOpen: isModalOpen,
          onClose: () => setIsModalOpen(false),
          title: isEditing ? (selectedAsset?.id ? '資産編集' : '資産登録') : '資産詳細',
          size: 'xl'
        },
          selectedAsset && [
            React.createElement('div', {
              key: 'form',
              className: 'grid grid-cols-1 md:grid-cols-2 gap-6'
            }, [
              React.createElement(Input, {
                key: 'name',
                label: '資産名',
                value: selectedAsset.name,
                onChange: (e) => setSelectedAsset({...selectedAsset, name: e.target.value}),
                disabled: !isEditing,
                required: true
              }),
              React.createElement(Select, {
                key: 'type',
                label: 'タイプ',
                value: selectedAsset.type,
                onChange: (e) => setSelectedAsset({...selectedAsset, type: e.target.value}),
                disabled: !isEditing,
                options: [
                  { value: 'Server', label: 'サーバー' },
                  { value: 'Desktop', label: 'デスクトップ' },
                  { value: 'Laptop', label: 'ノートPC' },
                  { value: 'Network Equipment', label: 'ネットワーク機器' },
                  { value: 'Printer', label: 'プリンタ' }
                ]
              }),
              React.createElement(Input, {
                key: 'location',
                label: '設置場所',
                value: selectedAsset.location,
                onChange: (e) => setSelectedAsset({...selectedAsset, location: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'owner',
                label: '所有者',
                value: selectedAsset.owner,
                onChange: (e) => setSelectedAsset({...selectedAsset, owner: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Select, {
                key: 'status',
                label: 'ステータス',
                value: selectedAsset.status,
                onChange: (e) => setSelectedAsset({...selectedAsset, status: e.target.value}),
                disabled: !isEditing,
                options: [
                  { value: 'Active', label: 'アクティブ' },
                  { value: 'Inactive', label: '非アクティブ' },
                  { value: 'Maintenance', label: 'メンテナンス中' },
                  { value: 'Retired', label: '廃止' }
                ]
              }),
              React.createElement(Input, {
                key: 'manufacturer',
                label: 'メーカー',
                value: selectedAsset.manufacturer,
                onChange: (e) => setSelectedAsset({...selectedAsset, manufacturer: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'model',
                label: 'モデル',
                value: selectedAsset.model,
                onChange: (e) => setSelectedAsset({...selectedAsset, model: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'serial',
                label: 'シリアル番号',
                value: selectedAsset.serial,
                onChange: (e) => setSelectedAsset({...selectedAsset, serial: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'purchaseDate',
                label: '購入日',
                type: 'date',
                value: selectedAsset.purchaseDate,
                onChange: (e) => setSelectedAsset({...selectedAsset, purchaseDate: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'warrantyEnd',
                label: '保証期限',
                type: 'date',
                value: selectedAsset.warrantyEnd,
                onChange: (e) => setSelectedAsset({...selectedAsset, warrantyEnd: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'ipAddress',
                label: 'IPアドレス',
                value: selectedAsset.ipAddress,
                onChange: (e) => setSelectedAsset({...selectedAsset, ipAddress: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'os',
                label: 'OS',
                value: selectedAsset.os,
                onChange: (e) => setSelectedAsset({...selectedAsset, os: e.target.value}),
                disabled: !isEditing
              })
            ]),
            isEditing && React.createElement('div', {
              key: 'actions',
              className: 'flex justify-end space-x-4 mt-6'
            }, [
              React.createElement('button', {
                key: 'cancel',
                onClick: () => setIsModalOpen(false),
                className: 'px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50'
              }, 'キャンセル'),
              React.createElement('button', {
                key: 'save',
                onClick: handleSave,
                className: 'px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'
              }, '保存')
            ])
          ]
        )
      ]);
    };

    // Service Requests Page
    const ServiceRequestsPage = () => {
      const [requests, setRequests] = useState(mockData.serviceRequests);
      const [selectedRequest, setSelectedRequest] = useState(null);
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [isEditing, setIsEditing] = useState(false);

      const columns = [
        { key: 'id', label: 'ID' },
        { key: 'title', label: 'タイトル' },
        { 
          key: 'status', 
          label: 'ステータス',
          render: (value) => React.createElement(StatusBadge, { status: value })
        },
        { 
          key: 'priority', 
          label: '優先度',
          render: (value) => React.createElement(StatusBadge, { status: value, type: 'priority' })
        },
        { key: 'requester', label: '申請者' },
        { key: 'requestDate', label: '申請日' }
      ];

      const handleCreate = () => {
        setSelectedRequest({
          id: '',
          title: '',
          description: '',
          status: 'Pending Approval',
          priority: 'Medium',
          requester: '',
          assignee: '未割当',
          category: '',
          approver: ''
        });
        setIsEditing(true);
        setIsModalOpen(true);
      };

      const handleEdit = (request) => {
        setSelectedRequest({ ...request });
        setIsEditing(true);
        setIsModalOpen(true);
      };

      const handleSave = () => {
        if (selectedRequest.id && requests.find(r => r.id === selectedRequest.id)) {
          setRequests(requests.map(r => 
            r.id === selectedRequest.id ? selectedRequest : r
          ));
        } else {
          const newRequest = {
            ...selectedRequest,
            id: `REQ-2024-${String(requests.length + 1).padStart(3, '0')}`,
            requestDate: new Date().toLocaleString('ja-JP')
          };
          setRequests([...requests, newRequest]);
        }
        setIsModalOpen(false);
        setIsEditing(false);
      };

      return React.createElement('div', {
        className: 'p-6'
      }, [
        React.createElement('div', {
          key: 'header',
          className: 'flex justify-between items-center mb-6'
        }, [
          React.createElement('h1', {
            key: 'title',
            className: 'text-2xl font-bold text-slate-800'
          }, 'サービス要求管理'),
          React.createElement('button', {
            key: 'create',
            onClick: handleCreate,
            className: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700'
          }, '新規要求作成')
        ]),

        React.createElement('div', {
          key: 'table',
          className: 'bg-white rounded-lg shadow'
        },
          React.createElement(DataTable, {
            columns,
            data: requests,
            onRowClick: (request) => {
              setSelectedRequest(request);
              setIsEditing(false);
              setIsModalOpen(true);
            },
            onEdit: handleEdit,
            onDelete: (request) => {
              if (confirm(`サービス要求 ${request.id} を削除しますか？`)) {
                setRequests(requests.filter(r => r.id !== request.id));
              }
            }
          })
        ),

        React.createElement(Modal, {
          key: 'modal',
          isOpen: isModalOpen,
          onClose: () => setIsModalOpen(false),
          title: isEditing ? (selectedRequest?.id ? 'サービス要求編集' : 'サービス要求作成') : 'サービス要求詳細',
          size: 'xl'
        },
          selectedRequest && [
            React.createElement('div', {
              key: 'form',
              className: 'grid grid-cols-1 md:grid-cols-2 gap-6'
            }, [
              React.createElement(Input, {
                key: 'title',
                label: 'タイトル',
                value: selectedRequest.title,
                onChange: (e) => setSelectedRequest({...selectedRequest, title: e.target.value}),
                disabled: !isEditing,
                required: true
              }),
              React.createElement(Select, {
                key: 'status',
                label: 'ステータス',
                value: selectedRequest.status,
                onChange: (e) => setSelectedRequest({...selectedRequest, status: e.target.value}),
                disabled: !isEditing,
                options: [
                  { value: 'Pending Approval', label: '承認待ち' },
                  { value: 'Approved', label: '承認済み' },
                  { value: 'Rejected', label: '却下' },
                  { value: 'In Progress', label: '対応中' },
                  { value: 'Completed', label: '完了' }
                ]
              }),
              React.createElement(Select, {
                key: 'priority',
                label: '優先度',
                value: selectedRequest.priority,
                onChange: (e) => setSelectedRequest({...selectedRequest, priority: e.target.value}),
                disabled: !isEditing,
                options: [
                  { value: 'High', label: '高' },
                  { value: 'Medium', label: '中' },
                  { value: 'Low', label: '低' }
                ]
              }),
              React.createElement(Input, {
                key: 'requester',
                label: '申請者',
                value: selectedRequest.requester,
                onChange: (e) => setSelectedRequest({...selectedRequest, requester: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'assignee',
                label: '担当者',
                value: selectedRequest.assignee,
                onChange: (e) => setSelectedRequest({...selectedRequest, assignee: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Input, {
                key: 'category',
                label: 'カテゴリ',
                value: selectedRequest.category,
                onChange: (e) => setSelectedRequest({...selectedRequest, category: e.target.value}),
                disabled: !isEditing
              })
            ]),
            React.createElement(Textarea, {
              key: 'description',
              label: '詳細説明',
              value: selectedRequest.description,
              onChange: (e) => setSelectedRequest({...selectedRequest, description: e.target.value}),
              disabled: !isEditing
            }),
            isEditing && React.createElement('div', {
              key: 'actions',
              className: 'flex justify-end space-x-4 mt-6'
            }, [
              React.createElement('button', {
                key: 'cancel',
                onClick: () => setIsModalOpen(false),
                className: 'px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50'
              }, 'キャンセル'),
              React.createElement('button', {
                key: 'save',
                onClick: handleSave,
                className: 'px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'
              }, '保存')
            ])
          ]
        )
      ]);
    };

    // Knowledge Page
    const KnowledgePage = () => {
      const [articles, setArticles] = useState(mockData.knowledge);
      const [selectedArticle, setSelectedArticle] = useState(null);
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [isEditing, setIsEditing] = useState(false);
      const [searchTerm, setSearchTerm] = useState('');

      const columns = [
        { key: 'id', label: 'ID' },
        { key: 'title', label: 'タイトル' },
        { key: 'category', label: 'カテゴリ' },
        { key: 'author', label: '作成者' },
        { key: 'created', label: '作成日' },
        { key: 'views', label: '閲覧数' }
      ];

      const filteredArticles = articles.filter(article => 
        article.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
        article.content.toLowerCase().includes(searchTerm.toLowerCase())
      );

      const handleCreate = () => {
        setSelectedArticle({
          id: '',
          title: '',
          content: '',
          category: '',
          tags: [],
          author: '',
          views: 0
        });
        setIsEditing(true);
        setIsModalOpen(true);
      };

      return React.createElement('div', {
        className: 'p-6'
      }, [
        React.createElement('div', {
          key: 'header',
          className: 'flex justify-between items-center mb-6'
        }, [
          React.createElement('h1', {
            key: 'title',
            className: 'text-2xl font-bold text-slate-800'
          }, 'ナレッジベース'),
          React.createElement('button', {
            key: 'create',
            onClick: handleCreate,
            className: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700'
          }, '新規記事作成')
        ]),

        React.createElement('div', {
          key: 'search',
          className: 'bg-white rounded-lg shadow p-4 mb-6'
        },
          React.createElement('input', {
            type: 'text',
            placeholder: 'ナレッジを検索...',
            value: searchTerm,
            onChange: (e) => setSearchTerm(e.target.value),
            className: 'w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
          })
        ),

        React.createElement('div', {
          key: 'articles',
          className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'
        },
          filteredArticles.map(article => 
            React.createElement('div', {
              key: article.id,
              className: 'bg-white rounded-lg shadow hover:shadow-lg transition-shadow cursor-pointer',
              onClick: () => {
                setSelectedArticle(article);
                setIsEditing(false);
                setIsModalOpen(true);
              }
            }, [
              React.createElement('div', {
                key: 'content',
                className: 'p-6'
              }, [
                React.createElement('h3', {
                  key: 'title',
                  className: 'text-lg font-semibold text-slate-800 mb-2'
                }, article.title),
                React.createElement('p', {
                  key: 'category',
                  className: 'text-sm text-blue-600 mb-2'
                }, article.category),
                React.createElement('p', {
                  key: 'content',
                  className: 'text-slate-600 text-sm mb-4 line-clamp-3'
                }, article.content.substring(0, 100) + '...'),
                React.createElement('div', {
                  key: 'tags',
                  className: 'flex flex-wrap gap-2 mb-4'
                }, article.tags.map(tag => 
                  React.createElement('span', {
                    key: tag,
                    className: 'px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded'
                  }, tag)
                )),
                React.createElement('div', {
                  key: 'meta',
                  className: 'flex justify-between text-xs text-slate-500'
                }, [
                  React.createElement('span', { key: 'author' }, article.author),
                  React.createElement('span', { key: 'views' }, `${article.views} 回閲覧`)
                ])
              ])
            ])
          )
        ),

        React.createElement(Modal, {
          key: 'modal',
          isOpen: isModalOpen,
          onClose: () => setIsModalOpen(false),
          title: isEditing ? (selectedArticle?.id ? 'ナレッジ編集' : 'ナレッジ作成') : 'ナレッジ詳細',
          size: 'xl'
        },
          selectedArticle && [
            React.createElement('div', {
              key: 'form'
            }, [
              React.createElement(Input, {
                key: 'title',
                label: 'タイトル',
                value: selectedArticle.title,
                onChange: (e) => setSelectedArticle({...selectedArticle, title: e.target.value}),
                disabled: !isEditing,
                required: true
              }),
              React.createElement(Input, {
                key: 'category',
                label: 'カテゴリ',
                value: selectedArticle.category,
                onChange: (e) => setSelectedArticle({...selectedArticle, category: e.target.value}),
                disabled: !isEditing
              }),
              React.createElement(Textarea, {
                key: 'content',
                label: '内容',
                value: selectedArticle.content,
                onChange: (e) => setSelectedArticle({...selectedArticle, content: e.target.value}),
                disabled: !isEditing,
                rows: 10
              })
            ]),
            isEditing && React.createElement('div', {
              key: 'actions',
              className: 'flex justify-end space-x-4 mt-6'
            }, [
              React.createElement('button', {
                key: 'cancel',
                onClick: () => setIsModalOpen(false),
                className: 'px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50'
              }, 'キャンセル'),
              React.createElement('button', {
                key: 'save',
                onClick: () => {
                  // Save logic here
                  setIsModalOpen(false);
                  setIsEditing(false);
                },
                className: 'px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'
              }, '保存')
            ])
          ]
        )
      ]);
    };

    // Changes Page
    const ChangesPage = () => {
      const [changes, setChanges] = useState(mockData.changes);

      const columns = [
        { key: 'id', label: 'ID' },
        { key: 'title', label: 'タイトル' },
        { 
          key: 'status', 
          label: 'ステータス',
          render: (value) => React.createElement(StatusBadge, { status: value })
        },
        { 
          key: 'priority', 
          label: '優先度',
          render: (value) => React.createElement(StatusBadge, { status: value, type: 'priority' })
        },
        { key: 'implementer', label: '実施者' },
        { key: 'plannedStart', label: '予定開始日時' }
      ];

      return React.createElement('div', {
        className: 'p-6'
      }, [
        React.createElement('div', {
          key: 'header',
          className: 'flex justify-between items-center mb-6'
        }, [
          React.createElement('h1', {
            key: 'title',
            className: 'text-2xl font-bold text-slate-800'
          }, '変更管理'),
          React.createElement('button', {
            key: 'create',
            className: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700'
          }, '新規変更要求')
        ]),

        React.createElement('div', {
          key: 'table',
          className: 'bg-white rounded-lg shadow'
        },
          React.createElement(DataTable, {
            columns,
            data: changes,
            onRowClick: () => {},
            onEdit: () => {},
            onDelete: () => {}
          })
        )
      ]);
    };

    // Releases Page
    const ReleasesPage = () => {
      const [releases, setReleases] = useState(mockData.releases);

      const columns = [
        { key: 'id', label: 'ID' },
        { key: 'title', label: 'タイトル' },
        { key: 'version', label: 'バージョン' },
        { 
          key: 'status', 
          label: 'ステータス',
          render: (value) => React.createElement(StatusBadge, { status: value })
        },
        { key: 'releaseDate', label: 'リリース予定日' },
        { key: 'manager', label: 'リリース責任者' }
      ];

      return React.createElement('div', {
        className: 'p-6'
      }, [
        React.createElement('div', {
          key: 'header',
          className: 'flex justify-between items-center mb-6'
        }, [
          React.createElement('h1', {
            key: 'title',
            className: 'text-2xl font-bold text-slate-800'
          }, 'リリース管理'),
          React.createElement('button', {
            key: 'create',
            className: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700'
          }, '新規リリース計画')
        ]),

        React.createElement('div', {
          key: 'table',
          className: 'bg-white rounded-lg shadow'
        },
          React.createElement(DataTable, {
            columns,
            data: releases,
            onRowClick: () => {},
            onEdit: () => {},
            onDelete: () => {}
          })
        )
      ]);
    };

    // Settings Page
    const SettingsPage = () => {
      const { user } = useAuth();
      const [activeTab, setActiveTab] = useState('profile');

      const tabs = [
        { id: 'profile', label: 'プロフィール', icon: '👤' },
        { id: 'system', label: 'システム設定', icon: '⚙️' },
        { id: 'users', label: 'ユーザー管理', icon: '👥' },
        { id: 'security', label: 'セキュリティ', icon: '🔒' }
      ];

      return React.createElement('div', {
        className: 'p-6'
      }, [
        React.createElement('h1', {
          key: 'title',
          className: 'text-2xl font-bold text-slate-800 mb-6'
        }, '設定'),

        React.createElement('div', {
          key: 'content',
          className: 'bg-white rounded-lg shadow'
        }, [
          React.createElement('div', {
            key: 'tabs',
            className: 'border-b border-slate-200'
          },
            React.createElement('nav', {
              className: 'flex space-x-8'
            },
              tabs.map(tab => 
                React.createElement('button', {
                  key: tab.id,
                  onClick: () => setActiveTab(tab.id),
                  className: `flex items-center space-x-2 px-4 py-4 border-b-2 font-medium text-sm ${
                    activeTab === tab.id 
                      ? 'border-blue-500 text-blue-600' 
                      : 'border-transparent text-slate-500 hover:text-slate-700'
                  }`
                }, [
                  React.createElement('span', { key: 'icon' }, tab.icon),
                  React.createElement('span', { key: 'label' }, tab.label)
                ])
              )
            )
          ),
          React.createElement('div', {
            key: 'tab-content',
            className: 'p-6'
          },
            activeTab === 'profile' && React.createElement('div', {}, [
              React.createElement('h3', {
                key: 'title',
                className: 'text-lg font-medium text-slate-800 mb-4'
              }, 'プロフィール設定'),
              React.createElement('div', {
                key: 'form',
                className: 'grid grid-cols-1 md:grid-cols-2 gap-6'
              }, [
                React.createElement(Input, {
                  key: 'username',
                  label: 'ユーザー名',
                  value: user?.username || '',
                  disabled: true
                }),
                React.createElement(Input, {
                  key: 'email',
                  label: 'メールアドレス',
                  value: user?.email || '',
                  type: 'email'
                }),
                React.createElement(Input, {
                  key: 'name',
                  label: '表示名',
                  value: user?.username || ''
                }),
                React.createElement(Select, {
                  key: 'language',
                  label: '言語',
                  value: 'ja',
                  options: [
                    { value: 'ja', label: '日本語' },
                    { value: 'en', label: 'English' }
                  ]
                })
              ])
            ]),
            activeTab === 'system' && React.createElement('div', {}, [
              React.createElement('h3', {
                key: 'title',
                className: 'text-lg font-medium text-slate-800 mb-4'
              }, 'システム設定'),
              React.createElement('div', {
                key: 'settings',
                className: 'space-y-6'
              }, [
                React.createElement('div', {
                  key: 'notifications',
                  className: 'flex items-center justify-between'
                }, [
                  React.createElement('div', { key: 'label' }, [
                    React.createElement('h4', {
                      key: 'title',
                      className: 'text-sm font-medium text-slate-800'
                    }, '通知設定'),
                    React.createElement('p', {
                      key: 'desc',
                      className: 'text-sm text-slate-500'
                    }, 'メール通知を有効にする')
                  ]),
                  React.createElement('input', {
                    key: 'toggle',
                    type: 'checkbox',
                    className: 'h-4 w-4 text-blue-600'
                  })
                ])
              ])
            ]),
            activeTab === 'users' && React.createElement('div', {}, [
              React.createElement('div', {
                key: 'header',
                className: 'flex justify-between items-center mb-4'
              }, [
                React.createElement('h3', {
                  key: 'title',
                  className: 'text-lg font-medium text-slate-800'
                }, 'ユーザー管理'),
                React.createElement('button', {
                  key: 'create',
                  className: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700'
                }, '新規ユーザー')
              ]),
              React.createElement('div', {
                key: 'users',
                className: 'space-y-4'
              }, [
                { username: 'admin', email: 'admin@company.com', role: '管理者', status: 'アクティブ' },
                { username: 'operator', email: 'operator@company.com', role: 'オペレータ', status: 'アクティブ' }
              ].map(user => 
                React.createElement('div', {
                  key: user.username,
                  className: 'flex items-center justify-between p-4 border border-slate-200 rounded-lg'
                }, [
                  React.createElement('div', { key: 'info' }, [
                    React.createElement('h4', {
                      key: 'name',
                      className: 'font-medium text-slate-800'
                    }, user.username),
                    React.createElement('p', {
                      key: 'email',
                      className: 'text-sm text-slate-500'
                    }, user.email),
                    React.createElement('p', {
                      key: 'role',
                      className: 'text-sm text-slate-500'
                    }, `役割: ${user.role}`)
                  ]),
                  React.createElement(StatusBadge, {
                    key: 'status',
                    status: user.status
                  })
                ])
              ))
            ])
          )
        ])
      ]);
    };

    // Login Page Component
    const LoginPage = () => {
      const [username, setUsername] = useState('');
      const [password, setPassword] = useState('');
      const { login, error, isLoading } = useAuth();
      const navigate = useNavigate();

      const handleSubmit = async (e) => {
        e.preventDefault();
        const success = await login(username, password);
        if (success) {
          navigate('/dashboard');
        }
      };

      return React.createElement('div', {
        className: 'min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 to-slate-700 p-4'
      }, 
        React.createElement('div', {
          className: 'w-full max-w-md bg-white rounded-lg shadow-2xl p-8'
        }, [
          React.createElement('div', { key: 'header', className: 'text-center mb-8' }, [
            React.createElement('div', { 
              key: 'icon',
              className: 'w-20 h-20 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl'
            }, '🔒'),
            React.createElement('h1', { 
              key: 'title',
              className: 'text-2xl font-bold text-slate-800 mb-1' 
            }, 'ITSM運用システム'),
            React.createElement('p', { 
              key: 'subtitle',
              className: 'text-sm text-slate-600' 
            }, 'プラットフォーム'),
            React.createElement('div', {
              key: 'divider',
              className: 'w-16 h-0.5 bg-gradient-to-r from-blue-600 to-indigo-600 mx-auto mt-4'
            })
          ]),
          React.createElement('form', {
            key: 'form',
            onSubmit: handleSubmit,
            className: 'space-y-5'
          }, [
            React.createElement(Input, {
              key: 'username',
              label: 'ユーザー名',
              value: username,
              onChange: (e) => setUsername(e.target.value),
              placeholder: 'ユーザー名を入力',
              required: true,
              disabled: isLoading
            }),
            React.createElement(Input, {
              key: 'password',
              label: 'パスワード',
              type: 'password',
              value: password,
              onChange: (e) => setPassword(e.target.value),
              placeholder: 'パスワードを入力',
              required: true,
              disabled: isLoading
            }),
            React.createElement('div', {
              key: 'test-accounts',
              className: 'bg-blue-50 border border-blue-200 rounded-lg p-4'
            }, [
              React.createElement('div', { key: 'test-header', className: 'flex items-center mb-2' }, [
                React.createElement('span', { key: 'icon', className: 'text-blue-600 mr-2' }, 'ℹ️'),
                React.createElement('p', { key: 'title', className: 'font-medium text-blue-800 text-sm' }, 'テストアカウント:')
              ]),
              React.createElement('div', { key: 'accounts', className: 'text-xs text-blue-700 space-y-1' }, [
                React.createElement('p', { key: 'admin' }, '管理者: admin / admin123'),
                React.createElement('p', { key: 'operator' }, 'オペレータ: operator / operator123')
              ])
            ]),
            error && React.createElement('div', {
              key: 'error',
              className: 'bg-red-50 border border-red-200 rounded-lg p-4 flex items-center'
            }, [
              React.createElement('span', { key: 'error-icon', className: 'text-red-500 mr-2' }, '⚠️'),
              React.createElement('span', { key: 'error-text', className: 'text-sm text-red-800' }, error)
            ]),
            React.createElement('button', {
              key: 'submit',
              type: 'submit',
              disabled: !username || !password || isLoading,
              className: 'w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 disabled:transform-none shadow-lg font-medium'
            }, [
              isLoading && React.createElement('span', {
                key: 'spinner',
                className: 'inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2'
              }),
              isLoading ? 'ログイン中...' : 'ログイン'
            ])
          ])
        ])
      );
    };

    // Sidebar Navigation Component
    const Sidebar = () => {
      const { logout, user } = useAuth();
      const navigate = useNavigate();
      const location = useLocation();

      const menuItems = [
        { name: 'ダッシュボード', path: '/dashboard', icon: '📊' },
        { name: 'インシデント', path: '/incidents', icon: '🚨' },
        { name: '資産管理', path: '/assets', icon: '💻' },
        { name: 'サービス要求', path: '/requests', icon: '📝' },
        { name: 'ナレッジ', path: '/knowledge', icon: '📚' },
        { name: '変更管理', path: '/changes', icon: '🔄' },
        { name: 'リリース管理', path: '/releases', icon: '🚀' },
        { name: '設定', path: '/settings', icon: '⚙️' }
      ];

      return React.createElement('div', {
        className: 'w-64 bg-slate-800 text-white min-h-screen flex flex-col'
      }, [
        React.createElement('div', {
          key: 'header',
          className: 'p-6 border-b border-slate-700'
        }, [
          React.createElement('h2', {
            key: 'title',
            className: 'text-xl font-bold'
          }, 'ITSM運用システム'),
          React.createElement('p', {
            key: 'user',
            className: 'text-sm text-slate-300 mt-1'
          }, `ようこそ、${user?.username}さん`)
        ]),
        React.createElement('nav', {
          key: 'nav',
          className: 'flex-1 p-4'
        }, 
          React.createElement('ul', {
            className: 'space-y-2'
          }, menuItems.map(item => 
            React.createElement('li', {
              key: item.path
            },
              React.createElement('a', {
                href: `#${item.path}`,
                className: `flex items-center px-4 py-3 rounded-lg transition-colors ${
                  location.pathname === item.path 
                    ? 'bg-blue-600 text-white' 
                    : 'hover:bg-slate-700'
                }`,
                onClick: (e) => {
                  e.preventDefault();
                  navigate(item.path);
                }
              }, [
                React.createElement('span', {
                  key: 'icon',
                  className: 'mr-3 text-lg'
                }, item.icon),
                React.createElement('span', {
                  key: 'name'
                }, item.name)
              ])
            )
          ))
        ),
        React.createElement('div', {
          key: 'footer',
          className: 'p-4 border-t border-slate-700'
        },
          React.createElement('button', {
            onClick: logout,
            className: 'w-full flex items-center px-4 py-3 rounded-lg hover:bg-slate-700 transition-colors text-left'
          }, [
            React.createElement('span', {
              key: 'icon',
              className: 'mr-3 text-lg'
            }, '🚪'),
            React.createElement('span', {
              key: 'text'
            }, 'ログアウト')
          ])
        )
      ]);
    };

    // Main Layout Component
    const MainLayout = ({ children }) => {
      return React.createElement('div', {
        className: 'flex min-h-screen bg-slate-50'
      }, [
        React.createElement(Sidebar, { key: 'sidebar' }),
        React.createElement('div', {
          key: 'content',
          className: 'flex-1 flex flex-col'
        }, children)
      ]);
    };

    // Dashboard Page Component (Updated)
    const DashboardPage = () => {
      const { user } = useAuth();
      
      const stats = [
        { title: 'インシデント', count: '24', label: 'オープン中', color: 'blue', icon: '🚨' },
        { title: '資産', count: '342', label: '管理中', color: 'green', icon: '💻' },
        { title: 'サービス要求', count: '15', label: '承認待ち', color: 'yellow', icon: '📝' },
        { title: 'システム可用性', count: '99.8%', label: '今月の稼働率', color: 'green', icon: '📊' }
      ];

      return React.createElement(MainLayout, {}, [
        React.createElement('div', {
          key: 'header',
          className: 'bg-white shadow border-b border-slate-200'
        }, 
          React.createElement('div', {
            className: 'px-6 py-4'
          },
            React.createElement('h1', {
              className: 'text-2xl font-bold text-slate-800'
            }, 'ダッシュボード')
          )
        ),
        React.createElement('div', {
          key: 'content',
          className: 'flex-1 p-6'
        }, [
          React.createElement('div', {
            key: 'welcome',
            className: 'bg-white rounded-lg shadow p-6 mb-6'
          }, [
            React.createElement('h2', {
              key: 'title',
              className: 'text-xl font-semibold text-slate-800 mb-2'
            }, `ようこそ、${user?.username}さん`),
            React.createElement('p', {
              key: 'description',
              className: 'text-slate-600'
            }, 'ITSM運用システムのダッシュボードです。システムの状況を一目で確認できます。')
          ]),
          React.createElement('div', {
            key: 'stats',
            className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6'
          }, stats.map(stat => 
            React.createElement('div', {
              key: stat.title,
              className: 'bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow'
            }, [
              React.createElement('div', {
                key: 'header',
                className: 'flex items-center justify-between mb-4'
              }, [
                React.createElement('h3', {
                  key: 'title',
                  className: 'text-lg font-medium text-slate-800'
                }, stat.title),
                React.createElement('span', {
                  key: 'icon',
                  className: 'text-2xl'
                }, stat.icon)
              ]),
              React.createElement('p', {
                key: 'count',
                className: `text-3xl font-bold text-${stat.color}-600 mb-1`
              }, stat.count),
              React.createElement('p', {
                key: 'label',
                className: 'text-sm text-slate-500'
              }, stat.label)
            ])
          )),
          React.createElement('div', {
            key: 'recent',
            className: 'bg-white rounded-lg shadow p-6'
          }, [
            React.createElement('h3', {
              key: 'title',
              className: 'text-lg font-medium text-slate-800 mb-4'
            }, '最近の活動'),
            React.createElement('div', {
              key: 'activities',
              className: 'space-y-3'
            }, [
              { time: '10:30', desc: '新しいインシデント #INC-2024-001 が作成されました', type: 'incident' },
              { time: '09:15', desc: 'サーバー #SRV-001 の定期メンテナンスが完了しました', type: 'maintenance' },
              { time: '08:45', desc: 'ユーザー john.doe からサービス要求 #REQ-2024-045 が提出されました', type: 'request' }
            ].map((activity, index) => 
              React.createElement('div', {
                key: index,
                className: 'flex items-start space-x-3 p-3 rounded-lg bg-slate-50'
              }, [
                React.createElement('span', {
                  key: 'time',
                  className: 'text-sm text-slate-500 font-mono w-12'
                }, activity.time),
                React.createElement('span', {
                  key: 'desc',
                  className: 'text-sm text-slate-700'
                }, activity.desc)
              ])
            ))
          ])
        ])
      ]);
    };

    // Protected Route Component
    const ProtectedRoute = ({ children }) => {
      const { user } = useAuth();
      return user ? children : React.createElement(Navigate, { to: '/login', replace: true });
    };

    // Main App Component
    const App = () => {
      return React.createElement(AuthProvider, {},
        React.createElement(HashRouter, {},
          React.createElement(Routes, {}, [
            React.createElement(Route, {
              key: 'login',
              path: '/login',
              element: React.createElement(LoginPage)
            }),
            React.createElement(Route, {
              key: 'dashboard',
              path: '/dashboard',
              element: React.createElement(ProtectedRoute, {},
                React.createElement(DashboardPage)
              )
            }),
            React.createElement(Route, {
              key: 'incidents',
              path: '/incidents',
              element: React.createElement(ProtectedRoute, {},
                React.createElement(MainLayout, {},
                  React.createElement(IncidentsPage)
                )
              )
            }),
            React.createElement(Route, {
              key: 'assets',
              path: '/assets',
              element: React.createElement(ProtectedRoute, {},
                React.createElement(MainLayout, {},
                  React.createElement(AssetsPage)
                )
              )
            }),
            React.createElement(Route, {
              key: 'requests',
              path: '/requests',
              element: React.createElement(ProtectedRoute, {},
                React.createElement(MainLayout, {},
                  React.createElement(ServiceRequestsPage)
                )
              )
            }),
            React.createElement(Route, {
              key: 'knowledge',
              path: '/knowledge',
              element: React.createElement(ProtectedRoute, {},
                React.createElement(MainLayout, {},
                  React.createElement(KnowledgePage)
                )
              )
            }),
            React.createElement(Route, {
              key: 'changes',
              path: '/changes',
              element: React.createElement(ProtectedRoute, {},
                React.createElement(MainLayout, {},
                  React.createElement(ChangesPage)
                )
              )
            }),
            React.createElement(Route, {
              key: 'releases',
              path: '/releases',
              element: React.createElement(ProtectedRoute, {},
                React.createElement(MainLayout, {},
                  React.createElement(ReleasesPage)
                )
              )
            }),
            React.createElement(Route, {
              key: 'settings',
              path: '/settings',
              element: React.createElement(ProtectedRoute, {},
                React.createElement(MainLayout, {},
                  React.createElement(SettingsPage)
                )
              )
            }),
            React.createElement(Route, {
              key: 'root',
              path: '/',
              element: React.createElement(Navigate, { to: '/dashboard', replace: true })
            }),
            React.createElement(Route, {
              key: 'fallback',
              path: '*',
              element: React.createElement(Navigate, { to: '/dashboard', replace: true })
            })
          ])
        )
      );
    };

    // Render the app
    ReactDOM.render(React.createElement(App), document.getElementById('root'));
        `;
        document.head.appendChild(script);
      } else {
        // Retry after 100ms if libraries aren't ready
        setTimeout(waitForLibraries, 100);
      }
    }
    
    // Start waiting for libraries to load
    waitForLibraries();
  </script>
</body>
</html>