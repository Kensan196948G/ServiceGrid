<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ITSM運用システム - 詳細版</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/react-router-dom@6.26.2/dist/umd/react-router-dom.production.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { 
      font-family: 'Hiragino Kaku Gothic Pro', 'ヒラギノ角ゴ Pro W3', Meiryo, メイリオ, Osaka, 'MS PGothic', arial, helvetica, sans-serif; 
      margin: 0; 
      background: #f8fafc;
    }
    .loading { 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      height: 100vh; 
      flex-direction: column;
    }
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }
    .modal-content {
      background: white;
      border-radius: 8px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      max-width: 90vw;
      max-height: 90vh;
      overflow-y: auto;
      margin: 20px;
    }
    .table-responsive {
      overflow-x: auto;
    }
    .priority-critical { background-color: #fecaca; color: #991b1b; }
    .priority-high { background-color: #fed7aa; color: #9a3412; }
    .priority-medium { background-color: #fef3c7; color: #92400e; }
    .priority-low { background-color: #d1fae5; color: #065f46; }
    .status-open { background-color: #dbeafe; color: #1e40af; }
    .status-progress { background-color: #fef3c7; color: #92400e; }
    .status-resolved { background-color: #d1fae5; color: #065f46; }
    .status-closed { background-color: #f3f4f6; color: #374151; }
    .status-new { background-color: #e0e7ff; color: #3730a3; }
    .status-approved { background-color: #dcfce7; color: #166534; }
    .status-rejected { background-color: #fee2e2; color: #dc2626; }
    .status-pending { background-color: #fef3c7; color: #92400e; }
    .status-scheduled { background-color: #ddd6fe; color: #5b21b6; }
    .status-planning { background-color: #fef3c7; color: #92400e; }
    .status-released { background-color: #dcfce7; color: #166534; }
    .form-section {
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <div id="root">
    <div class="loading">
      <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mb-4"></div>
      <p class="text-xl text-slate-700">ITSM運用システム読み込み中...</p>
    </div>
  </div>

  <script>
    // ライブラリ読み込み確認
    window.addEventListener('load', function() {
      setTimeout(function() {
        initializeApp();
      }, 500);
    });

    function initializeApp() {
      if (typeof React === 'undefined' || typeof ReactDOM === 'undefined' || typeof ReactRouterDOM === 'undefined') {
        console.error('Required libraries not loaded');
        return;
      }

      const { useState, useEffect, createContext, useContext, useCallback } = React;
      const { HashRouter, Routes, Route, Navigate, useNavigate, useLocation } = ReactRouterDOM;

      // モックデータストア
      const mockData = {
        incidents: [
          {
            id: 'INC-2024-001',
            title: 'メールサーバー接続エラー',
            description: 'Outlook接続時にタイムアウトエラーが発生。複数のユーザーから同様の報告あり。',
            status: 'Open',
            priority: 'High',
            assignee: '田中太郎',
            reporter: '佐藤花子',
            created: '2024-06-22 09:30',
            updated: '2024-06-22 10:15',
            category: 'ネットワーク',
            impact: 'High',
            urgency: 'High',
            resolution: '',
            estimatedResolution: '2024-06-22 15:00'
          },
          {
            id: 'INC-2024-002',
            title: 'プリンタ印刷不良',
            description: '3F会議室のプリンタで印刷が途中で止まる現象が発生',
            status: 'In Progress',
            priority: 'Medium',
            assignee: '山田次郎',
            reporter: '鈴木一郎',
            created: '2024-06-22 08:15',
            updated: '2024-06-22 09:00',
            category: 'ハードウェア',
            impact: 'Medium',
            urgency: 'Medium',
            resolution: '予備トナーカートリッジに交換予定',
            estimatedResolution: '2024-06-22 12:00'
          },
          {
            id: 'INC-2024-003',
            title: 'システムレスポンス低下',
            description: '会計システムの応答時間が通常の3倍以上に遅延',
            status: 'Resolved',
            priority: 'Critical',
            assignee: '伊藤三郎',
            reporter: '会計部 高橋',
            created: '2024-06-21 14:30',
            updated: '2024-06-21 18:45',
            category: 'アプリケーション',
            impact: 'High',
            urgency: 'Critical',
            resolution: 'データベースインデックスの再構築により解決',
            estimatedResolution: '2024-06-21 16:00'
          }
        ],
        assets: [
          {
            id: 'ASSET-001',
            tag: 'SRV-001',
            name: 'メールサーバー',
            category: 'サーバー',
            type: 'Dell PowerEdge R740',
            status: 'Active',
            location: 'データセンター A',
            owner: 'IT部',
            assignedTo: '田中太郎',
            purchaseDate: '2023-01-15',
            warrantyEnd: '2026-01-15',
            cost: '¥850,000',
            serialNumber: 'SN123456789',
            ipAddress: '192.168.1.10',
            osVersion: 'Windows Server 2022',
            specs: {
              cpu: 'Intel Xeon Silver 4214R',
              memory: '64GB DDR4',
              storage: '2TB SSD RAID1'
            }
          },
          {
            id: 'ASSET-002',
            tag: 'DSK-001',
            name: '営業部デスクトップPC',
            category: 'デスクトップ',
            type: 'HP ProDesk 600 G6',
            status: 'Active',
            location: '2F 営業部',
            owner: '営業部',
            assignedTo: '佐藤花子',
            purchaseDate: '2023-03-10',
            warrantyEnd: '2026-03-10',
            cost: '¥120,000',
            serialNumber: 'DSK987654321',
            ipAddress: '192.168.2.15',
            osVersion: 'Windows 11 Pro',
            specs: {
              cpu: 'Intel Core i5-10500',
              memory: '16GB DDR4',
              storage: '512GB SSD'
            }
          }
        ],
        serviceRequests: [
          {
            id: 'REQ-2024-001',
            title: '新入社員用PCセットアップ',
            description: '4月入社の新入社員3名分のPCセットアップとアカウント作成',
            status: 'New',
            priority: 'Medium',
            requester: '人事部 中村',
            assignee: 'IT部 田中',
            category: 'ハードウェア',
            created: '2024-06-20 10:00',
            dueDate: '2024-06-25',
            approver: 'IT部長',
            estimatedHours: 8,
            actualHours: 0
          },
          {
            id: 'REQ-2024-002',
            title: 'メールアカウント追加',
            description: '外部委託先担当者用の一時メールアカウント作成',
            status: 'Approved',
            priority: 'Low',
            requester: 'プロジェクト管理室',
            assignee: 'IT部 山田',
            category: 'アカウント管理',
            created: '2024-06-19 14:30',
            dueDate: '2024-06-22',
            approver: 'IT部長',
            estimatedHours: 2,
            actualHours: 1.5
          }
        ],
        knowledge: [
          {
            id: 'KB-001',
            title: 'パスワードリセット手順',
            content: 'Active Directoryパスワードのリセット手順について詳細に説明します。\n\n1. 管理コンソールにアクセス\n2. ユーザー検索\n3. パスワードリセット実行\n4. 新パスワード通知\n\n注意事項：リセット後は必ず次回ログイン時に変更を要求してください。',
            category: 'アカウント管理',
            tags: ['パスワード', 'リセット', 'AD'],
            author: '田中太郎',
            created: '2024-06-01',
            updated: '2024-06-15',
            views: 145,
            status: 'Published',
            approver: 'IT部長'
          },
          {
            id: 'KB-002',
            title: 'VPN接続設定ガイド',
            content: 'リモートワーク用VPN接続の設定方法を説明します。\n\n【Windows環境】\n1. VPNクライアントダウンロード\n2. 接続設定\n3. 認証情報入力\n4. 接続テスト\n\n【Mac環境】\n同様の手順でネイティブVPNクライアントを使用\n\nトラブルシューティング：接続できない場合はファイアウォール設定を確認してください。',
            category: 'ネットワーク',
            tags: ['VPN', 'リモートワーク', '設定'],
            author: '山田次郎',
            created: '2024-05-15',
            updated: '2024-06-01',
            views: 89,
            status: 'Published',
            approver: 'IT部長'
          }
        ],
        changes: [
          {
            id: 'CHG-2024-001',
            title: 'メールサーバーOSアップデート',
            description: 'Exchange Server 2019のセキュリティパッチ適用とOS更新',
            status: 'Scheduled',
            priority: 'High',
            implementer: 'IT部 田中',
            requester: 'IT部長',
            plannedStart: '2024-06-25 02:00',
            plannedEnd: '2024-06-25 04:00',
            category: 'インフラ',
            risk: 'Medium',
            impact: 'High',
            approver: 'IT部長',
            rollbackPlan: 'スナップショット復元によるロールバック',
            testPlan: '事前テスト環境での検証済み',
            created: '2024-06-15',
            approvedDate: '2024-06-18'
          }
        ],
        releases: [
          {
            id: 'REL-2024-001',
            title: '勤怠管理システム v2.1',
            description: '新機能追加とバグ修正：休暇申請機能改善、レポート機能強化',
            status: 'Planning',
            releaseDate: '2024-07-01',
            version: '2.1.0',
            components: ['Web UI', 'データベース', 'API', 'レポート機能'],
            manager: 'システム開発部 鈴木',
            environment: 'Production',
            deploymentMethod: 'Blue-Green Deployment',
            rollbackPlan: '前バージョンへの即座切り戻し',
            testingStatus: 'QA Testing',
            created: '2024-05-01',
            plannedStart: '2024-06-30 20:00',
            plannedEnd: '2024-07-01 02:00'
          }
        ]
      };

      // 認証コンテキスト
      const AuthContext = createContext();

      const AuthProvider = ({ children }) => {
        const [user, setUser] = useState(null);
        const [isLoading, setIsLoading] = useState(false);
        const [error, setError] = useState(null);

        useEffect(() => {
          const savedUser = sessionStorage.getItem('itsm_user');
          if (savedUser) {
            try {
              setUser(JSON.parse(savedUser));
            } catch (e) {
              sessionStorage.removeItem('itsm_user');
            }
          }
        }, []);

        const login = async (username, password) => {
          setError(null);
          setIsLoading(true);
          
          await new Promise(resolve => setTimeout(resolve, 1000));
          
          if ((username === 'admin' && password === 'admin123') || 
              (username === 'operator' && password === 'operator123')) {
            const userData = { 
              username, 
              role: username === 'admin' ? 'ADMIN' : 'USER',
              id: username === 'admin' ? '1' : '2',
              email: username === 'admin' ? 'admin@company.com' : 'operator@company.com',
              department: username === 'admin' ? 'IT部' : '運用部'
            };
            setUser(userData);
            sessionStorage.setItem('itsm_user', JSON.stringify(userData));
            setIsLoading(false);
            return true;
          } else {
            setError('ユーザー名またはパスワードが正しくありません');
            setIsLoading(false);
            return false;
          }
        };

        const logout = () => {
          setUser(null);
          setError(null);
          sessionStorage.removeItem('itsm_user');
        };

        return React.createElement(AuthContext.Provider, {
          value: { user, login, logout, isLoading, error }
        }, children);
      };

      const useAuth = () => useContext(AuthContext);

      // 共通コンポーネント
      const Modal = ({ isOpen, onClose, title, children, size = 'large' }) => {
        if (!isOpen) return null;

        const sizeClasses = {
          small: 'max-w-md',
          medium: 'max-w-2xl',
          large: 'max-w-4xl',
          xlarge: 'max-w-6xl'
        };

        return React.createElement('div', { className: 'modal-overlay', onClick: onClose }, [
          React.createElement('div', {
            key: 'modal',
            className: `modal-content ${sizeClasses[size]} w-full`,
            onClick: (e) => e.stopPropagation()
          }, [
            React.createElement('div', {
              key: 'header',
              className: 'flex justify-between items-center p-6 border-b border-gray-200'
            }, [
              React.createElement('h2', {
                key: 'title',
                className: 'text-xl font-semibold text-gray-900'
              }, title),
              React.createElement('button', {
                key: 'close',
                onClick: onClose,
                className: 'text-gray-400 hover:text-gray-600 text-2xl'
              }, '×')
            ]),
            React.createElement('div', {
              key: 'content',
              className: 'p-6'
            }, children)
          ])
        ]);
      };

      const StatusBadge = ({ status, type = 'default' }) => {
        const getStatusClass = () => {
          const lower = status.toLowerCase().replace(/\s+/g, '-');
          return `status-${lower}`;
        };

        return React.createElement('span', {
          className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusClass()}`
        }, status);
      };

      const PriorityBadge = ({ priority }) => {
        const getPriorityClass = () => {
          const lower = priority.toLowerCase();
          return `priority-${lower}`;
        };

        return React.createElement('span', {
          className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getPriorityClass()}`
        }, priority);
      };

      // ログインページ
      const LoginPage = () => {
        const [username, setUsername] = useState('');
        const [password, setPassword] = useState('');
        const { login, error, isLoading } = useAuth();
        const navigate = useNavigate();

        const handleSubmit = async (e) => {
          e.preventDefault();
          const success = await login(username, password);
          if (success) {
            navigate('/dashboard');
          }
        };

        return React.createElement('div', {
          className: 'min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 to-slate-700 p-4'
        }, 
          React.createElement('div', {
            className: 'w-full max-w-md bg-white rounded-lg shadow-2xl p-8'
          }, [
            React.createElement('div', { key: 'header', className: 'text-center mb-8' }, [
              React.createElement('div', { 
                key: 'icon',
                className: 'w-20 h-20 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl'
              }, '🔒'),
              React.createElement('h1', { 
                key: 'title',
                className: 'text-2xl font-bold text-slate-800 mb-1' 
              }, 'ITSM運用システム'),
              React.createElement('p', { 
                key: 'subtitle',
                className: 'text-sm text-slate-600' 
              }, '詳細実装版プラットフォーム')
            ]),
            React.createElement('form', {
              key: 'form',
              onSubmit: handleSubmit,
              className: 'space-y-5'
            }, [
              React.createElement('div', { key: 'username-field' }, [
                React.createElement('label', {
                  key: 'username-label',
                  className: 'block text-sm font-medium text-slate-700 mb-2'
                }, 'ユーザー名'),
                React.createElement('input', {
                  key: 'username-input',
                  type: 'text',
                  value: username,
                  onChange: (e) => setUsername(e.target.value),
                  className: 'w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                  placeholder: 'ユーザー名を入力',
                  required: true,
                  disabled: isLoading
                })
              ]),
              React.createElement('div', { key: 'password-field' }, [
                React.createElement('label', {
                  key: 'password-label',
                  className: 'block text-sm font-medium text-slate-700 mb-2'
                }, 'パスワード'),
                React.createElement('input', {
                  key: 'password-input',
                  type: 'password',
                  value: password,
                  onChange: (e) => setPassword(e.target.value),
                  className: 'w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                  placeholder: 'パスワードを入力',
                  required: true,
                  disabled: isLoading
                })
              ]),
              React.createElement('div', {
                key: 'test-accounts',
                className: 'bg-blue-50 border border-blue-200 rounded-lg p-4'
              }, [
                React.createElement('p', { key: 'test-title', className: 'font-medium text-blue-800 text-sm mb-2' }, '🔑 テストアカウント:'),
                React.createElement('p', { key: 'admin', className: 'text-xs text-blue-700' }, '👑 管理者: admin / admin123'),
                React.createElement('p', { key: 'operator', className: 'text-xs text-blue-700' }, '👤 オペレータ: operator / operator123')
              ]),
              error && React.createElement('div', {
                key: 'error',
                className: 'bg-red-50 border border-red-200 rounded-lg p-4 text-sm text-red-800'
              }, `⚠️ ${error}`),
              React.createElement('button', {
                key: 'submit',
                type: 'submit',
                disabled: !username || !password || isLoading,
                className: 'w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 transition-all'
              }, isLoading ? '🔄 ログイン中...' : '🚀 ログイン')
            ])
          ])
        );
      };

      // サイドバー
      const Sidebar = () => {
        const { logout, user } = useAuth();
        const navigate = useNavigate();
        const location = useLocation();

        const menuItems = [
          { name: 'ダッシュボード', path: '/dashboard', icon: '📊' },
          { name: 'インシデント', path: '/incidents', icon: '🚨' },
          { name: '資産管理', path: '/assets', icon: '💻' },
          { name: 'サービス要求', path: '/requests', icon: '📝' },
          { name: 'ナレッジ', path: '/knowledge', icon: '📚' },
          { name: '変更管理', path: '/changes', icon: '🔄' },
          { name: 'リリース管理', path: '/releases', icon: '🚀' },
          { name: '設定', path: '/settings', icon: '⚙️' }
        ];

        return React.createElement('div', {
          className: 'w-64 bg-slate-800 text-white min-h-screen flex flex-col'
        }, [
          React.createElement('div', {
            key: 'header',
            className: 'p-6 border-b border-slate-700'
          }, [
            React.createElement('h2', {
              key: 'title',
              className: 'text-xl font-bold'
            }, 'ITSM運用システム'),
            React.createElement('p', {
              key: 'user',
              className: 'text-sm text-slate-300 mt-1'
            }, `ようこそ、${user?.username}さん`)
          ]),
          React.createElement('nav', {
            key: 'nav',
            className: 'flex-1 p-4'
          }, 
            React.createElement('ul', {
              className: 'space-y-2'
            }, menuItems.map(item => 
              React.createElement('li', {
                key: item.path
              },
                React.createElement('a', {
                  href: `#${item.path}`,
                  className: `flex items-center px-4 py-3 rounded-lg transition-colors ${
                    location.pathname === item.path 
                      ? 'bg-blue-600 text-white' 
                      : 'hover:bg-slate-700'
                  }`,
                  onClick: (e) => {
                    e.preventDefault();
                    navigate(item.path);
                  }
                }, [
                  React.createElement('span', {
                    key: 'icon',
                    className: 'mr-3 text-lg'
                  }, item.icon),
                  React.createElement('span', {
                    key: 'name'
                  }, item.name)
                ])
              )
            ))
          ),
          React.createElement('div', {
            key: 'footer',
            className: 'p-4 border-t border-slate-700'
          },
            React.createElement('button', {
              onClick: logout,
              className: 'w-full flex items-center px-4 py-3 rounded-lg hover:bg-slate-700 transition-colors text-left'
            }, [
              React.createElement('span', {
                key: 'icon',
                className: 'mr-3 text-lg'
              }, '🚪'),
              React.createElement('span', {
                key: 'text'
              }, 'ログアウト')
            ])
          )
        ]);
      };

      // メインレイアウト
      const MainLayout = ({ children }) => {
        return React.createElement('div', {
          className: 'flex min-h-screen bg-slate-50'
        }, [
          React.createElement(Sidebar, { key: 'sidebar' }),
          React.createElement('div', {
            key: 'content',
            className: 'flex-1 flex flex-col'
          }, children)
        ]);
      };

      // ダッシュボードページ
      const DashboardPage = () => {
        const { user } = useAuth();
        
        const stats = [
          { title: 'オープン中のインシデント', count: '3', label: '対応中', color: 'red', icon: '🚨' },
          { title: '管理中の資産', count: '124', label: '総数', color: 'blue', icon: '💻' },
          { title: '承認待ちサービス要求', count: '5', label: '件', color: 'yellow', icon: '📝' },
          { title: 'システム可用性', count: '99.8%', label: '今月の稼働率', color: 'green', icon: '📊' }
        ];

        const recentActivities = [
          { time: '10:30', desc: 'インシデント #INC-2024-001 が作成されました', type: 'incident', user: '佐藤花子' },
          { time: '09:45', desc: 'サーバー #SRV-001 の定期メンテナンスが完了しました', type: 'maintenance', user: 'システム' },
          { time: '09:15', desc: 'サービス要求 #REQ-2024-002 が承認されました', type: 'request', user: 'IT部長' },
          { time: '08:30', desc: 'ナレッジ記事 "VPN接続手順" が更新されました', type: 'knowledge', user: '山田次郎' }
        ];

        return React.createElement(MainLayout, {}, [
          React.createElement('div', {
            key: 'header',
            className: 'bg-white shadow border-b border-slate-200'
          }, 
            React.createElement('div', {
              className: 'px-6 py-4'
            }, [
              React.createElement('h1', {
                key: 'title',
                className: 'text-2xl font-bold text-slate-800'
              }, '📊 ダッシュボード'),
              React.createElement('p', {
                key: 'subtitle',
                className: 'text-slate-600 mt-1'
              }, 'システム全体の状況を一目で確認')
            ])
          ),
          React.createElement('div', {
            key: 'content',
            className: 'flex-1 p-6'
          }, [
            React.createElement('div', {
              key: 'welcome',
              className: 'bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 mb-6 border border-blue-200'
            }, [
              React.createElement('h2', {
                key: 'title',
                className: 'text-xl font-semibold text-slate-800 mb-2'
              }, `👋 お疲れ様です、${user?.username}さん`),
              React.createElement('p', {
                key: 'description',
                className: 'text-slate-600'
              }, `今日の日付: ${new Date().toLocaleDateString('ja-JP')} | 現在時刻: ${new Date().toLocaleTimeString('ja-JP')}`)
            ]),
            React.createElement('div', {
              key: 'stats',
              className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6'
            }, stats.map(stat => 
              React.createElement('div', {
                key: stat.title,
                className: 'bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-shadow'
              }, [
                React.createElement('div', {
                  key: 'header',
                  className: 'flex items-center justify-between mb-4'
                }, [
                  React.createElement('h3', {
                    key: 'title',
                    className: 'text-sm font-medium text-slate-800'
                  }, stat.title),
                  React.createElement('span', {
                    key: 'icon',
                    className: 'text-2xl'
                  }, stat.icon)
                ]),
                React.createElement('p', {
                  key: 'count',
                  className: `text-3xl font-bold text-${stat.color}-600 mb-1`
                }, stat.count),
                React.createElement('p', {
                  key: 'label',
                  className: 'text-sm text-slate-500'
                }, stat.label)
              ])
            )),
            React.createElement('div', {
              key: 'activities',
              className: 'bg-white rounded-lg shadow-sm border p-6'
            }, [
              React.createElement('h3', {
                key: 'title',
                className: 'text-lg font-medium text-slate-800 mb-4 flex items-center'
              }, ['📋 ', '最近の活動']),
              React.createElement('div', {
                key: 'list',
                className: 'space-y-3'
              }, recentActivities.map((activity, index) => 
                React.createElement('div', {
                  key: index,
                  className: 'flex items-start space-x-3 p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors'
                }, [
                  React.createElement('span', {
                    key: 'time',
                    className: 'text-sm text-slate-500 font-mono w-16 flex-shrink-0'
                  }, activity.time),
                  React.createElement('div', {
                    key: 'content',
                    className: 'flex-1'
                  }, [
                    React.createElement('p', {
                      key: 'desc',
                      className: 'text-sm text-slate-700'
                    }, activity.desc),
                    React.createElement('p', {
                      key: 'user',
                      className: 'text-xs text-slate-500 mt-1'
                    }, `実行者: ${activity.user}`)
                  ])
                ])
              ))
            ])
          ])
        ]);
      };

      // 資産管理ページ
      const AssetsPage = () => {
        const [assets, setAssets] = useState(mockData.assets);
        const [selectedAsset, setSelectedAsset] = useState(null);
        const [isModalOpen, setIsModalOpen] = useState(false);
        const [isEditing, setIsEditing] = useState(false);
        const [searchQuery, setSearchQuery] = useState('');
        const [categoryFilter, setCategoryFilter] = useState('All');
        const [statusFilter, setStatusFilter] = useState('All');

        const filteredAssets = assets.filter(asset => {
          const matchesSearch = asset.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                               asset.tag.toLowerCase().includes(searchQuery.toLowerCase());
          const matchesCategory = categoryFilter === 'All' || asset.category === categoryFilter;
          const matchesStatus = statusFilter === 'All' || asset.status === statusFilter;
          return matchesSearch && matchesCategory && matchesStatus;
        });

        const handleCreateAsset = () => {
          setSelectedAsset({
            id: `ASSET-${String(assets.length + 1).padStart(3, '0')}`,
            tag: '',
            name: '',
            category: 'サーバー',
            type: '',
            status: 'Active',
            location: '',
            owner: '',
            assignedTo: '',
            purchaseDate: '',
            warrantyEnd: '',
            cost: '',
            serialNumber: '',
            ipAddress: '',
            osVersion: '',
            specs: {
              cpu: '',
              memory: '',
              storage: ''
            }
          });
          setIsEditing(true);
          setIsModalOpen(true);
        };

        const handleEditAsset = (asset) => {
          setSelectedAsset({ ...asset });
          setIsEditing(true);
          setIsModalOpen(true);
        };

        const handleSaveAsset = () => {
          if (assets.find(asset => asset.id === selectedAsset.id)) {
            setAssets(assets.map(asset => 
              asset.id === selectedAsset.id ? selectedAsset : asset
            ));
          } else {
            setAssets([...assets, selectedAsset]);
          }
          setIsModalOpen(false);
          setIsEditing(false);
        };

        const handleDeleteAsset = (assetId) => {
          if (confirm('この資産を削除してもよろしいですか？')) {
            setAssets(assets.filter(asset => asset.id !== assetId));
          }
        };

        return React.createElement(MainLayout, {}, [
          React.createElement('div', {
            key: 'header',
            className: 'bg-white shadow border-b border-slate-200'
          }, 
            React.createElement('div', {
              className: 'px-6 py-4 flex justify-between items-center'
            }, [
              React.createElement('div', { key: 'title-section' }, [
                React.createElement('h1', {
                  key: 'title',
                  className: 'text-2xl font-bold text-slate-800'
                }, '💻 資産管理'),
                React.createElement('p', {
                  key: 'subtitle',
                  className: 'text-slate-600 mt-1'
                }, 'IT資産の登録・追跡・管理')
              ]),
              React.createElement('button', {
                key: 'create-btn',
                onClick: handleCreateAsset,
                className: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors'
              }, '➕ 新規資産登録')
            ])
          ),
          React.createElement('div', {
            key: 'content',
            className: 'flex-1 p-6'
          }, [
            React.createElement('div', {
              key: 'filters',
              className: 'bg-white rounded-lg shadow-sm border p-4 mb-6'
            }, [
              React.createElement('div', {
                key: 'filter-row',
                className: 'grid grid-cols-1 md:grid-cols-4 gap-4'
              }, [
                React.createElement('div', { key: 'search' }, [
                  React.createElement('label', {
                    key: 'search-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '🔍 検索'),
                  React.createElement('input', {
                    key: 'search-input',
                    type: 'text',
                    value: searchQuery,
                    onChange: (e) => setSearchQuery(e.target.value),
                    placeholder: '資産名・タグで検索',
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  })
                ]),
                React.createElement('div', { key: 'category-filter' }, [
                  React.createElement('label', {
                    key: 'category-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '📂 カテゴリ'),
                  React.createElement('select', {
                    key: 'category-select',
                    value: categoryFilter,
                    onChange: (e) => setCategoryFilter(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  }, [
                    React.createElement('option', { key: 'all', value: 'All' }, '全て'),
                    React.createElement('option', { key: 'server', value: 'サーバー' }, 'サーバー'),
                    React.createElement('option', { key: 'desktop', value: 'デスクトップ' }, 'デスクトップ'),
                    React.createElement('option', { key: 'laptop', value: 'ラップトップ' }, 'ラップトップ'),
                    React.createElement('option', { key: 'network', value: 'ネットワーク機器' }, 'ネットワーク機器'),
                    React.createElement('option', { key: 'printer', value: 'プリンタ' }, 'プリンタ')
                  ])
                ]),
                React.createElement('div', { key: 'status-filter' }, [
                  React.createElement('label', {
                    key: 'status-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '📊 ステータス'),
                  React.createElement('select', {
                    key: 'status-select',
                    value: statusFilter,
                    onChange: (e) => setStatusFilter(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  }, [
                    React.createElement('option', { key: 'all', value: 'All' }, '全て'),
                    React.createElement('option', { key: 'active', value: 'Active' }, 'アクティブ'),
                    React.createElement('option', { key: 'inactive', value: 'Inactive' }, '非アクティブ'),
                    React.createElement('option', { key: 'maintenance', value: 'Maintenance' }, 'メンテナンス中'),
                    React.createElement('option', { key: 'retired', value: 'Retired' }, '廃棄済み')
                  ])
                ]),
                React.createElement('div', { key: 'stats', className: 'flex items-end' }, [
                  React.createElement('div', {
                    key: 'count',
                    className: 'text-sm text-gray-600'
                  }, `📋 表示中: ${filteredAssets.length}件 / 総計: ${assets.length}件`)
                ])
              ])
            ]),
            React.createElement('div', {
              key: 'table',
              className: 'bg-white rounded-lg shadow-sm border overflow-hidden'
            }, [
              React.createElement('div', {
                key: 'table-container',
                className: 'table-responsive'
              }, [
                React.createElement('table', {
                  key: 'assets-table',
                  className: 'min-w-full divide-y divide-gray-200'
                }, [
                  React.createElement('thead', {
                    key: 'table-head',
                    className: 'bg-gray-50'
                  }, [
                    React.createElement('tr', { key: 'header-row' }, [
                      React.createElement('th', { key: 'tag', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '資産タグ'),
                      React.createElement('th', { key: 'name', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '名前'),
                      React.createElement('th', { key: 'category', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'カテゴリ'),
                      React.createElement('th', { key: 'status', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'ステータス'),
                      React.createElement('th', { key: 'assignedTo', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '使用者'),
                      React.createElement('th', { key: 'location', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '場所'),
                      React.createElement('th', { key: 'actions', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '操作')
                    ])
                  ]),
                  React.createElement('tbody', {
                    key: 'table-body',
                    className: 'bg-white divide-y divide-gray-200'
                  }, filteredAssets.map(asset => 
                    React.createElement('tr', {
                      key: asset.id,
                      className: 'hover:bg-gray-50 cursor-pointer',
                      onClick: () => {
                        setSelectedAsset(asset);
                        setIsEditing(false);
                        setIsModalOpen(true);
                      }
                    }, [
                      React.createElement('td', { key: 'tag', className: 'px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900' }, asset.tag),
                      React.createElement('td', { key: 'name', className: 'px-6 py-4 text-sm text-gray-900' }, [
                        React.createElement('div', { key: 'name-text', className: 'font-medium' }, asset.name),
                        React.createElement('div', { key: 'type', className: 'text-gray-500 text-xs' }, asset.type)
                      ]),
                      React.createElement('td', { key: 'category', className: 'px-6 py-4 whitespace-nowrap text-sm text-gray-900' }, asset.category),
                      React.createElement('td', { key: 'status', className: 'px-6 py-4 whitespace-nowrap' }, 
                        React.createElement(StatusBadge, { status: asset.status })
                      ),
                      React.createElement('td', { key: 'assignedTo', className: 'px-6 py-4 whitespace-nowrap text-sm text-gray-900' }, asset.assignedTo),
                      React.createElement('td', { key: 'location', className: 'px-6 py-4 whitespace-nowrap text-sm text-gray-500' }, asset.location),
                      React.createElement('td', { key: 'actions', className: 'px-6 py-4 whitespace-nowrap text-sm font-medium' }, [
                        React.createElement('button', {
                          key: 'edit',
                          onClick: (e) => {
                            e.stopPropagation();
                            handleEditAsset(asset);
                          },
                          className: 'text-blue-600 hover:text-blue-900 mr-3'
                        }, '✏️'),
                        React.createElement('button', {
                          key: 'delete',
                          onClick: (e) => {
                            e.stopPropagation();
                            handleDeleteAsset(asset.id);
                          },
                          className: 'text-red-600 hover:text-red-900'
                        }, '🗑️')
                      ])
                    ])
                  ))
                ])
              ])
            ])
          ]),
          React.createElement(Modal, {
            key: 'asset-modal',
            isOpen: isModalOpen,
            onClose: () => setIsModalOpen(false),
            title: isEditing ? (selectedAsset?.id?.includes('undefined') ? '新規資産登録' : '資産編集') : '資産詳細',
            size: 'xlarge'
          }, selectedAsset && [
            isEditing ? React.createElement('form', {
              key: 'edit-form',
              onSubmit: (e) => {
                e.preventDefault();
                handleSaveAsset();
              },
              className: 'space-y-6'
            }, [
              React.createElement('div', { key: 'basic-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '基本情報'),
                React.createElement('div', { key: 'form-grid', className: 'grid grid-cols-1 md:grid-cols-3 gap-4' }, [
                  React.createElement('div', { key: 'tag-field' }, [
                    React.createElement('label', { key: 'tag-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '資産タグ *'),
                    React.createElement('input', {
                      key: 'tag-input',
                      type: 'text',
                      value: selectedAsset.tag,
                      onChange: (e) => setSelectedAsset({...selectedAsset, tag: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500',
                      required: true,
                      placeholder: 'SRV-001'
                    })
                  ]),
                  React.createElement('div', { key: 'name-field' }, [
                    React.createElement('label', { key: 'name-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '資産名 *'),
                    React.createElement('input', {
                      key: 'name-input',
                      type: 'text',
                      value: selectedAsset.name,
                      onChange: (e) => setSelectedAsset({...selectedAsset, name: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500',
                      required: true
                    })
                  ]),
                  React.createElement('div', { key: 'category-field' }, [
                    React.createElement('label', { key: 'category-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'カテゴリ'),
                    React.createElement('select', {
                      key: 'category-select',
                      value: selectedAsset.category,
                      onChange: (e) => setSelectedAsset({...selectedAsset, category: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    }, [
                      React.createElement('option', { key: 'server', value: 'サーバー' }, 'サーバー'),
                      React.createElement('option', { key: 'desktop', value: 'デスクトップ' }, 'デスクトップ'),
                      React.createElement('option', { key: 'laptop', value: 'ラップトップ' }, 'ラップトップ'),
                      React.createElement('option', { key: 'network', value: 'ネットワーク機器' }, 'ネットワーク機器'),
                      React.createElement('option', { key: 'printer', value: 'プリンタ' }, 'プリンタ')
                    ])
                  ]),
                  React.createElement('div', { key: 'type-field' }, [
                    React.createElement('label', { key: 'type-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '機種・型番'),
                    React.createElement('input', {
                      key: 'type-input',
                      type: 'text',
                      value: selectedAsset.type,
                      onChange: (e) => setSelectedAsset({...selectedAsset, type: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    })
                  ]),
                  React.createElement('div', { key: 'status-field' }, [
                    React.createElement('label', { key: 'status-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'ステータス'),
                    React.createElement('select', {
                      key: 'status-select',
                      value: selectedAsset.status,
                      onChange: (e) => setSelectedAsset({...selectedAsset, status: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    }, [
                      React.createElement('option', { key: 'active', value: 'Active' }, 'アクティブ'),
                      React.createElement('option', { key: 'inactive', value: 'Inactive' }, '非アクティブ'),
                      React.createElement('option', { key: 'maintenance', value: 'Maintenance' }, 'メンテナンス中'),
                      React.createElement('option', { key: 'retired', value: 'Retired' }, '廃棄済み')
                    ])
                  ]),
                  React.createElement('div', { key: 'serial-field' }, [
                    React.createElement('label', { key: 'serial-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'シリアル番号'),
                    React.createElement('input', {
                      key: 'serial-input',
                      type: 'text',
                      value: selectedAsset.serialNumber,
                      onChange: (e) => setSelectedAsset({...selectedAsset, serialNumber: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'location-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '配置・所有者情報'),
                React.createElement('div', { key: 'form-grid', className: 'grid grid-cols-1 md:grid-cols-3 gap-4' }, [
                  React.createElement('div', { key: 'location-field' }, [
                    React.createElement('label', { key: 'location-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '設置場所'),
                    React.createElement('input', {
                      key: 'location-input',
                      type: 'text',
                      value: selectedAsset.location,
                      onChange: (e) => setSelectedAsset({...selectedAsset, location: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    })
                  ]),
                  React.createElement('div', { key: 'owner-field' }, [
                    React.createElement('label', { key: 'owner-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '所有部門'),
                    React.createElement('input', {
                      key: 'owner-input',
                      type: 'text',
                      value: selectedAsset.owner,
                      onChange: (e) => setSelectedAsset({...selectedAsset, owner: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    })
                  ]),
                  React.createElement('div', { key: 'assigned-field' }, [
                    React.createElement('label', { key: 'assigned-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '使用者'),
                    React.createElement('input', {
                      key: 'assigned-input',
                      type: 'text',
                      value: selectedAsset.assignedTo,
                      onChange: (e) => setSelectedAsset({...selectedAsset, assignedTo: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'purchase-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '購入・保証情報'),
                React.createElement('div', { key: 'form-grid', className: 'grid grid-cols-1 md:grid-cols-3 gap-4' }, [
                  React.createElement('div', { key: 'purchase-field' }, [
                    React.createElement('label', { key: 'purchase-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '購入日'),
                    React.createElement('input', {
                      key: 'purchase-input',
                      type: 'date',
                      value: selectedAsset.purchaseDate,
                      onChange: (e) => setSelectedAsset({...selectedAsset, purchaseDate: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    })
                  ]),
                  React.createElement('div', { key: 'warranty-field' }, [
                    React.createElement('label', { key: 'warranty-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '保証期限'),
                    React.createElement('input', {
                      key: 'warranty-input',
                      type: 'date',
                      value: selectedAsset.warrantyEnd,
                      onChange: (e) => setSelectedAsset({...selectedAsset, warrantyEnd: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    })
                  ]),
                  React.createElement('div', { key: 'cost-field' }, [
                    React.createElement('label', { key: 'cost-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '取得価格'),
                    React.createElement('input', {
                      key: 'cost-input',
                      type: 'text',
                      value: selectedAsset.cost,
                      onChange: (e) => setSelectedAsset({...selectedAsset, cost: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500',
                      placeholder: '¥100,000'
                    })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'technical-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '技術情報'),
                React.createElement('div', { key: 'form-grid', className: 'grid grid-cols-1 md:grid-cols-2 gap-4' }, [
                  React.createElement('div', { key: 'ip-field' }, [
                    React.createElement('label', { key: 'ip-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'IPアドレス'),
                    React.createElement('input', {
                      key: 'ip-input',
                      type: 'text',
                      value: selectedAsset.ipAddress,
                      onChange: (e) => setSelectedAsset({...selectedAsset, ipAddress: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500',
                      placeholder: '192.168.1.100'
                    })
                  ]),
                  React.createElement('div', { key: 'os-field' }, [
                    React.createElement('label', { key: 'os-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'OS'),
                    React.createElement('input', {
                      key: 'os-input',
                      type: 'text',
                      value: selectedAsset.osVersion,
                      onChange: (e) => setSelectedAsset({...selectedAsset, osVersion: e.target.value}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500',
                      placeholder: 'Windows 11 Pro'
                    })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'specs-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, 'ハードウェア仕様'),
                React.createElement('div', { key: 'form-grid', className: 'grid grid-cols-1 md:grid-cols-3 gap-4' }, [
                  React.createElement('div', { key: 'cpu-field' }, [
                    React.createElement('label', { key: 'cpu-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'CPU'),
                    React.createElement('input', {
                      key: 'cpu-input',
                      type: 'text',
                      value: selectedAsset.specs?.cpu || '',
                      onChange: (e) => setSelectedAsset({...selectedAsset, specs: {...selectedAsset.specs, cpu: e.target.value}}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    })
                  ]),
                  React.createElement('div', { key: 'memory-field' }, [
                    React.createElement('label', { key: 'memory-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'メモリ'),
                    React.createElement('input', {
                      key: 'memory-input',
                      type: 'text',
                      value: selectedAsset.specs?.memory || '',
                      onChange: (e) => setSelectedAsset({...selectedAsset, specs: {...selectedAsset.specs, memory: e.target.value}}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    })
                  ]),
                  React.createElement('div', { key: 'storage-field' }, [
                    React.createElement('label', { key: 'storage-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'ストレージ'),
                    React.createElement('input', {
                      key: 'storage-input',
                      type: 'text',
                      value: selectedAsset.specs?.storage || '',
                      onChange: (e) => setSelectedAsset({...selectedAsset, specs: {...selectedAsset.specs, storage: e.target.value}}),
                      className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                    })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'form-actions', className: 'flex justify-end space-x-3 pt-4 border-t border-gray-200' }, [
                React.createElement('button', {
                  key: 'cancel',
                  type: 'button',
                  onClick: () => setIsModalOpen(false),
                  className: 'px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50'
                }, 'キャンセル'),
                React.createElement('button', {
                  key: 'save',
                  type: 'submit',
                  className: 'px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700'
                }, '💾 保存')
              ])
            ]) : React.createElement('div', {
              key: 'view-mode',
              className: 'space-y-6'
            }, [
              React.createElement('div', { key: 'asset-header', className: 'border-b border-gray-200 pb-4' }, [
                React.createElement('div', { key: 'header-content', className: 'flex justify-between items-start' }, [
                  React.createElement('div', { key: 'title-section' }, [
                    React.createElement('h3', { key: 'asset-title', className: 'text-xl font-semibold text-gray-900' }, selectedAsset.name),
                    React.createElement('p', { key: 'asset-tag', className: 'text-sm text-gray-500 mt-1' }, `資産タグ: ${selectedAsset.tag}`)
                  ]),
                  React.createElement('div', { key: 'status-badge', className: 'flex space-x-2' }, [
                    React.createElement(StatusBadge, { key: 'status', status: selectedAsset.status })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'asset-details', className: 'grid grid-cols-1 md:grid-cols-2 gap-6' }, [
                React.createElement('div', { key: 'left-column' }, [
                  React.createElement('div', { key: 'basic-info', className: 'space-y-3 mb-6' }, [
                    React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900' }, '基本情報'),
                    React.createElement('dl', { key: 'info-list', className: 'space-y-2' }, [
                      React.createElement('div', { key: 'category' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, 'カテゴリ'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.category)
                      ]),
                      React.createElement('div', { key: 'type' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '機種・型番'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.type)
                      ]),
                      React.createElement('div', { key: 'serial' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, 'シリアル番号'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.serialNumber)
                      ])
                    ])
                  ]),
                  React.createElement('div', { key: 'location-info', className: 'space-y-3' }, [
                    React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900' }, '配置・所有者'),
                    React.createElement('dl', { key: 'info-list', className: 'space-y-2' }, [
                      React.createElement('div', { key: 'location' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '設置場所'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.location)
                      ]),
                      React.createElement('div', { key: 'owner' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '所有部門'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.owner)
                      ]),
                      React.createElement('div', { key: 'assignedTo' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '使用者'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.assignedTo)
                      ])
                    ])
                  ])
                ]),
                React.createElement('div', { key: 'right-column' }, [
                  React.createElement('div', { key: 'purchase-info', className: 'space-y-3 mb-6' }, [
                    React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900' }, '購入・保証情報'),
                    React.createElement('dl', { key: 'info-list', className: 'space-y-2' }, [
                      React.createElement('div', { key: 'purchase' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '購入日'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.purchaseDate)
                      ]),
                      React.createElement('div', { key: 'warranty' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '保証期限'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.warrantyEnd)
                      ]),
                      React.createElement('div', { key: 'cost' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '取得価格'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.cost)
                      ])
                    ])
                  ]),
                  React.createElement('div', { key: 'technical-info', className: 'space-y-3' }, [
                    React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900' }, '技術情報'),
                    React.createElement('dl', { key: 'info-list', className: 'space-y-2' }, [
                      React.createElement('div', { key: 'ip' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, 'IPアドレス'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.ipAddress)
                      ]),
                      React.createElement('div', { key: 'os' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, 'OS'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.osVersion)
                      ])
                    ])
                  ])
                ])
              ]),
              selectedAsset.specs && React.createElement('div', { key: 'specs-section' }, [
                React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900 mb-3' }, 'ハードウェア仕様'),
                React.createElement('div', { key: 'specs-content', className: 'bg-gray-50 rounded-lg p-4' }, [
                  React.createElement('div', { key: 'specs-grid', className: 'grid grid-cols-1 md:grid-cols-3 gap-4' }, [
                    React.createElement('div', { key: 'cpu' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, 'CPU'),
                      React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.specs.cpu)
                    ]),
                    React.createElement('div', { key: 'memory' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, 'メモリ'),
                      React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.specs.memory)
                    ]),
                    React.createElement('div', { key: 'storage' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, 'ストレージ'),
                      React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedAsset.specs.storage)
                    ])
                  ])
                ])
              ]),
              React.createElement('div', { key: 'view-actions', className: 'flex justify-end space-x-3 pt-4 border-t border-gray-200' }, [
                React.createElement('button', {
                  key: 'edit',
                  onClick: () => setIsEditing(true),
                  className: 'px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700'
                }, '✏️ 編集'),
                React.createElement('button', {
                  key: 'close',
                  onClick: () => setIsModalOpen(false),
                  className: 'px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50'
                }, '閉じる')
              ])
            ])
          ])
        ]);
      };

      // インシデント管理ページ
      const IncidentsPage = () => {
        const [incidents, setIncidents] = useState(mockData.incidents);
        const [selectedIncident, setSelectedIncident] = useState(null);
        const [isModalOpen, setIsModalOpen] = useState(false);
        const [isEditing, setIsEditing] = useState(false);
        const [searchQuery, setSearchQuery] = useState('');
        const [statusFilter, setStatusFilter] = useState('All');
        const [priorityFilter, setPriorityFilter] = useState('All');

        const filteredIncidents = incidents.filter(incident => {
          const matchesSearch = incident.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                               incident.description.toLowerCase().includes(searchQuery.toLowerCase());
          const matchesStatus = statusFilter === 'All' || incident.status === statusFilter;
          const matchesPriority = priorityFilter === 'All' || incident.priority === priorityFilter;
          return matchesSearch && matchesStatus && matchesPriority;
        });

        // インシデントIDの自動生成（年月日 + 連番）
        const generateIncidentId = () => {
          const today = new Date();
          const year = today.getFullYear();
          const month = String(today.getMonth() + 1).padStart(2, '0');
          const day = String(today.getDate()).padStart(2, '0');
          const datePrefix = `${year}${month}${day}`;
          
          // 今日作成されたインシデントの数を取得
          const todayIncidents = incidents.filter(inc => 
            inc.id.includes(datePrefix)
          );
          const nextNumber = String(todayIncidents.length + 1).padStart(3, '0');
          
          return `INC-${datePrefix}-${nextNumber}`;
        };

        const { user } = useAuth();
        
        const handleCreateIncident = () => {
          const now = new Date();
          setSelectedIncident({
            id: generateIncidentId(),
            title: '',
            description: '',
            status: 'Open',
            priority: 'Medium',
            assignee: '',
            reporter: user?.username || '',
            reporterEmail: user?.email || '',
            reporterDepartment: user?.department || '',
            category: '',
            impact: 'Medium',
            urgency: 'Medium',
            affectedUsers: '',
            affectedSystems: '',
            created: now.toLocaleString('ja-JP'),
            updated: now.toLocaleString('ja-JP'),
            resolution: '',
            estimatedResolution: '',
            actualResolutionTime: '',
            relatedAssets: [],
            attachments: [],
            notes: ''
          });
          setIsEditing(true);
          setIsModalOpen(true);
        };

        const handleEditIncident = (incident) => {
          setSelectedIncident({ ...incident });
          setIsEditing(true);
          setIsModalOpen(true);
        };

        const handleSaveIncident = () => {
          // 基本バリデーション
          if (!selectedIncident.title.trim()) {
            alert('タイトルは必須項目です。');
            return;
          }
          
          if (!selectedIncident.description.trim()) {
            alert('詳細説明は必須項目です。');
            return;
          }

          if (!selectedIncident.category.trim()) {
            alert('カテゴリを選択してください。');
            return;
          }

          const updatedIncident = {
            ...selectedIncident,
            updated: new Date().toLocaleString('ja-JP')
          };

          if (incidents.find(inc => inc.id === selectedIncident.id)) {
            // 既存インシデントの更新
            setIncidents(incidents.map(inc => 
              inc.id === selectedIncident.id ? updatedIncident : inc
            ));
            alert(`インシデント ${selectedIncident.id} が正常に更新されました。`);
          } else {
            // 新規インシデントの作成
            setIncidents([...incidents, updatedIncident]);
            alert(`インシデント ${selectedIncident.id} が正常に作成されました。`);
          }
          
          setIsModalOpen(false);
          setIsEditing(false);
        };

        const handleDeleteIncident = (incident) => {
          const confirmMessage = `以下のインシデントを削除してもよろしいですか？\n\nID: ${incident.id}\nタイトル: ${incident.title}\nステータス: ${incident.status}\n\n※削除されたデータは復元できません。`;
          
          if (confirm(confirmMessage)) {
            setIncidents(incidents.filter(inc => inc.id !== incident.id));
            
            // モーダルが開いている場合は閉じる
            if (selectedIncident && selectedIncident.id === incident.id) {
              setIsModalOpen(false);
              setSelectedIncident(null);
            }
            
            // 成功メッセージ（実際のシステムではトースト通知等を使用）
            alert(`インシデント ${incident.id} が正常に削除されました。`);
          }
        };

        // ステータス変更時の特別処理
        const handleStatusChange = (incident, newStatus) => {
          const updatedIncident = {
            ...incident,
            status: newStatus,
            updated: new Date().toLocaleString('ja-JP')
          };

          // 解決済みまたはクローズ時に自動で解決日時を設定
          if (newStatus === 'Resolved' || newStatus === 'Closed') {
            updatedIncident.resolvedAt = new Date().toLocaleString('ja-JP');
            if (!updatedIncident.resolution) {
              updatedIncident.resolution = '対応完了';
            }
          }

          setIncidents(incidents.map(inc => 
            inc.id === incident.id ? updatedIncident : inc
          ));

          // 選択されているインシデントも更新
          if (selectedIncident && selectedIncident.id === incident.id) {
            setSelectedIncident(updatedIncident);
          }
        };

        return React.createElement(MainLayout, {}, [
          React.createElement('div', {
            key: 'header',
            className: 'bg-white shadow border-b border-slate-200'
          }, 
            React.createElement('div', {
              className: 'px-6 py-4 flex justify-between items-center'
            }, [
              React.createElement('div', { key: 'title-section' }, [
                React.createElement('h1', {
                  key: 'title',
                  className: 'text-2xl font-bold text-slate-800'
                }, '🚨 インシデント管理'),
                React.createElement('p', {
                  key: 'subtitle',
                  className: 'text-slate-600 mt-1'
                }, 'システム障害・問題の追跡と解決')
              ]),
              React.createElement('button', {
                key: 'create-btn',
                onClick: handleCreateIncident,
                className: 'bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors transform hover:scale-105 shadow-lg font-medium flex items-center space-x-2'
              }, [
                React.createElement('span', { key: 'icon', className: 'text-lg' }, '➕'),
                React.createElement('span', { key: 'text' }, '新規インシデント作成')
              ])
            ])
          ),
          React.createElement('div', {
            key: 'content',
            className: 'flex-1 p-6'
          }, [
            React.createElement('div', {
              key: 'filters',
              className: 'bg-white rounded-lg shadow-sm border p-4 mb-6'
            }, [
              React.createElement('div', {
                key: 'filter-row',
                className: 'grid grid-cols-1 md:grid-cols-4 gap-4'
              }, [
                React.createElement('div', { key: 'search' }, [
                  React.createElement('label', {
                    key: 'search-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '🔍 検索'),
                  React.createElement('input', {
                    key: 'search-input',
                    type: 'text',
                    value: searchQuery,
                    onChange: (e) => setSearchQuery(e.target.value),
                    placeholder: 'タイトル・説明で検索',
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  })
                ]),
                React.createElement('div', { key: 'status-filter' }, [
                  React.createElement('label', {
                    key: 'status-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '📊 ステータス'),
                  React.createElement('select', {
                    key: 'status-select',
                    value: statusFilter,
                    onChange: (e) => setStatusFilter(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  }, [
                    React.createElement('option', { key: 'all', value: 'All' }, '全て'),
                    React.createElement('option', { key: 'open', value: 'Open' }, 'オープン'),
                    React.createElement('option', { key: 'progress', value: 'In Progress' }, '対応中'),
                    React.createElement('option', { key: 'resolved', value: 'Resolved' }, '解決済み'),
                    React.createElement('option', { key: 'closed', value: 'Closed' }, 'クローズ')
                  ])
                ]),
                React.createElement('div', { key: 'priority-filter' }, [
                  React.createElement('label', {
                    key: 'priority-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '⚡ 優先度'),
                  React.createElement('select', {
                    key: 'priority-select',
                    value: priorityFilter,
                    onChange: (e) => setPriorityFilter(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  }, [
                    React.createElement('option', { key: 'all', value: 'All' }, '全て'),
                    React.createElement('option', { key: 'critical', value: 'Critical' }, '緊急'),
                    React.createElement('option', { key: 'high', value: 'High' }, '高'),
                    React.createElement('option', { key: 'medium', value: 'Medium' }, '中'),
                    React.createElement('option', { key: 'low', value: 'Low' }, '低')
                  ])
                ]),
                React.createElement('div', { key: 'stats', className: 'flex items-end' }, [
                  React.createElement('div', {
                    key: 'count',
                    className: 'text-sm text-gray-600'
                  }, `📋 表示中: ${filteredIncidents.length}件 / 総計: ${incidents.length}件`)
                ])
              ])
            ]),
            React.createElement('div', {
              key: 'table',
              className: 'bg-white rounded-lg shadow-sm border overflow-hidden'
            }, [
              React.createElement('div', {
                key: 'table-container',
                className: 'table-responsive'
              }, [
                React.createElement('table', {
                  key: 'incidents-table',
                  className: 'min-w-full divide-y divide-gray-200'
                }, [
                  React.createElement('thead', {
                    key: 'table-head',
                    className: 'bg-gray-50'
                  }, [
                    React.createElement('tr', { key: 'header-row' }, [
                      React.createElement('th', { key: 'id', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'ID'),
                      React.createElement('th', { key: 'title', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'タイトル'),
                      React.createElement('th', { key: 'status', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'ステータス'),
                      React.createElement('th', { key: 'priority', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '優先度'),
                      React.createElement('th', { key: 'assignee', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '担当者'),
                      React.createElement('th', { key: 'created', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '作成日時'),
                      React.createElement('th', { key: 'actions', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '操作')
                    ])
                  ]),
                  React.createElement('tbody', {
                    key: 'table-body',
                    className: 'bg-white divide-y divide-gray-200'
                  }, filteredIncidents.map(incident => 
                    React.createElement('tr', {
                      key: incident.id,
                      className: 'hover:bg-gray-50 cursor-pointer',
                      onClick: () => {
                        setSelectedIncident(incident);
                        setIsEditing(false);
                        setIsModalOpen(true);
                      }
                    }, [
                      React.createElement('td', { key: 'id', className: 'px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900' }, incident.id),
                      React.createElement('td', { key: 'title', className: 'px-6 py-4 text-sm text-gray-900' }, [
                        React.createElement('div', { key: 'title-text', className: 'font-medium' }, incident.title),
                        React.createElement('div', { key: 'category', className: 'text-gray-500 text-xs' }, `カテゴリ: ${incident.category}`)
                      ]),
                      React.createElement('td', { key: 'status', className: 'px-6 py-4 whitespace-nowrap' }, 
                        React.createElement(StatusBadge, { status: incident.status })
                      ),
                      React.createElement('td', { key: 'priority', className: 'px-6 py-4 whitespace-nowrap' }, 
                        React.createElement(PriorityBadge, { priority: incident.priority })
                      ),
                      React.createElement('td', { key: 'assignee', className: 'px-6 py-4 whitespace-nowrap text-sm text-gray-900' }, incident.assignee),
                      React.createElement('td', { key: 'created', className: 'px-6 py-4 whitespace-nowrap text-sm text-gray-500' }, incident.created),
                      React.createElement('td', { key: 'actions', className: 'px-6 py-4 whitespace-nowrap text-sm font-medium' }, [
                        React.createElement('div', {
                          key: 'action-group',
                          className: 'flex items-center space-x-2'
                        }, [
                          React.createElement('button', {
                            key: 'view',
                            onClick: (e) => {
                              e.stopPropagation();
                              setSelectedIncident(incident);
                              setIsEditing(false);
                              setIsModalOpen(true);
                            },
                            className: 'bg-gray-100 hover:bg-gray-200 text-gray-700 px-2 py-1 rounded text-xs font-medium transition-colors',
                            title: '詳細表示'
                          }, '👁️ 表示'),
                          React.createElement('button', {
                            key: 'edit',
                            onClick: (e) => {
                              e.stopPropagation();
                              handleEditIncident(incident);
                            },
                            className: 'bg-blue-100 hover:bg-blue-200 text-blue-700 px-2 py-1 rounded text-xs font-medium transition-colors',
                            title: '編集'
                          }, '✏️ 編集'),
                          React.createElement('select', {
                            key: 'status-quick',
                            value: incident.status,
                            onChange: (e) => {
                              e.stopPropagation();
                              handleStatusChange(incident, e.target.value);
                            },
                            className: 'text-xs border border-gray-300 rounded px-2 py-1 bg-white hover:bg-gray-50 transition-colors',
                            title: 'ステータス変更'
                          }, [
                            React.createElement('option', { key: 'open', value: 'Open' }, 'オープン'),
                            React.createElement('option', { key: 'progress', value: 'In Progress' }, '対応中'),
                            React.createElement('option', { key: 'resolved', value: 'Resolved' }, '解決済み'),
                            React.createElement('option', { key: 'closed', value: 'Closed' }, 'クローズ')
                          ]),
                          React.createElement('button', {
                            key: 'delete',
                            onClick: (e) => {
                              e.stopPropagation();
                              handleDeleteIncident(incident);
                            },
                            className: 'bg-red-100 hover:bg-red-200 text-red-700 px-2 py-1 rounded text-xs font-medium transition-colors',
                            title: '削除'
                          }, '🗑️ 削除')
                        ])
                      ])
                    ])
                  ))
                ])
              ])
            ])
          ]),
          React.createElement(Modal, {
            key: 'incident-modal',
            isOpen: isModalOpen,
            onClose: () => setIsModalOpen(false),
            title: isEditing ? (selectedIncident?.id?.includes('undefined') ? '新規インシデント作成' : 'インシデント編集') : 'インシデント詳細',
            size: 'large'
          }, selectedIncident && [
            isEditing ? React.createElement('form', {
              key: 'edit-form',
              onSubmit: (e) => {
                e.preventDefault();
                handleSaveIncident();
              },
              className: 'space-y-6'
            }, [
              React.createElement('div', { key: 'basic-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '基本情報'),
                React.createElement('div', { key: 'id-display', className: 'bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4' }, [
                  React.createElement('div', { key: 'id-info', className: 'flex items-center space-x-2' }, [
                    React.createElement('span', { key: 'id-icon', className: 'text-blue-600' }, '🆔'),
                    React.createElement('span', { key: 'id-label', className: 'text-sm font-medium text-blue-800' }, 'インシデントID:'),
                    React.createElement('span', { key: 'id-value', className: 'text-sm font-mono text-blue-900 bg-white px-2 py-1 rounded' }, selectedIncident.id),
                    React.createElement('span', { key: 'auto-note', className: 'text-xs text-blue-600' }, '(自動生成)')
                  ])
                ]),
                React.createElement('div', { key: 'form-grid', className: 'grid grid-cols-1 md:grid-cols-2 gap-4' }, [
                  React.createElement('div', { key: 'title-field', className: 'md:col-span-2' }, [
                    React.createElement('label', { key: 'title-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'インシデントタイトル *'),
                    React.createElement('input', {
                      key: 'title-input',
                      type: 'text',
                      value: selectedIncident.title,
                      onChange: (e) => setSelectedIncident({...selectedIncident, title: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',
                      placeholder: '例: メールサーバーに接続できない',
                      required: true
                    })
                  ]),
                  React.createElement('div', { key: 'category-field' }, [
                    React.createElement('label', { key: 'category-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'カテゴリ *'),
                    React.createElement('select', {
                      key: 'category-select',
                      value: selectedIncident.category,
                      onChange: (e) => setSelectedIncident({...selectedIncident, category: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',
                      required: true
                    }, [
                      React.createElement('option', { key: 'select', value: '' }, '--- カテゴリを選択 ---'),
                      React.createElement('option', { key: 'network', value: 'ネットワーク' }, '🌐 ネットワーク'),
                      React.createElement('option', { key: 'hardware', value: 'ハードウェア' }, '🖥️ ハードウェア'),
                      React.createElement('option', { key: 'software', value: 'ソフトウェア' }, '💿 ソフトウェア'),
                      React.createElement('option', { key: 'application', value: 'アプリケーション' }, '📱 アプリケーション'),
                      React.createElement('option', { key: 'security', value: 'セキュリティ' }, '🔒 セキュリティ'),
                      React.createElement('option', { key: 'database', value: 'データベース' }, '🗃️ データベース'),
                      React.createElement('option', { key: 'email', value: 'メール' }, '📧 メール'),
                      React.createElement('option', { key: 'other', value: 'その他' }, '🔧 その他')
                    ])
                  ]),
                  React.createElement('div', { key: 'priority-field' }, [
                    React.createElement('label', { key: 'priority-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '優先度 *'),
                    React.createElement('select', {
                      key: 'priority-select',
                      value: selectedIncident.priority,
                      onChange: (e) => setSelectedIncident({...selectedIncident, priority: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                    }, [
                      React.createElement('option', { key: 'critical', value: 'Critical' }, '🔴 緊急 (Critical)'),
                      React.createElement('option', { key: 'high', value: 'High' }, '🟠 高 (High)'),
                      React.createElement('option', { key: 'medium', value: 'Medium' }, '🟡 中 (Medium)'),
                      React.createElement('option', { key: 'low', value: 'Low' }, '🟢 低 (Low)')
                    ])
                  ]),
                  React.createElement('div', { key: 'status-field' }, [
                    React.createElement('label', { key: 'status-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'ステータス'),
                    React.createElement('select', {
                      key: 'status-select',
                      value: selectedIncident.status,
                      onChange: (e) => setSelectedIncident({...selectedIncident, status: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                    }, [
                      React.createElement('option', { key: 'open', value: 'Open' }, '🔵 オープン'),
                      React.createElement('option', { key: 'progress', value: 'In Progress' }, '🟡 対応中'),
                      React.createElement('option', { key: 'resolved', value: 'Resolved' }, '🟢 解決済み'),
                      React.createElement('option', { key: 'closed', value: 'Closed' }, '⚪ クローズ')
                    ])
                  ]),
                  React.createElement('div', { key: 'assignee-field' }, [
                    React.createElement('label', { key: 'assignee-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '担当者'),
                    React.createElement('select', {
                      key: 'assignee-select',
                      value: selectedIncident.assignee,
                      onChange: (e) => setSelectedIncident({...selectedIncident, assignee: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                    }, [
                      React.createElement('option', { key: 'unassigned', value: '' }, '--- 担当者未設定 ---'),
                      React.createElement('option', { key: 'tanaka', value: '田中太郎' }, '👤 田中太郎 (IT部)'),
                      React.createElement('option', { key: 'yamada', value: '山田次郎' }, '👤 山田次郎 (IT部)'),
                      React.createElement('option', { key: 'ito', value: '伊藤三郎' }, '👤 伊藤三郎 (IT部)'),
                      React.createElement('option', { key: 'sato', value: '佐藤花子' }, '👤 佐藤花子 (運用部)'),
                      React.createElement('option', { key: 'suzuki', value: '鈴木一郎' }, '👤 鈴木一郎 (運用部)')
                    ])
                  ]),
                  React.createElement('div', { key: 'reporter-field' }, [
                    React.createElement('label', { key: 'reporter-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '報告者 *'),
                    React.createElement('input', {
                      key: 'reporter-input',
                      type: 'text',
                      value: selectedIncident.reporter,
                      onChange: (e) => setSelectedIncident({...selectedIncident, reporter: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50',
                      placeholder: '報告者名',
                      disabled: true
                    })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'reporter-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '👤 報告者詳細情報'),
                React.createElement('div', { key: 'form-grid', className: 'grid grid-cols-1 md:grid-cols-2 gap-4' }, [
                  React.createElement('div', { key: 'reporter-email-field' }, [
                    React.createElement('label', { key: 'email-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '報告者メールアドレス'),
                    React.createElement('input', {
                      key: 'email-input',
                      type: 'email',
                      value: selectedIncident.reporterEmail || '',
                      onChange: (e) => setSelectedIncident({...selectedIncident, reporterEmail: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',
                      placeholder: 'reporter@company.com'
                    })
                  ]),
                  React.createElement('div', { key: 'reporter-dept-field' }, [
                    React.createElement('label', { key: 'dept-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '報告者部署'),
                    React.createElement('input', {
                      key: 'dept-input',
                      type: 'text',
                      value: selectedIncident.reporterDepartment || '',
                      onChange: (e) => setSelectedIncident({...selectedIncident, reporterDepartment: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',
                      placeholder: '例: 営業部、総務部、IT部など'
                    })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'impact-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '⚠️ 影響範囲情報'),
                React.createElement('div', { key: 'form-grid', className: 'grid grid-cols-1 md:grid-cols-2 gap-4' }, [
                  React.createElement('div', { key: 'impact-field' }, [
                    React.createElement('label', { key: 'impact-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '影響度'),
                    React.createElement('select', {
                      key: 'impact-select',
                      value: selectedIncident.impact || 'Medium',
                      onChange: (e) => setSelectedIncident({...selectedIncident, impact: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                    }, [
                      React.createElement('option', { key: 'critical', value: 'Critical' }, '🔴 重大 - 業務停止レベル'),
                      React.createElement('option', { key: 'high', value: 'High' }, '🟠 高 - 業務に大きな支障'),
                      React.createElement('option', { key: 'medium', value: 'Medium' }, '🟡 中 - 業務に一部支障'),
                      React.createElement('option', { key: 'low', value: 'Low' }, '🟢 低 - 軽微な影響')
                    ])
                  ]),
                  React.createElement('div', { key: 'urgency-field' }, [
                    React.createElement('label', { key: 'urgency-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '緊急度'),
                    React.createElement('select', {
                      key: 'urgency-select',
                      value: selectedIncident.urgency || 'Medium',
                      onChange: (e) => setSelectedIncident({...selectedIncident, urgency: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                    }, [
                      React.createElement('option', { key: 'critical', value: 'Critical' }, '🔴 至急 - 即時対応必要'),
                      React.createElement('option', { key: 'high', value: 'High' }, '🟠 高 - 当日中の対応必要'),
                      React.createElement('option', { key: 'medium', value: 'Medium' }, '🟡 中 - 2-3日以内の対応'),
                      React.createElement('option', { key: 'low', value: 'Low' }, '🟢 低 - 計画的対応可')
                    ])
                  ]),
                  React.createElement('div', { key: 'affected-users-field' }, [
                    React.createElement('label', { key: 'users-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '影響を受けているユーザー'),
                    React.createElement('input', {
                      key: 'users-input',
                      type: 'text',
                      value: selectedIncident.affectedUsers || '',
                      onChange: (e) => setSelectedIncident({...selectedIncident, affectedUsers: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',
                      placeholder: '例: 全社員（約200名）、営業部（30名）、特定ユーザー名など'
                    })
                  ]),
                  React.createElement('div', { key: 'affected-systems-field' }, [
                    React.createElement('label', { key: 'systems-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '影響を受けているシステム'),
                    React.createElement('input', {
                      key: 'systems-input',
                      type: 'text',
                      value: selectedIncident.affectedSystems || '',
                      onChange: (e) => setSelectedIncident({...selectedIncident, affectedSystems: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',
                      placeholder: '例: メールサーバー、販売管理システム、社内ポータルなど'
                    })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'description-section', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '📝 詳細説明'),
                React.createElement('div', { key: 'description-help', className: 'bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4' }, [
                  React.createElement('p', { key: 'help-text', className: 'text-sm text-yellow-800' }, '💡 以下の情報を含めて詳細に記述してください：'),
                  React.createElement('ul', { key: 'help-list', className: 'text-xs text-yellow-700 mt-2 ml-4 list-disc space-y-1' }, [
                    React.createElement('li', { key: 'what' }, '何が発生したか'),
                    React.createElement('li', { key: 'when' }, 'いつ発生したか'),
                    React.createElement('li', { key: 'where' }, 'どこで発生したか（システム・場所）'),
                    React.createElement('li', { key: 'impact' }, '影響範囲・影響を受けているユーザー数'),
                    React.createElement('li', { key: 'reproduce' }, '再現手順（可能であれば）')
                  ])
                ]),
                React.createElement('textarea', {
                  key: 'description-textarea',
                  value: selectedIncident.description,
                  onChange: (e) => setSelectedIncident({...selectedIncident, description: e.target.value}),
                  rows: 6,
                  className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none',
                  placeholder: '例:\n\n【発生事象】\nメールサーバー（mail.company.com）への接続ができない状況です。\n\n【発生日時】\n2024年6月22日 10:30頃から\n\n【影響範囲】\n全社員（約200名）がメールの送受信不可\n\n【詳細】\nOutlookでメール確認時に「サーバーに接続できません」エラーが表示されます。',
                  required: true
                })
              ]),
              React.createElement('div', { key: 'resolution-section', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '🔧 解決内容'),
                React.createElement('div', { key: 'resolution-grid', className: 'grid grid-cols-1 md:grid-cols-2 gap-4 mb-4' }, [
                  React.createElement('div', { key: 'estimated-resolution-field' }, [
                    React.createElement('label', { key: 'estimated-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '解決予定日時'),
                    React.createElement('input', {
                      key: 'estimated-input',
                      type: 'datetime-local',
                      value: selectedIncident.estimatedResolution || '',
                      onChange: (e) => setSelectedIncident({...selectedIncident, estimatedResolution: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                    })
                  ]),
                  React.createElement('div', { key: 'actual-resolution-field' }, [
                    React.createElement('label', { key: 'actual-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '実際の解決時間'),
                    React.createElement('input', {
                      key: 'actual-input',
                      type: 'text',
                      value: selectedIncident.actualResolutionTime || '',
                      onChange: (e) => setSelectedIncident({...selectedIncident, actualResolutionTime: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',
                      placeholder: '例: 2時間30分、1営業日など'
                    })
                  ])
                ]),
                React.createElement('textarea', {
                  key: 'resolution-textarea',
                  value: selectedIncident.resolution || '',
                  onChange: (e) => setSelectedIncident({...selectedIncident, resolution: e.target.value}),
                  rows: 4,
                  className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none',
                  placeholder: '解決方法や対応内容を詳細に記録してください。\n例：\n・実施した対応手順\n・根本原因\n・今後の予防策'
                })
              ]),
              React.createElement('div', { key: 'additional-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '📎 追加情報'),
                React.createElement('div', { key: 'related-assets-field', className: 'mb-4' }, [
                  React.createElement('label', { key: 'assets-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '関連資産'),
                  React.createElement('input', {
                    key: 'assets-input',
                    type: 'text',
                    value: (selectedIncident.relatedAssets || []).join(', '),
                    onChange: (e) => setSelectedIncident({...selectedIncident, relatedAssets: e.target.value.split(',').map(s => s.trim()).filter(s => s)}),
                    className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent',
                    placeholder: '例: SRV-001, NET-005, DSK-123（カンマ区切りで複数入力可）'
                  }),
                  React.createElement('p', { key: 'assets-help', className: 'text-xs text-gray-500 mt-1' }, '関連する資産タグをカンマ区切りで入力してください')
                ]),
                React.createElement('div', { key: 'notes-field', className: 'mb-4' }, [
                  React.createElement('label', { key: 'notes-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '備考・メモ'),
                  React.createElement('textarea', {
                    key: 'notes-textarea',
                    value: selectedIncident.notes || '',
                    onChange: (e) => setSelectedIncident({...selectedIncident, notes: e.target.value}),
                    rows: 3,
                    className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none',
                    placeholder: '追加の情報や引き継ぎ事項などを記入してください'
                  })
                ]),
                React.createElement('div', { key: 'attachments-field' }, [
                  React.createElement('label', { key: 'attachments-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '添付ファイル'),
                  React.createElement('div', { key: 'attachments-note', className: 'bg-gray-50 border border-gray-200 rounded-lg p-4' }, [
                    React.createElement('p', { key: 'note-text', className: 'text-sm text-gray-600' }, '📁 ファイルアップロード機能は今後実装予定です'),
                    React.createElement('p', { key: 'current-attachments', className: 'text-xs text-gray-500 mt-1' }, 
                      `現在の添付ファイル数: ${(selectedIncident.attachments || []).length}件`
                    )
                  ])
                ])
              ]),
              React.createElement('div', { key: 'form-actions', className: 'flex justify-between items-center pt-6 border-t border-gray-200' }, [
                React.createElement('div', { key: 'required-note', className: 'text-sm text-gray-500' }, [
                  React.createElement('span', { key: 'asterisk', className: 'text-red-500' }, '*'),
                  React.createElement('span', { key: 'text' }, ' 必須項目')
                ]),
                React.createElement('div', { key: 'buttons', className: 'flex space-x-3' }, [
                  React.createElement('button', {
                    key: 'cancel',
                    type: 'button',
                    onClick: () => setIsModalOpen(false),
                    className: 'px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium'
                  }, '❌ キャンセル'),
                  React.createElement('button', {
                    key: 'save',
                    type: 'submit',
                    className: 'px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all transform hover:scale-105 shadow-lg font-medium'
                  }, [
                    React.createElement('span', { key: 'icon', className: 'mr-2' }, '💾'),
                    React.createElement('span', { key: 'text' }, selectedIncident.id && incidents.find(inc => inc.id === selectedIncident.id) ? 'インシデント更新' : 'インシデント作成')
                  ])
                ])
              ])
            ]) : React.createElement('div', {
              key: 'view-mode',
              className: 'space-y-6'
            }, [
              React.createElement('div', { key: 'incident-header', className: 'border-b border-gray-200 pb-4' }, [
                React.createElement('div', { key: 'header-content', className: 'flex justify-between items-start' }, [
                  React.createElement('div', { key: 'title-section' }, [
                    React.createElement('h3', { key: 'incident-title', className: 'text-xl font-semibold text-gray-900' }, selectedIncident.title),
                    React.createElement('p', { key: 'incident-id', className: 'text-sm text-gray-500 mt-1' }, `ID: ${selectedIncident.id}`)
                  ]),
                  React.createElement('div', { key: 'status-priority', className: 'flex space-x-2' }, [
                    React.createElement(StatusBadge, { key: 'status', status: selectedIncident.status }),
                    React.createElement(PriorityBadge, { key: 'priority', priority: selectedIncident.priority })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'incident-details', className: 'grid grid-cols-1 md:grid-cols-2 gap-6' }, [
                React.createElement('div', { key: 'left-column' }, [
                  React.createElement('div', { key: 'basic-info', className: 'space-y-3' }, [
                    React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900' }, '基本情報'),
                    React.createElement('dl', { key: 'info-list', className: 'space-y-2' }, [
                      React.createElement('div', { key: 'category' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, 'カテゴリ'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.category)
                      ]),
                      React.createElement('div', { key: 'reporter' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '報告者'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.reporter)
                      ]),
                      React.createElement('div', { key: 'assignee' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '担当者'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.assignee || '未割当')
                      ]),
                      selectedIncident.reporterEmail && React.createElement('div', { key: 'reporter-email' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '報告者メール'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.reporterEmail)
                      ]),
                      selectedIncident.reporterDepartment && React.createElement('div', { key: 'reporter-dept' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '報告者部署'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.reporterDepartment)
                      ])
                    ])
                  ])
                ]),
                React.createElement('div', { key: 'right-column' }, [
                  React.createElement('div', { key: 'timestamp-info', className: 'space-y-3' }, [
                    React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900' }, 'タイムスタンプ'),
                    React.createElement('dl', { key: 'timestamp-list', className: 'space-y-2' }, [
                      React.createElement('div', { key: 'created' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '作成日時'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.created)
                      ]),
                      React.createElement('div', { key: 'updated' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '更新日時'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.updated)
                      ]),
                      selectedIncident.estimatedResolution && React.createElement('div', { key: 'estimated' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '解決予定'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.estimatedResolution)
                      ]),
                      selectedIncident.actualResolutionTime && React.createElement('div', { key: 'actual-resolution' }, [
                        React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '実際の解決時間'),
                        React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.actualResolutionTime)
                      ])
                    ])
                  ])
                ])
              ]),
              (selectedIncident.impact || selectedIncident.urgency || selectedIncident.affectedUsers || selectedIncident.affectedSystems) && 
              React.createElement('div', { key: 'impact-details', className: 'grid grid-cols-1 md:grid-cols-2 gap-6' }, [
                React.createElement('div', { key: 'impact-info' }, [
                  React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900 mb-3' }, '影響範囲情報'),
                  React.createElement('dl', { key: 'impact-list', className: 'space-y-2' }, [
                    selectedIncident.impact && React.createElement('div', { key: 'impact' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '影響度'),
                      React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, 
                        selectedIncident.impact === 'Critical' ? '🔴 重大' :
                        selectedIncident.impact === 'High' ? '🟠 高' :
                        selectedIncident.impact === 'Medium' ? '🟡 中' : '🟢 低'
                      )
                    ]),
                    selectedIncident.urgency && React.createElement('div', { key: 'urgency' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '緊急度'),
                      React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, 
                        selectedIncident.urgency === 'Critical' ? '🔴 至急' :
                        selectedIncident.urgency === 'High' ? '🟠 高' :
                        selectedIncident.urgency === 'Medium' ? '🟡 中' : '🟢 低'
                      )
                    ])
                  ])
                ]),
                React.createElement('div', { key: 'affected-info' }, [
                  React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900 mb-3' }, '影響対象'),
                  React.createElement('dl', { key: 'affected-list', className: 'space-y-2' }, [
                    selectedIncident.affectedUsers && React.createElement('div', { key: 'users' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '影響ユーザー'),
                      React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.affectedUsers)
                    ]),
                    selectedIncident.affectedSystems && React.createElement('div', { key: 'systems' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '影響システム'),
                      React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedIncident.affectedSystems)
                    ])
                  ])
                ])
              ]),
              React.createElement('div', { key: 'description-section' }, [
                React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900 mb-3' }, '詳細説明'),
                React.createElement('div', { key: 'description-content', className: 'bg-gray-50 rounded-lg p-4' }, [
                  React.createElement('p', { key: 'description-text', className: 'text-sm text-gray-700 whitespace-pre-wrap' }, selectedIncident.description)
                ])
              ]),
              selectedIncident.resolution && React.createElement('div', { key: 'resolution-section' }, [
                React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900 mb-3' }, '解決内容'),
                React.createElement('div', { key: 'resolution-content', className: 'bg-green-50 rounded-lg p-4' }, [
                  React.createElement('p', { key: 'resolution-text', className: 'text-sm text-gray-700 whitespace-pre-wrap' }, selectedIncident.resolution)
                ])
              ]),
              (selectedIncident.relatedAssets?.length > 0 || selectedIncident.notes || selectedIncident.attachments?.length > 0) && 
              React.createElement('div', { key: 'additional-info-section' }, [
                React.createElement('h4', { key: 'section-title', className: 'font-medium text-gray-900 mb-3' }, '追加情報'),
                React.createElement('div', { key: 'additional-content', className: 'space-y-3' }, [
                  selectedIncident.relatedAssets?.length > 0 && React.createElement('div', { key: 'related-assets' }, [
                    React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500 mb-1' }, '関連資産'),
                    React.createElement('dd', { key: 'value' }, 
                      React.createElement('div', { className: 'flex flex-wrap gap-2' }, 
                        selectedIncident.relatedAssets.map((asset, index) => 
                          React.createElement('span', {
                            key: index,
                            className: 'bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded'
                          }, asset)
                        )
                      )
                    )
                  ]),
                  selectedIncident.notes && React.createElement('div', { key: 'notes' }, [
                    React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500 mb-1' }, '備考・メモ'),
                    React.createElement('dd', { key: 'value', className: 'bg-gray-50 rounded-lg p-3' }, 
                      React.createElement('p', { className: 'text-sm text-gray-700 whitespace-pre-wrap' }, selectedIncident.notes)
                    )
                  ]),
                  selectedIncident.attachments?.length > 0 && React.createElement('div', { key: 'attachments' }, [
                    React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500 mb-1' }, '添付ファイル'),
                    React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, 
                      `${selectedIncident.attachments.length}件の添付ファイル`
                    )
                  ])
                ])
              ]),
              React.createElement('div', { key: 'view-actions', className: 'flex justify-between items-center pt-4 border-t border-gray-200' }, [
                React.createElement('button', {
                  key: 'delete',
                  onClick: () => handleDeleteIncident(selectedIncident),
                  className: 'px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700'
                }, '🗑️ 削除'),
                React.createElement('div', {
                  key: 'right-actions',
                  className: 'flex space-x-3'
                }, [
                  React.createElement('button', {
                    key: 'edit',
                    onClick: () => setIsEditing(true),
                    className: 'px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700'
                  }, '✏️ 編集'),
                  React.createElement('button', {
                    key: 'close',
                    onClick: () => setIsModalOpen(false),
                    className: 'px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50'
                  }, '閉じる')
                ])
              ])
            ])
          ])
        ]);
      };

      // サービス要求ページ
      const ServiceRequestsPage = () => {
        const [requests, setRequests] = useState(mockData.serviceRequests);
        const [selectedRequest, setSelectedRequest] = useState(null);
        const [isModalOpen, setIsModalOpen] = useState(false);
        const [isEditing, setIsEditing] = useState(false);
        const [searchQuery, setSearchQuery] = useState('');
        const [statusFilter, setStatusFilter] = useState('All');
        const [categoryFilter, setCategoryFilter] = useState('All');

        const filteredRequests = requests.filter(request => {
          const matchesSearch = request.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                               request.description.toLowerCase().includes(searchQuery.toLowerCase());
          const matchesStatus = statusFilter === 'All' || request.status === statusFilter;
          const matchesCategory = categoryFilter === 'All' || request.category === categoryFilter;
          return matchesSearch && matchesStatus && matchesCategory;
        });

        const generateRequestId = () => {
          const today = new Date();
          const year = today.getFullYear();
          const month = String(today.getMonth() + 1).padStart(2, '0');
          const count = String(requests.length + 1).padStart(3, '0');
          return `REQ-${year}-${month}-${count}`;
        };

        const { user } = useAuth();

        const handleCreateRequest = () => {
          const now = new Date();
          setSelectedRequest({
            id: generateRequestId(),
            title: '',
            description: '',
            status: 'New',
            priority: 'Medium',
            category: '',
            requester: user?.username || '',
            requesterEmail: user?.email || '',
            requesterDepartment: '',
            created: now.toLocaleString('ja-JP'),
            updated: now.toLocaleString('ja-JP'),
            dueDate: '',
            approver: '',
            estimatedHours: '',
            actualHours: '',
            businessJustification: '',
            urgencyReason: '',
            attachments: []
          });
          setIsEditing(true);
          setIsModalOpen(true);
        };

        const handleEditRequest = (request) => {
          setSelectedRequest({ ...request });
          setIsEditing(true);
          setIsModalOpen(true);
        };

        const handleSaveRequest = () => {
          if (!selectedRequest.title.trim()) {
            alert('タイトルは必須項目です。');
            return;
          }
          
          if (!selectedRequest.category) {
            alert('カテゴリを選択してください。');
            return;
          }

          const updatedRequest = {
            ...selectedRequest,
            updated: new Date().toLocaleString('ja-JP')
          };

          if (requests.find(req => req.id === selectedRequest.id)) {
            setRequests(requests.map(req => 
              req.id === selectedRequest.id ? updatedRequest : req
            ));
            alert(`サービス要求 ${selectedRequest.id} が正常に更新されました。`);
          } else {
            setRequests([...requests, updatedRequest]);
            alert(`サービス要求 ${selectedRequest.id} が正常に作成されました。`);
          }
          
          setIsModalOpen(false);
          setIsEditing(false);
        };

        const handleDeleteRequest = (request) => {
          if (confirm(`サービス要求 ${request.id} を削除してもよろしいですか？`)) {
            setRequests(requests.filter(req => req.id !== request.id));
            if (selectedRequest && selectedRequest.id === request.id) {
              setIsModalOpen(false);
              setSelectedRequest(null);
            }
            alert(`サービス要求 ${request.id} が正常に削除されました。`);
          }
        };

        const handleStatusChange = (request, newStatus) => {
          const updatedRequest = {
            ...request,
            status: newStatus,
            updated: new Date().toLocaleString('ja-JP')
          };

          if (newStatus === 'Approved' || newStatus === 'Rejected') {
            updatedRequest.approvedDate = new Date().toLocaleString('ja-JP');
          }

          setRequests(requests.map(req => 
            req.id === request.id ? updatedRequest : req
          ));
        };

        return React.createElement(MainLayout, {}, [
          React.createElement('div', {
            key: 'header',
            className: 'bg-white shadow border-b border-slate-200'
          }, 
            React.createElement('div', {
              className: 'px-6 py-4 flex justify-between items-center'
            }, [
              React.createElement('div', { key: 'title-section' }, [
                React.createElement('h1', {
                  key: 'title',
                  className: 'text-2xl font-bold text-slate-800'
                }, '📝 サービス要求'),
                React.createElement('p', {
                  key: 'subtitle',
                  className: 'text-slate-600 mt-1'
                }, 'ITサービスの申請・承認管理')
              ]),
              React.createElement('button', {
                key: 'create-btn',
                onClick: handleCreateRequest,
                className: 'bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors transform hover:scale-105 shadow-lg font-medium flex items-center space-x-2'
              }, [
                React.createElement('span', { key: 'icon', className: 'text-lg' }, '➕'),
                React.createElement('span', { key: 'text' }, '新規要求作成')
              ])
            ])
          ),
          React.createElement('div', {
            key: 'content',
            className: 'flex-1 p-6'
          }, [
            React.createElement('div', {
              key: 'filters',
              className: 'bg-white rounded-lg shadow-sm border p-4 mb-6'
            }, [
              React.createElement('div', {
                key: 'filter-row',
                className: 'grid grid-cols-1 md:grid-cols-4 gap-4'
              }, [
                React.createElement('div', { key: 'search' }, [
                  React.createElement('label', {
                    key: 'search-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '🔍 検索'),
                  React.createElement('input', {
                    key: 'search-input',
                    type: 'text',
                    value: searchQuery,
                    onChange: (e) => setSearchQuery(e.target.value),
                    placeholder: 'タイトル・説明で検索',
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  })
                ]),
                React.createElement('div', { key: 'status-filter' }, [
                  React.createElement('label', {
                    key: 'status-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '📊 ステータス'),
                  React.createElement('select', {
                    key: 'status-select',
                    value: statusFilter,
                    onChange: (e) => setStatusFilter(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  }, [
                    React.createElement('option', { key: 'all', value: 'All' }, '全て'),
                    React.createElement('option', { key: 'new', value: 'New' }, '新規'),
                    React.createElement('option', { key: 'pending', value: 'Pending' }, '承認待ち'),
                    React.createElement('option', { key: 'approved', value: 'Approved' }, '承認済み'),
                    React.createElement('option', { key: 'rejected', value: 'Rejected' }, '却下'),
                    React.createElement('option', { key: 'completed', value: 'Completed' }, '完了')
                  ])
                ]),
                React.createElement('div', { key: 'category-filter' }, [
                  React.createElement('label', {
                    key: 'category-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '📂 カテゴリ'),
                  React.createElement('select', {
                    key: 'category-select',
                    value: categoryFilter,
                    onChange: (e) => setCategoryFilter(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  }, [
                    React.createElement('option', { key: 'all', value: 'All' }, '全て'),
                    React.createElement('option', { key: 'hardware', value: 'ハードウェア' }, 'ハードウェア'),
                    React.createElement('option', { key: 'software', value: 'ソフトウェア' }, 'ソフトウェア'),
                    React.createElement('option', { key: 'access', value: 'アクセス権' }, 'アクセス権'),
                    React.createElement('option', { key: 'other', value: 'その他' }, 'その他')
                  ])
                ]),
                React.createElement('div', { key: 'stats', className: 'flex items-end' }, [
                  React.createElement('div', {
                    key: 'count',
                    className: 'text-sm text-gray-600'
                  }, `📋 表示中: ${filteredRequests.length}件 / 総計: ${requests.length}件`)
                ])
              ])
            ]),
            React.createElement('div', {
              key: 'table',
              className: 'bg-white rounded-lg shadow-sm border overflow-hidden'
            }, [
              React.createElement('div', {
                key: 'table-container',
                className: 'table-responsive'
              }, [
                React.createElement('table', {
                  key: 'requests-table',
                  className: 'min-w-full divide-y divide-gray-200'
                }, [
                  React.createElement('thead', {
                    key: 'table-head',
                    className: 'bg-gray-50'
                  }, [
                    React.createElement('tr', { key: 'header-row' }, [
                      React.createElement('th', { key: 'id', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'ID'),
                      React.createElement('th', { key: 'title', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'タイトル'),
                      React.createElement('th', { key: 'category', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'カテゴリ'),
                      React.createElement('th', { key: 'status', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'ステータス'),
                      React.createElement('th', { key: 'priority', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '優先度'),
                      React.createElement('th', { key: 'requester', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '申請者'),
                      React.createElement('th', { key: 'created', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '申請日'),
                      React.createElement('th', { key: 'actions', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '操作')
                    ])
                  ]),
                  React.createElement('tbody', {
                    key: 'table-body',
                    className: 'bg-white divide-y divide-gray-200'
                  }, filteredRequests.map(request => 
                    React.createElement('tr', {
                      key: request.id,
                      className: 'hover:bg-gray-50 cursor-pointer'
                    }, [
                      React.createElement('td', { key: 'id', className: 'px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900' }, request.id),
                      React.createElement('td', { key: 'title', className: 'px-6 py-4 text-sm text-gray-900' }, request.title),
                      React.createElement('td', { key: 'category', className: 'px-6 py-4 whitespace-nowrap text-sm text-gray-900' }, request.category),
                      React.createElement('td', { key: 'status', className: 'px-6 py-4 whitespace-nowrap' }, 
                        React.createElement(StatusBadge, { status: request.status })
                      ),
                      React.createElement('td', { key: 'priority', className: 'px-6 py-4 whitespace-nowrap' }, 
                        React.createElement(PriorityBadge, { priority: request.priority })
                      ),
                      React.createElement('td', { key: 'requester', className: 'px-6 py-4 whitespace-nowrap text-sm text-gray-900' }, request.requester),
                      React.createElement('td', { key: 'created', className: 'px-6 py-4 whitespace-nowrap text-sm text-gray-500' }, request.created),
                      React.createElement('td', { key: 'actions', className: 'px-6 py-4 whitespace-nowrap text-sm font-medium' }, [
                        React.createElement('div', {
                          key: 'action-group',
                          className: 'flex items-center space-x-2'
                        }, [
                          React.createElement('button', {
                            key: 'view',
                            onClick: () => {
                              setSelectedRequest(request);
                              setIsEditing(false);
                              setIsModalOpen(true);
                            },
                            className: 'text-blue-600 hover:text-blue-900'
                          }, '👁️'),
                          React.createElement('button', {
                            key: 'edit',
                            onClick: () => handleEditRequest(request),
                            className: 'text-green-600 hover:text-green-900'
                          }, '✏️'),
                          React.createElement('button', {
                            key: 'delete',
                            onClick: () => handleDeleteRequest(request),
                            className: 'text-red-600 hover:text-red-900'
                          }, '🗑️')
                        ])
                      ])
                    ])
                  ))
                ])
              ])
            ])
          ]),
          React.createElement(Modal, {
            key: 'request-modal',
            isOpen: isModalOpen,
            onClose: () => setIsModalOpen(false),
            title: isEditing ? (selectedRequest?.id?.includes('undefined') ? '新規サービス要求' : 'サービス要求編集') : 'サービス要求詳細',
            size: 'large'
          }, selectedRequest && [
            isEditing ? React.createElement('form', {
              key: 'edit-form',
              onSubmit: (e) => {
                e.preventDefault();
                handleSaveRequest();
              },
              className: 'space-y-6'
            }, [
              React.createElement('div', { key: 'basic-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '基本情報'),
                React.createElement('div', { key: 'form-grid', className: 'grid grid-cols-1 md:grid-cols-2 gap-4' }, [
                  React.createElement('div', { key: 'title-field', className: 'md:col-span-2' }, [
                    React.createElement('label', { key: 'title-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'タイトル *'),
                    React.createElement('input', {
                      key: 'title-input',
                      type: 'text',
                      value: selectedRequest.title,
                      onChange: (e) => setSelectedRequest({...selectedRequest, title: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                      placeholder: '例: 新しいソフトウェアライセンスの申請',
                      required: true
                    })
                  ]),
                  React.createElement('div', { key: 'category-field' }, [
                    React.createElement('label', { key: 'category-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'カテゴリ *'),
                    React.createElement('select', {
                      key: 'category-select',
                      value: selectedRequest.category,
                      onChange: (e) => setSelectedRequest({...selectedRequest, category: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                      required: true
                    }, [
                      React.createElement('option', { key: 'select', value: '' }, '--- 選択してください ---'),
                      React.createElement('option', { key: 'hardware', value: 'ハードウェア' }, '🖥️ ハードウェア'),
                      React.createElement('option', { key: 'software', value: 'ソフトウェア' }, '💿 ソフトウェア'),
                      React.createElement('option', { key: 'access', value: 'アクセス権' }, '🔑 アクセス権'),
                      React.createElement('option', { key: 'other', value: 'その他' }, '🔧 その他')
                    ])
                  ]),
                  React.createElement('div', { key: 'priority-field' }, [
                    React.createElement('label', { key: 'priority-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, '優先度'),
                    React.createElement('select', {
                      key: 'priority-select',
                      value: selectedRequest.priority,
                      onChange: (e) => setSelectedRequest({...selectedRequest, priority: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
                    }, [
                      React.createElement('option', { key: 'low', value: 'Low' }, '🟢 低'),
                      React.createElement('option', { key: 'medium', value: 'Medium' }, '🟡 中'),
                      React.createElement('option', { key: 'high', value: 'High' }, '🟠 高'),
                      React.createElement('option', { key: 'critical', value: 'Critical' }, '🔴 緊急')
                    ])
                  ])
                ])
              ]),
              React.createElement('div', { key: 'description-section', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '詳細情報'),
                React.createElement('textarea', {
                  key: 'description-textarea',
                  value: selectedRequest.description,
                  onChange: (e) => setSelectedRequest({...selectedRequest, description: e.target.value}),
                  rows: 4,
                  className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                  placeholder: 'サービス要求の詳細を記入してください'
                })
              ]),
              React.createElement('div', { key: 'form-actions', className: 'flex justify-end space-x-3 pt-6 border-t border-gray-200' }, [
                React.createElement('button', {
                  key: 'cancel',
                  type: 'button',
                  onClick: () => setIsModalOpen(false),
                  className: 'px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50'
                }, 'キャンセル'),
                React.createElement('button', {
                  key: 'save',
                  type: 'submit',
                  className: 'px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700'
                }, selectedRequest.id && requests.find(req => req.id === selectedRequest.id) ? '更新' : '作成')
              ])
            ]) : React.createElement('div', {
              key: 'view-mode',
              className: 'space-y-6'
            }, [
              React.createElement('div', { key: 'request-info' }, [
                React.createElement('h3', { key: 'title', className: 'text-xl font-semibold text-gray-900' }, selectedRequest.title),
                React.createElement('p', { key: 'id', className: 'text-sm text-gray-500 mt-1' }, `ID: ${selectedRequest.id}`)
              ]),
              React.createElement('div', { key: 'request-details', className: 'grid grid-cols-1 md:grid-cols-2 gap-6' }, [
                React.createElement('div', { key: 'left-column' }, [
                  React.createElement('dl', { key: 'info-list', className: 'space-y-2' }, [
                    React.createElement('div', { key: 'category' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, 'カテゴリ'),
                      React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedRequest.category)
                    ]),
                    React.createElement('div', { key: 'status' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, 'ステータス'),
                      React.createElement('dd', { key: 'value' }, React.createElement(StatusBadge, { status: selectedRequest.status }))
                    ]),
                    React.createElement('div', { key: 'priority' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '優先度'),
                      React.createElement('dd', { key: 'value' }, React.createElement(PriorityBadge, { priority: selectedRequest.priority }))
                    ])
                  ])
                ]),
                React.createElement('div', { key: 'right-column' }, [
                  React.createElement('dl', { key: 'info-list', className: 'space-y-2' }, [
                    React.createElement('div', { key: 'requester' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '申請者'),
                      React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedRequest.requester)
                    ]),
                    React.createElement('div', { key: 'created' }, [
                      React.createElement('dt', { key: 'label', className: 'text-sm text-gray-500' }, '申請日'),
                      React.createElement('dd', { key: 'value', className: 'text-sm text-gray-900' }, selectedRequest.created)
                    ])
                  ])
                ])
              ]),
              React.createElement('div', { key: 'description-section' }, [
                React.createElement('h4', { key: 'title', className: 'font-medium text-gray-900 mb-2' }, '説明'),
                React.createElement('p', { key: 'description', className: 'text-sm text-gray-700' }, selectedRequest.description)
              ]),
              React.createElement('div', { key: 'actions', className: 'flex justify-end space-x-3 pt-4 border-t border-gray-200' }, [
                React.createElement('button', {
                  key: 'close',
                  onClick: () => setIsModalOpen(false),
                  className: 'px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50'
                }, '閉じる')
              ])
            ])
          ])
        ]);
      };

      // ナレッジベースページ
      const KnowledgePage = () => {
        const [articles, setArticles] = useState(mockData.knowledge);
        const [selectedArticle, setSelectedArticle] = useState(null);
        const [isModalOpen, setIsModalOpen] = useState(false);
        const [isEditing, setIsEditing] = useState(false);
        const [searchQuery, setSearchQuery] = useState('');
        const [categoryFilter, setCategoryFilter] = useState('All');
        const [statusFilter, setStatusFilter] = useState('Published');

        const filteredArticles = articles.filter(article => {
          const matchesSearch = article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                               article.content.toLowerCase().includes(searchQuery.toLowerCase()) ||
                               article.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()));
          const matchesCategory = categoryFilter === 'All' || article.category === categoryFilter;
          const matchesStatus = statusFilter === 'All' || article.status === statusFilter;
          return matchesSearch && matchesCategory && matchesStatus;
        });

        const generateArticleId = () => {
          const count = String(articles.length + 1).padStart(3, '0');
          return `KB-${count}`;
        };

        const { user } = useAuth();

        const handleCreateArticle = () => {
          const now = new Date();
          setSelectedArticle({
            id: generateArticleId(),
            title: '',
            content: '',
            category: '',
            tags: [],
            author: user?.username || '',
            created: now.toISOString().split('T')[0],
            updated: now.toISOString().split('T')[0],
            views: 0,
            status: 'Draft',
            approver: ''
          });
          setIsEditing(true);
          setIsModalOpen(true);
        };

        const handleEditArticle = (article) => {
          setSelectedArticle({ ...article });
          setIsEditing(true);
          setIsModalOpen(true);
        };

        const handleSaveArticle = () => {
          if (!selectedArticle.title.trim()) {
            alert('タイトルは必須項目です。');
            return;
          }
          
          if (!selectedArticle.category) {
            alert('カテゴリを選択してください。');
            return;
          }

          const updatedArticle = {
            ...selectedArticle,
            updated: new Date().toISOString().split('T')[0]
          };

          if (articles.find(art => art.id === selectedArticle.id)) {
            setArticles(articles.map(art => 
              art.id === selectedArticle.id ? updatedArticle : art
            ));
            alert(`ナレッジ記事 ${selectedArticle.id} が正常に更新されました。`);
          } else {
            setArticles([...articles, updatedArticle]);
            alert(`ナレッジ記事 ${selectedArticle.id} が正常に作成されました。`);
          }
          
          setIsModalOpen(false);
          setIsEditing(false);
        };

        const handleDeleteArticle = (article) => {
          if (confirm(`ナレッジ記事 ${article.id} を削除してもよろしいですか？`)) {
            setArticles(articles.filter(art => art.id !== article.id));
            if (selectedArticle && selectedArticle.id === article.id) {
              setIsModalOpen(false);
              setSelectedArticle(null);
            }
            alert(`ナレッジ記事 ${article.id} が正常に削除されました。`);
          }
        };

        const handleViewArticle = (article) => {
          // 閲覧数を増やす
          const updatedArticle = { ...article, views: article.views + 1 };
          setArticles(articles.map(art => 
            art.id === article.id ? updatedArticle : art
          ));
          setSelectedArticle(updatedArticle);
          setIsEditing(false);
          setIsModalOpen(true);
        };

        const categories = ['アカウント管理', 'ネットワーク', 'ソフトウェア', 'ハードウェア', 'セキュリティ', 'その他'];

        return React.createElement(MainLayout, {}, [
          React.createElement('div', {
            key: 'header',
            className: 'bg-white shadow border-b border-slate-200'
          }, 
            React.createElement('div', {
              className: 'px-6 py-4 flex justify-between items-center'
            }, [
              React.createElement('div', { key: 'title-section' }, [
                React.createElement('h1', {
                  key: 'title',
                  className: 'text-2xl font-bold text-slate-800'
                }, '📚 ナレッジベース'),
                React.createElement('p', {
                  key: 'subtitle',
                  className: 'text-slate-600 mt-1'
                }, 'IT運用に関する知識・手順書の管理')
              ]),
              React.createElement('button', {
                key: 'create-btn',
                onClick: handleCreateArticle,
                className: 'bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors transform hover:scale-105 shadow-lg font-medium flex items-center space-x-2'
              }, [
                React.createElement('span', { key: 'icon', className: 'text-lg' }, '➕'),
                React.createElement('span', { key: 'text' }, '新規記事作成')
              ])
            ])
          ),
          React.createElement('div', {
            key: 'content',
            className: 'flex-1 p-6'
          }, [
            React.createElement('div', {
              key: 'filters',
              className: 'bg-white rounded-lg shadow-sm border p-4 mb-6'
            }, [
              React.createElement('div', {
                key: 'filter-row',
                className: 'grid grid-cols-1 md:grid-cols-4 gap-4'
              }, [
                React.createElement('div', { key: 'search' }, [
                  React.createElement('label', {
                    key: 'search-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '🔍 検索'),
                  React.createElement('input', {
                    key: 'search-input',
                    type: 'text',
                    value: searchQuery,
                    onChange: (e) => setSearchQuery(e.target.value),
                    placeholder: 'タイトル・内容・タグで検索',
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  })
                ]),
                React.createElement('div', { key: 'category-filter' }, [
                  React.createElement('label', {
                    key: 'category-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '📂 カテゴリ'),
                  React.createElement('select', {
                    key: 'category-select',
                    value: categoryFilter,
                    onChange: (e) => setCategoryFilter(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  }, [
                    React.createElement('option', { key: 'all', value: 'All' }, '全て'),
                    ...categories.map(cat => 
                      React.createElement('option', { key: cat, value: cat }, cat)
                    )
                  ])
                ]),
                React.createElement('div', { key: 'status-filter' }, [
                  React.createElement('label', {
                    key: 'status-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '📊 ステータス'),
                  React.createElement('select', {
                    key: 'status-select',
                    value: statusFilter,
                    onChange: (e) => setStatusFilter(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  }, [
                    React.createElement('option', { key: 'published', value: 'Published' }, '公開済み'),
                    React.createElement('option', { key: 'draft', value: 'Draft' }, '下書き'),
                    React.createElement('option', { key: 'all', value: 'All' }, '全て')
                  ])
                ]),
                React.createElement('div', { key: 'stats', className: 'flex items-end' }, [
                  React.createElement('div', {
                    key: 'count',
                    className: 'text-sm text-gray-600'
                  }, `📋 表示中: ${filteredArticles.length}件 / 総計: ${articles.length}件`)
                ])
              ])
            ]),
            React.createElement('div', {
              key: 'articles-grid',
              className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'
            }, filteredArticles.map(article => 
              React.createElement('div', {
                key: article.id,
                className: 'bg-white rounded-lg shadow-sm border hover:shadow-lg transition-shadow cursor-pointer',
                onClick: () => handleViewArticle(article)
              }, [
                React.createElement('div', { key: 'card-header', className: 'p-6' }, [
                  React.createElement('div', { key: 'header-row', className: 'flex justify-between items-start mb-3' }, [
                    React.createElement('h3', { key: 'title', className: 'text-lg font-semibold text-gray-900' }, article.title),
                    React.createElement('span', {
                      key: 'status',
                      className: `px-2 py-1 text-xs rounded-full ${
                        article.status === 'Published' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
                      }`
                    }, article.status === 'Published' ? '公開済み' : '下書き')
                  ]),
                  React.createElement('p', { key: 'category', className: 'text-sm text-gray-500 mb-2' }, article.category),
                  React.createElement('p', { key: 'content', className: 'text-sm text-gray-700 line-clamp-3 mb-4' }, 
                    article.content.substring(0, 150) + '...'
                  ),
                  React.createElement('div', { key: 'tags', className: 'flex flex-wrap gap-2 mb-4' }, 
                    article.tags.map((tag, index) => 
                      React.createElement('span', {
                        key: index,
                        className: 'bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded'
                      }, tag)
                    )
                  )
                ]),
                React.createElement('div', { key: 'card-footer', className: 'bg-gray-50 px-6 py-3 border-t' }, [
                  React.createElement('div', { key: 'footer-content', className: 'flex justify-between items-center text-sm' }, [
                    React.createElement('div', { key: 'author-info', className: 'text-gray-600' }, [
                      React.createElement('span', { key: 'author' }, `👤 ${article.author}`),
                      React.createElement('span', { key: 'separator', className: 'mx-2' }, '•'),
                      React.createElement('span', { key: 'date' }, article.updated)
                    ]),
                    React.createElement('div', { key: 'stats', className: 'text-gray-500' }, [
                      React.createElement('span', { key: 'views' }, `👁️ ${article.views}`),
                      React.createElement('button', {
                        key: 'edit',
                        onClick: (e) => {
                          e.stopPropagation();
                          handleEditArticle(article);
                        },
                        className: 'ml-3 text-blue-600 hover:text-blue-900'
                      }, '✏️'),
                      React.createElement('button', {
                        key: 'delete',
                        onClick: (e) => {
                          e.stopPropagation();
                          handleDeleteArticle(article);
                        },
                        className: 'ml-2 text-red-600 hover:text-red-900'
                      }, '🗑️')
                    ])
                  ])
                ])
              ])
            ))
          ]),
          React.createElement(Modal, {
            key: 'article-modal',
            isOpen: isModalOpen,
            onClose: () => setIsModalOpen(false),
            title: isEditing ? (selectedArticle?.id?.includes('undefined') ? '新規ナレッジ記事' : 'ナレッジ記事編集') : 'ナレッジ記事詳細',
            size: 'xlarge'
          }, selectedArticle && [
            isEditing ? React.createElement('form', {
              key: 'edit-form',
              onSubmit: (e) => {
                e.preventDefault();
                handleSaveArticle();
              },
              className: 'space-y-6'
            }, [
              React.createElement('div', { key: 'basic-info', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '基本情報'),
                React.createElement('div', { key: 'form-grid', className: 'grid grid-cols-1 md:grid-cols-2 gap-4' }, [
                  React.createElement('div', { key: 'title-field', className: 'md:col-span-2' }, [
                    React.createElement('label', { key: 'title-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'タイトル *'),
                    React.createElement('input', {
                      key: 'title-input',
                      type: 'text',
                      value: selectedArticle.title,
                      onChange: (e) => setSelectedArticle({...selectedArticle, title: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                      placeholder: '例: パスワードリセット手順',
                      required: true
                    })
                  ]),
                  React.createElement('div', { key: 'category-field' }, [
                    React.createElement('label', { key: 'category-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'カテゴリ *'),
                    React.createElement('select', {
                      key: 'category-select',
                      value: selectedArticle.category,
                      onChange: (e) => setSelectedArticle({...selectedArticle, category: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                      required: true
                    }, [
                      React.createElement('option', { key: 'select', value: '' }, '--- 選択してください ---'),
                      ...categories.map(cat => 
                        React.createElement('option', { key: cat, value: cat }, cat)
                      )
                    ])
                  ]),
                  React.createElement('div', { key: 'status-field' }, [
                    React.createElement('label', { key: 'status-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'ステータス'),
                    React.createElement('select', {
                      key: 'status-select',
                      value: selectedArticle.status,
                      onChange: (e) => setSelectedArticle({...selectedArticle, status: e.target.value}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
                    }, [
                      React.createElement('option', { key: 'draft', value: 'Draft' }, '下書き'),
                      React.createElement('option', { key: 'published', value: 'Published' }, '公開済み')
                    ])
                  ]),
                  React.createElement('div', { key: 'tags-field', className: 'md:col-span-2' }, [
                    React.createElement('label', { key: 'tags-label', className: 'block text-sm font-medium text-gray-700 mb-1' }, 'タグ（カンマ区切り）'),
                    React.createElement('input', {
                      key: 'tags-input',
                      type: 'text',
                      value: selectedArticle.tags.join(', '),
                      onChange: (e) => setSelectedArticle({...selectedArticle, tags: e.target.value.split(',').map(t => t.trim()).filter(t => t)}),
                      className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                      placeholder: '例: パスワード, リセット, AD'
                    })
                  ])
                ])
              ]),
              React.createElement('div', { key: 'content-section', className: 'form-section' }, [
                React.createElement('h3', { key: 'section-title', className: 'text-lg font-medium text-gray-900 mb-4' }, '記事内容'),
                React.createElement('textarea', {
                  key: 'content-textarea',
                  value: selectedArticle.content,
                  onChange: (e) => setSelectedArticle({...selectedArticle, content: e.target.value}),
                  rows: 10,
                  className: 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                  placeholder: '記事の内容を記入してください。\nMarkdown形式で記述できます。',
                  required: true
                })
              ]),
              React.createElement('div', { key: 'form-actions', className: 'flex justify-end space-x-3 pt-6 border-t border-gray-200' }, [
                React.createElement('button', {
                  key: 'cancel',
                  type: 'button',
                  onClick: () => setIsModalOpen(false),
                  className: 'px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50'
                }, 'キャンセル'),
                React.createElement('button', {
                  key: 'save',
                  type: 'submit',
                  className: 'px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700'
                }, selectedArticle.id && articles.find(art => art.id === selectedArticle.id) ? '更新' : '作成')
              ])
            ]) : React.createElement('div', {
              key: 'view-mode',
              className: 'space-y-6'
            }, [
              React.createElement('div', { key: 'article-header', className: 'border-b border-gray-200 pb-4' }, [
                React.createElement('h2', { key: 'title', className: 'text-2xl font-bold text-gray-900 mb-2' }, selectedArticle.title),
                React.createElement('div', { key: 'meta-info', className: 'flex items-center text-sm text-gray-600 space-x-4' }, [
                  React.createElement('span', { key: 'author' }, `👤 ${selectedArticle.author}`),
                  React.createElement('span', { key: 'date' }, `📅 ${selectedArticle.updated}`),
                  React.createElement('span', { key: 'views' }, `👁️ ${selectedArticle.views} views`),
                  React.createElement('span', {
                    key: 'status',
                    className: `px-2 py-1 rounded-full ${
                      selectedArticle.status === 'Published' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
                    }`
                  }, selectedArticle.status === 'Published' ? '公開済み' : '下書き')
                ])
              ]),
              React.createElement('div', { key: 'article-content' }, [
                React.createElement('div', { key: 'category', className: 'mb-4' }, [
                  React.createElement('span', { key: 'label', className: 'text-sm text-gray-500' }, 'カテゴリ: '),
                  React.createElement('span', { key: 'value', className: 'text-sm font-medium text-gray-900' }, selectedArticle.category)
                ]),
                React.createElement('div', { key: 'tags', className: 'flex flex-wrap gap-2 mb-6' }, 
                  selectedArticle.tags.map((tag, index) => 
                    React.createElement('span', {
                      key: index,
                      className: 'bg-blue-100 text-blue-800 text-xs px-3 py-1 rounded-full'
                    }, tag)
                  )
                ),
                React.createElement('div', { key: 'content', className: 'prose prose-sm max-w-none' }, [
                  React.createElement('pre', { key: 'content-text', className: 'whitespace-pre-wrap bg-gray-50 p-6 rounded-lg' }, 
                    selectedArticle.content
                  )
                ])
              ]),
              React.createElement('div', { key: 'actions', className: 'flex justify-between items-center pt-6 border-t border-gray-200' }, [
                React.createElement('button', {
                  key: 'delete',
                  onClick: () => handleDeleteArticle(selectedArticle),
                  className: 'px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700'
                }, '🗑️ 削除'),
                React.createElement('div', {
                  key: 'right-actions',
                  className: 'flex space-x-3'
                }, [
                  React.createElement('button', {
                    key: 'edit',
                    onClick: () => setIsEditing(true),
                    className: 'px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700'
                  }, '✏️ 編集'),
                  React.createElement('button', {
                    key: 'close',
                    onClick: () => setIsModalOpen(false),
                    className: 'px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50'
                  }, '閉じる')
                ])
              ])
            ])
          ])
        ]);
      };

      // 変更管理ページ
      const ChangesPage = () => {
        const [changes, setChanges] = useState(mockData.changes);
        const [selectedChange, setSelectedChange] = useState(null);
        const [isModalOpen, setIsModalOpen] = useState(false);
        const [isEditing, setIsEditing] = useState(false);
        const [searchQuery, setSearchQuery] = useState('');
        const [statusFilter, setStatusFilter] = useState('All');

        const filteredChanges = changes.filter(change => {
          const matchesSearch = change.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                               change.description.toLowerCase().includes(searchQuery.toLowerCase());
          const matchesStatus = statusFilter === 'All' || change.status === statusFilter;
          return matchesSearch && matchesStatus;
        });

        const generateChangeId = () => {
          const year = new Date().getFullYear();
          const count = String(changes.length + 1).padStart(3, '0');
          return `CHG-${year}-${count}`;
        };

        const { user } = useAuth();

        const handleCreateChange = () => {
          setSelectedChange({
            id: generateChangeId(),
            title: '',
            description: '',
            status: 'Planning',
            priority: 'Medium',
            implementer: '',
            requester: user?.username || '',
            plannedStart: '',
            plannedEnd: '',
            category: '',
            risk: 'Medium',
            impact: 'Medium',
            approver: '',
            rollbackPlan: '',
            testPlan: '',
            created: new Date().toISOString().split('T')[0],
            approvedDate: ''
          });
          setIsEditing(true);
          setIsModalOpen(true);
        };

        return React.createElement(MainLayout, {}, [
          React.createElement('div', {
            key: 'header',
            className: 'bg-white shadow border-b border-slate-200'
          }, 
            React.createElement('div', {
              className: 'px-6 py-4 flex justify-between items-center'
            }, [
              React.createElement('div', { key: 'title-section' }, [
                React.createElement('h1', {
                  key: 'title',
                  className: 'text-2xl font-bold text-slate-800'
                }, '🔄 変更管理'),
                React.createElement('p', {
                  key: 'subtitle',
                  className: 'text-slate-600 mt-1'
                }, 'ITインフラ・サービスの変更管理')
              ]),
              React.createElement('button', {
                key: 'create-btn',
                onClick: handleCreateChange,
                className: 'bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors transform hover:scale-105 shadow-lg font-medium flex items-center space-x-2'
              }, [
                React.createElement('span', { key: 'icon', className: 'text-lg' }, '➕'),
                React.createElement('span', { key: 'text' }, '新規変更作成')
              ])
            ])
          ),
          React.createElement('div', {
            key: 'content',
            className: 'flex-1 p-6'
          }, [
            React.createElement('div', {
              key: 'filters',
              className: 'bg-white rounded-lg shadow-sm border p-4 mb-6'
            }, [
              React.createElement('div', {
                key: 'filter-row',
                className: 'grid grid-cols-1 md:grid-cols-3 gap-4'
              }, [
                React.createElement('div', { key: 'search' }, [
                  React.createElement('label', {
                    key: 'search-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '🔍 検索'),
                  React.createElement('input', {
                    key: 'search-input',
                    type: 'text',
                    value: searchQuery,
                    onChange: (e) => setSearchQuery(e.target.value),
                    placeholder: 'タイトル・説明で検索',
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  })
                ]),
                React.createElement('div', { key: 'status-filter' }, [
                  React.createElement('label', {
                    key: 'status-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '📊 ステータス'),
                  React.createElement('select', {
                    key: 'status-select',
                    value: statusFilter,
                    onChange: (e) => setStatusFilter(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  }, [
                    React.createElement('option', { key: 'all', value: 'All' }, '全て'),
                    React.createElement('option', { key: 'planning', value: 'Planning' }, '計画中'),
                    React.createElement('option', { key: 'scheduled', value: 'Scheduled' }, 'スケジュール済み'),
                    React.createElement('option', { key: 'implementing', value: 'Implementing' }, '実施中'),
                    React.createElement('option', { key: 'completed', value: 'Completed' }, '完了'),
                    React.createElement('option', { key: 'failed', value: 'Failed' }, '失敗')
                  ])
                ]),
                React.createElement('div', { key: 'stats', className: 'flex items-end' }, [
                  React.createElement('div', {
                    key: 'count',
                    className: 'text-sm text-gray-600'
                  }, `📋 表示中: ${filteredChanges.length}件 / 総計: ${changes.length}件`)
                ])
              ])
            ]),
            React.createElement('div', {
              key: 'table',
              className: 'bg-white rounded-lg shadow-sm border overflow-hidden'
            }, [
              React.createElement('div', {
                key: 'table-container',
                className: 'table-responsive'
              }, [
                React.createElement('table', {
                  key: 'changes-table',
                  className: 'min-w-full divide-y divide-gray-200'
                }, [
                  React.createElement('thead', {
                    key: 'table-head',
                    className: 'bg-gray-50'
                  }, [
                    React.createElement('tr', { key: 'header-row' }, [
                      React.createElement('th', { key: 'id', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'ID'),
                      React.createElement('th', { key: 'title', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'タイトル'),
                      React.createElement('th', { key: 'status', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'ステータス'),
                      React.createElement('th', { key: 'priority', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '優先度'),
                      React.createElement('th', { key: 'risk', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, 'リスク'),
                      React.createElement('th', { key: 'planned', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '実施予定'),
                      React.createElement('th', { key: 'implementer', className: 'px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider' }, '実施者')
                    ])
                  ]),
                  React.createElement('tbody', {
                    key: 'table-body',
                    className: 'bg-white divide-y divide-gray-200'
                  }, filteredChanges.map(change => 
                    React.createElement('tr', {
                      key: change.id,
                      className: 'hover:bg-gray-50 cursor-pointer',
                      onClick: () => {
                        setSelectedChange(change);
                        setIsEditing(false);
                        setIsModalOpen(true);
                      }
                    }, [
                      React.createElement('td', { key: 'id', className: 'px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900' }, change.id),
                      React.createElement('td', { key: 'title', className: 'px-6 py-4 text-sm text-gray-900' }, change.title),
                      React.createElement('td', { key: 'status', className: 'px-6 py-4 whitespace-nowrap' }, 
                        React.createElement(StatusBadge, { status: change.status })
                      ),
                      React.createElement('td', { key: 'priority', className: 'px-6 py-4 whitespace-nowrap' }, 
                        React.createElement(PriorityBadge, { priority: change.priority })
                      ),
                      React.createElement('td', { key: 'risk', className: 'px-6 py-4 whitespace-nowrap' }, 
                        React.createElement('span', {
                          className: `px-2 py-1 text-xs rounded-full ${
                            change.risk === 'High' ? 'bg-red-100 text-red-800' :
                            change.risk === 'Medium' ? 'bg-yellow-100 text-yellow-800' : 
                            'bg-green-100 text-green-800'
                          }`
                        }, change.risk)
                      ),
                      React.createElement('td', { key: 'planned', className: 'px-6 py-4 whitespace-nowrap text-sm text-gray-500' }, change.plannedStart),
                      React.createElement('td', { key: 'implementer', className: 'px-6 py-4 whitespace-nowrap text-sm text-gray-900' }, change.implementer)
                    ])
                  ))
                ])
              ])
            ])
          ])
        ]);
      };

      // リリース管理ページ
      const ReleasesPage = () => {
        const [releases, setReleases] = useState(mockData.releases);
        const [selectedRelease, setSelectedRelease] = useState(null);
        const [isModalOpen, setIsModalOpen] = useState(false);
        const [isEditing, setIsEditing] = useState(false);
        const [searchQuery, setSearchQuery] = useState('');
        const [statusFilter, setStatusFilter] = useState('All');

        const filteredReleases = releases.filter(release => {
          const matchesSearch = release.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                               release.description.toLowerCase().includes(searchQuery.toLowerCase());
          const matchesStatus = statusFilter === 'All' || release.status === statusFilter;
          return matchesSearch && matchesStatus;
        });

        const generateReleaseId = () => {
          const year = new Date().getFullYear();
          const count = String(releases.length + 1).padStart(3, '0');
          return `REL-${year}-${count}`;
        };

        const { user } = useAuth();

        const handleCreateRelease = () => {
          setSelectedRelease({
            id: generateReleaseId(),
            title: '',
            description: '',
            status: 'Planning',
            releaseDate: '',
            version: '',
            components: [],
            manager: user?.username || '',
            environment: 'Production',
            deploymentMethod: '',
            rollbackPlan: '',
            testingStatus: 'Not Started',
            created: new Date().toISOString().split('T')[0],
            plannedStart: '',
            plannedEnd: ''
          });
          setIsEditing(true);
          setIsModalOpen(true);
        };

        return React.createElement(MainLayout, {}, [
          React.createElement('div', {
            key: 'header',
            className: 'bg-white shadow border-b border-slate-200'
          }, 
            React.createElement('div', {
              className: 'px-6 py-4 flex justify-between items-center'
            }, [
              React.createElement('div', { key: 'title-section' }, [
                React.createElement('h1', {
                  key: 'title',
                  className: 'text-2xl font-bold text-slate-800'
                }, '🚀 リリース管理'),
                React.createElement('p', {
                  key: 'subtitle',
                  className: 'text-slate-600 mt-1'
                }, 'システムリリースの計画と管理')
              ]),
              React.createElement('button', {
                key: 'create-btn',
                onClick: handleCreateRelease,
                className: 'bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors transform hover:scale-105 shadow-lg font-medium flex items-center space-x-2'
              }, [
                React.createElement('span', { key: 'icon', className: 'text-lg' }, '➕'),
                React.createElement('span', { key: 'text' }, '新規リリース作成')
              ])
            ])
          ),
          React.createElement('div', {
            key: 'content',
            className: 'flex-1 p-6'
          }, [
            React.createElement('div', {
              key: 'filters',
              className: 'bg-white rounded-lg shadow-sm border p-4 mb-6'
            }, [
              React.createElement('div', {
                key: 'filter-row',
                className: 'grid grid-cols-1 md:grid-cols-3 gap-4'
              }, [
                React.createElement('div', { key: 'search' }, [
                  React.createElement('label', {
                    key: 'search-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '🔍 検索'),
                  React.createElement('input', {
                    key: 'search-input',
                    type: 'text',
                    value: searchQuery,
                    onChange: (e) => setSearchQuery(e.target.value),
                    placeholder: 'タイトル・説明で検索',
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  })
                ]),
                React.createElement('div', { key: 'status-filter' }, [
                  React.createElement('label', {
                    key: 'status-label',
                    className: 'block text-sm font-medium text-gray-700 mb-1'
                  }, '📊 ステータス'),
                  React.createElement('select', {
                    key: 'status-select',
                    value: statusFilter,
                    onChange: (e) => setStatusFilter(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500'
                  }, [
                    React.createElement('option', { key: 'all', value: 'All' }, '全て'),
                    React.createElement('option', { key: 'planning', value: 'Planning' }, '計画中'),
                    React.createElement('option', { key: 'testing', value: 'Testing' }, 'テスト中'),
                    React.createElement('option', { key: 'scheduled', value: 'Scheduled' }, 'スケジュール済み'),
                    React.createElement('option', { key: 'deployed', value: 'Deployed' }, 'デプロイ済み'),
                    React.createElement('option', { key: 'rollback', value: 'Rollback' }, 'ロールバック')
                  ])
                ]),
                React.createElement('div', { key: 'stats', className: 'flex items-end' }, [
                  React.createElement('div', {
                    key: 'count',
                    className: 'text-sm text-gray-600'
                  }, `📋 表示中: ${filteredReleases.length}件 / 総計: ${releases.length}件`)
                ])
              ])
            ]),
            React.createElement('div', {
              key: 'releases-grid',
              className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'
            }, filteredReleases.map(release => 
              React.createElement('div', {
                key: release.id,
                className: 'bg-white rounded-lg shadow-sm border hover:shadow-lg transition-shadow cursor-pointer',
                onClick: () => {
                  setSelectedRelease(release);
                  setIsEditing(false);
                  setIsModalOpen(true);
                }
              }, [
                React.createElement('div', { key: 'card-header', className: 'p-6' }, [
                  React.createElement('div', { key: 'header-row', className: 'flex justify-between items-start mb-3' }, [
                    React.createElement('h3', { key: 'title', className: 'text-lg font-semibold text-gray-900' }, release.title),
                    React.createElement('span', { key: 'version', className: 'text-sm font-mono bg-gray-100 px-2 py-1 rounded' }, release.version)
                  ]),
                  React.createElement('p', { key: 'description', className: 'text-sm text-gray-700 mb-4' }, release.description),
                  React.createElement('div', { key: 'meta-info', className: 'space-y-2' }, [
                    React.createElement('div', { key: 'status', className: 'flex items-center justify-between' }, [
                      React.createElement('span', { key: 'label', className: 'text-sm text-gray-500' }, 'ステータス'),
                      React.createElement(StatusBadge, { key: 'badge', status: release.status })
                    ]),
                    React.createElement('div', { key: 'date', className: 'flex items-center justify-between' }, [
                      React.createElement('span', { key: 'label', className: 'text-sm text-gray-500' }, 'リリース日'),
                      React.createElement('span', { key: 'value', className: 'text-sm text-gray-900' }, release.releaseDate)
                    ]),
                    React.createElement('div', { key: 'manager', className: 'flex items-center justify-between' }, [
                      React.createElement('span', { key: 'label', className: 'text-sm text-gray-500' }, 'マネージャー'),
                      React.createElement('span', { key: 'value', className: 'text-sm text-gray-900' }, release.manager)
                    ])
                  ])
                ]),
                React.createElement('div', { key: 'card-footer', className: 'bg-gray-50 px-6 py-3 border-t' }, [
                  React.createElement('div', { key: 'components', className: 'flex flex-wrap gap-1' }, 
                    release.components.slice(0, 3).map((component, index) => 
                      React.createElement('span', {
                        key: index,
                        className: 'bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded'
                      }, component)
                    ),
                    release.components.length > 3 && React.createElement('span', {
                      key: 'more',
                      className: 'text-xs text-gray-500'
                    }, `+${release.components.length - 3}`)
                  )
                ])
              ])
            ))
          ])
        ]);
      };

      // 設定ページ
      const SettingsPage = () => {
        const { user } = useAuth();
        const [activeTab, setActiveTab] = useState('profile');
        const [profileData, setProfileData] = useState({
          username: user?.username || '',
          email: user?.email || '',
          department: '',
          phone: ''
        });
        const [passwordData, setPasswordData] = useState({
          current: '',
          new: '',
          confirm: ''
        });
        const [notifications, setNotifications] = useState({
          emailAlerts: true,
          incidentUpdates: true,
          changeApprovals: false,
          releaseNotifications: true
        });

        const handleProfileSave = () => {
          alert('プロフィールが更新されました。');
        };

        const handlePasswordChange = () => {
          if (passwordData.new !== passwordData.confirm) {
            alert('新しいパスワードが一致しません。');
            return;
          }
          alert('パスワードが変更されました。');
          setPasswordData({ current: '', new: '', confirm: '' });
        };

        const tabs = [
          { id: 'profile', name: 'プロフィール', icon: '👤' },
          { id: 'password', name: 'パスワード', icon: '🔐' },
          { id: 'notifications', name: '通知設定', icon: '🔔' },
          { id: 'system', name: 'システム設定', icon: '⚙️' }
        ];

        return React.createElement(MainLayout, {}, [
          React.createElement('div', {
            key: 'header',
            className: 'bg-white shadow border-b border-slate-200'
          }, 
            React.createElement('div', {
              className: 'px-6 py-4'
            }, [
              React.createElement('h1', {
                key: 'title',
                className: 'text-2xl font-bold text-slate-800'
              }, '⚙️ 設定'),
              React.createElement('p', {
                key: 'subtitle',
                className: 'text-slate-600 mt-1'
              }, 'アカウントとシステムの設定管理')
            ])
          ),
          React.createElement('div', {
            key: 'content',
            className: 'flex-1 p-6'
          }, [
            React.createElement('div', {
              key: 'settings-container',
              className: 'max-w-4xl mx-auto'
            }, [
              React.createElement('div', {
                key: 'tabs',
                className: 'bg-white rounded-lg shadow-sm border mb-6'
              }, [
                React.createElement('div', {
                  key: 'tab-list',
                  className: 'border-b border-gray-200'
                }, [
                  React.createElement('nav', {
                    key: 'nav',
                    className: 'flex space-x-8 px-6'
                  }, tabs.map(tab => 
                    React.createElement('button', {
                      key: tab.id,
                      onClick: () => setActiveTab(tab.id),
                      className: `py-4 px-1 border-b-2 font-medium text-sm ${
                        activeTab === tab.id 
                          ? 'border-blue-500 text-blue-600' 
                          : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                      }`
                    }, [
                      React.createElement('span', { key: 'icon', className: 'mr-2' }, tab.icon),
                      React.createElement('span', { key: 'name' }, tab.name)
                    ])
                  ))
                ])
              ]),
              React.createElement('div', {
                key: 'tab-content',
                className: 'bg-white rounded-lg shadow-sm border p-6'
              }, [
                activeTab === 'profile' && React.createElement('div', {
                  key: 'profile-tab',
                  className: 'space-y-6'
                }, [
                  React.createElement('h3', { key: 'title', className: 'text-lg font-medium text-gray-900' }, 'プロフィール設定'),
                  React.createElement('div', { key: 'form', className: 'grid grid-cols-1 md:grid-cols-2 gap-6' }, [
                    React.createElement('div', { key: 'username' }, [
                      React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'ユーザー名'),
                      React.createElement('input', {
                        type: 'text',
                        value: profileData.username,
                        onChange: (e) => setProfileData({...profileData, username: e.target.value}),
                        className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                        disabled: true
                      })
                    ]),
                    React.createElement('div', { key: 'email' }, [
                      React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'メールアドレス'),
                      React.createElement('input', {
                        type: 'email',
                        value: profileData.email,
                        onChange: (e) => setProfileData({...profileData, email: e.target.value}),
                        className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
                      })
                    ]),
                    React.createElement('div', { key: 'department' }, [
                      React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '部署'),
                      React.createElement('input', {
                        type: 'text',
                        value: profileData.department,
                        onChange: (e) => setProfileData({...profileData, department: e.target.value}),
                        className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                        placeholder: '例: IT部'
                      })
                    ]),
                    React.createElement('div', { key: 'phone' }, [
                      React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '電話番号'),
                      React.createElement('input', {
                        type: 'tel',
                        value: profileData.phone,
                        onChange: (e) => setProfileData({...profileData, phone: e.target.value}),
                        className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500',
                        placeholder: '例: 03-1234-5678'
                      })
                    ])
                  ]),
                  React.createElement('div', { key: 'actions', className: 'flex justify-end' }, [
                    React.createElement('button', {
                      onClick: handleProfileSave,
                      className: 'px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'
                    }, '保存')
                  ])
                ]),
                activeTab === 'password' && React.createElement('div', {
                  key: 'password-tab',
                  className: 'space-y-6'
                }, [
                  React.createElement('h3', { key: 'title', className: 'text-lg font-medium text-gray-900' }, 'パスワード変更'),
                  React.createElement('div', { key: 'form', className: 'max-w-md space-y-4' }, [
                    React.createElement('div', { key: 'current' }, [
                      React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '現在のパスワード'),
                      React.createElement('input', {
                        type: 'password',
                        value: passwordData.current,
                        onChange: (e) => setPasswordData({...passwordData, current: e.target.value}),
                        className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
                      })
                    ]),
                    React.createElement('div', { key: 'new' }, [
                      React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '新しいパスワード'),
                      React.createElement('input', {
                        type: 'password',
                        value: passwordData.new,
                        onChange: (e) => setPasswordData({...passwordData, new: e.target.value}),
                        className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
                      })
                    ]),
                    React.createElement('div', { key: 'confirm' }, [
                      React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, '新しいパスワード（確認）'),
                      React.createElement('input', {
                        type: 'password',
                        value: passwordData.confirm,
                        onChange: (e) => setPasswordData({...passwordData, confirm: e.target.value}),
                        className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500'
                      })
                    ])
                  ]),
                  React.createElement('div', { key: 'actions', className: 'flex justify-end' }, [
                    React.createElement('button', {
                      onClick: handlePasswordChange,
                      className: 'px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700'
                    }, 'パスワード変更')
                  ])
                ]),
                activeTab === 'notifications' && React.createElement('div', {
                  key: 'notifications-tab',
                  className: 'space-y-6'
                }, [
                  React.createElement('h3', { key: 'title', className: 'text-lg font-medium text-gray-900' }, '通知設定'),
                  React.createElement('div', { key: 'settings', className: 'space-y-4' }, 
                    Object.entries({
                      emailAlerts: 'メール通知',
                      incidentUpdates: 'インシデント更新通知',
                      changeApprovals: '変更承認通知',
                      releaseNotifications: 'リリース通知'
                    }).map(([key, label]) => 
                      React.createElement('div', {
                        key: key,
                        className: 'flex items-center justify-between p-4 bg-gray-50 rounded-lg'
                      }, [
                        React.createElement('span', { key: 'label', className: 'text-sm font-medium text-gray-700' }, label),
                        React.createElement('label', { key: 'toggle', className: 'relative inline-flex items-center cursor-pointer' }, [
                          React.createElement('input', {
                            key: 'input',
                            type: 'checkbox',
                            checked: notifications[key],
                            onChange: (e) => setNotifications({...notifications, [key]: e.target.checked}),
                            className: 'sr-only peer'
                          }),
                          React.createElement('div', {
                            key: 'slider',
                            className: "w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"
                          })
                        ])
                      ])
                    )
                  )
                ]),
                activeTab === 'system' && React.createElement('div', {
                  key: 'system-tab',
                  className: 'space-y-6'
                }, [
                  React.createElement('h3', { key: 'title', className: 'text-lg font-medium text-gray-900' }, 'システム設定'),
                  React.createElement('div', { key: 'info', className: 'bg-gray-50 rounded-lg p-6' }, [
                    React.createElement('dl', { key: 'list', className: 'space-y-3' }, [
                      React.createElement('div', { key: 'version' }, [
                        React.createElement('dt', { className: 'text-sm font-medium text-gray-500' }, 'システムバージョン'),
                        React.createElement('dd', { className: 'text-sm text-gray-900' }, 'v2.1.0')
                      ]),
                      React.createElement('div', { key: 'last-update' }, [
                        React.createElement('dt', { className: 'text-sm font-medium text-gray-500' }, '最終更新日'),
                        React.createElement('dd', { className: 'text-sm text-gray-900' }, '2024-06-15')
                      ]),
                      React.createElement('div', { key: 'license' }, [
                        React.createElement('dt', { className: 'text-sm font-medium text-gray-500' }, 'ライセンス'),
                        React.createElement('dd', { className: 'text-sm text-gray-900' }, 'Enterprise Edition')
                      ])
                    ])
                  ])
                ])
              ])
            ])
          ])
        ]);
      };

      // プロテクトルート
      const ProtectedRoute = ({ children }) => {
        const { user } = useAuth();
        return user ? children : React.createElement(Navigate, { to: '/login', replace: true });
      };

      // メインアプリ
      const App = () => {
        return React.createElement(AuthProvider, {},
          React.createElement(HashRouter, {},
            React.createElement(Routes, {}, [
              React.createElement(Route, {
                key: 'login',
                path: '/login',
                element: React.createElement(LoginPage)
              }),
              React.createElement(Route, {
                key: 'dashboard',
                path: '/dashboard',
                element: React.createElement(ProtectedRoute, {},
                  React.createElement(DashboardPage)
                )
              }),
              React.createElement(Route, {
                key: 'incidents',
                path: '/incidents',
                element: React.createElement(ProtectedRoute, {},
                  React.createElement(IncidentsPage)
                )
              }),
              React.createElement(Route, {
                key: 'assets',
                path: '/assets',
                element: React.createElement(ProtectedRoute, {},
                  React.createElement(AssetsPage)
                )
              }),
              React.createElement(Route, {
                key: 'requests',
                path: '/requests',
                element: React.createElement(ProtectedRoute, {},
                  React.createElement(ServiceRequestsPage)
                )
              }),
              React.createElement(Route, {
                key: 'knowledge',
                path: '/knowledge',
                element: React.createElement(ProtectedRoute, {},
                  React.createElement(KnowledgePage)
                )
              }),
              React.createElement(Route, {
                key: 'changes',
                path: '/changes',
                element: React.createElement(ProtectedRoute, {},
                  React.createElement(ChangesPage)
                )
              }),
              React.createElement(Route, {
                key: 'releases',
                path: '/releases',
                element: React.createElement(ProtectedRoute, {},
                  React.createElement(ReleasesPage)
                )
              }),
              React.createElement(Route, {
                key: 'settings',
                path: '/settings',
                element: React.createElement(ProtectedRoute, {},
                  React.createElement(SettingsPage)
                )
              }),
              React.createElement(Route, {
                key: 'root',
                path: '/',
                element: React.createElement(Navigate, { to: '/dashboard', replace: true })
              })
            ])
          )
        );
      };

      // アプリをレンダリング
      ReactDOM.render(React.createElement(App), document.getElementById('root'));
    }
  </script>
</body>
</html>